<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¨Ø´Ù…Ù‡Ù†Ø¯Ø³ ğŸ‘‘</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma; background: #1a1a2e; color: white; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: #16213e; padding: 20px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        h1 { text-align: center; color: #4ecca3; border-bottom: 2px solid #4ecca3; padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #0f3460; }
        th, td { padding: 15px; border: 1px solid #1a1a2e; text-align: center; }
        th { background: #4ecca3; color: #1a1a2e; }
        .btn-approve { background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-left: 5px; }
        .btn-reject { background: #e94560; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; }
        .empty-msg { text-align: center; padding: 20px; color: #888; }
    </style>
</head>
<body>

<div class="container">
    <h1>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ ğŸ“Š</h1>
    
    <table>
        <thead>
            <tr>
                <th>ÙƒÙˆØ¯ Ø§Ù„Ø·Ù„Ø¨</th>
                <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                <th>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ / Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
        </thead>
        <tbody id="adminTableBody">
            </tbody>
    </table>
    <div id="noRequests" class="empty-msg">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</div>
</div>

<script>
    // ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Storage)
    function loadRequests() {
        const tableBody = document.getElementById('adminTableBody');
        const noReqMsg = document.getElementById('noRequests');
        
        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø©
        let requests = JSON.parse(localStorage.getItem('studentRequests')) || [];

        if (requests.length === 0) {
            tableBody.innerHTML = "";
            noReqMsg.style.display = "block";
            return;
        }

        noReqMsg.style.display = "none";
        tableBody.innerHTML = requests.map((req, index) => `
            <tr>
                <td>${req.id}</td>
                <td>${req.name}</td>
                <td>${req.email} <br> ${req.phone}</td>
                <td style="color: ${req.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ? '#f39c12' : '#2ecc71'}">${req.status}</td>
                <td>
                    <button class="btn-approve" onclick="actionRequest(${index}, 'Ù…ÙˆØ§ÙÙ‚Ø©')">Ù…ÙˆØ§ÙÙ‚Ø©</button>
                    <button class="btn-reject" onclick="actionRequest(${index}, 'Ø±ÙØ¶')">Ø­Ø°Ù</button>
                </td>
            </tr>
        `).join('');
    }

    function actionRequest(index, type) {
        let requests = JSON.parse(localStorage.getItem('studentRequests'));
        
        if (type === 'Ù…ÙˆØ§ÙÙ‚Ø©') {
            requests[index].status = 'âœ… ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„';
            // Ù‡Ù†Ø§ Ù…Ù…ÙƒÙ† ØªØ¨Ø±Ù…Ø¬ Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø£Ùˆ ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹
            alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨ " + requests[index].name);
        } else {
            requests.splice(index, 1); // Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹
            alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨");
        }

        localStorage.setItem('studentRequests', JSON.stringify(requests));
        loadRequests();
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    window.onload = loadRequests;
</script>

</body>
</html>