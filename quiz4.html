<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุงูุฏุฑุณ ุงูุฑุงุจุน - ุงูุญููุงุช (Loops) ูุงูุฏูุงู (Functions)</title>
    <style>
        /* (ุงูุฃููุงุท ุชุจูู ููุง ูู) */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #f9f9f9, #e0f7fa);
            color: #222;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #00796b;
            font-size: 2em;
        }
        h2 {
            color: #004d40;
            font-size: 1.5em;
            margin-top: 30px;
            border-bottom: 2px solid #e0f7fa;
            padding-bottom: 10px;
        }

        .quiz-container {
            max-width: 900px;
            margin: auto;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: right;
        }

        .question {
            margin: 20px 0;
            font-weight: bold;
            color: #004d40;
            white-space: pre-wrap;
            text-align: right;
        }
        
        .code-snippet {
            display: block;
            background-color: #f1f8e9;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            direction: ltr;
            text-align: left;
            overflow-x: auto;
            font-weight: 700;
        }

        .option {
            background-color: #f1f8e9;
            border: 2px solid #009688;
            border-radius: 10px;
            padding: 10px;
            margin: 8px 0;
            cursor: pointer;
            transition: 0.3s;
            text-align: right;
        }

        .option:hover {
            background-color: #e0f2f1;
            transform: scale(1.01);
        }
        /* ุฃููุงุท ููุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุงูุฎุงุทุฆุฉ */
        .option.correct {
            background-color: #a5d6a7 !important; /* ุฃุฎุถุฑ ูุงุชุญ */
        }
        .option.wrong {
            background-color: #ef9a9a !important; /* ุฃุญูุฑ ูุงุชุญ */
        }


        .feedback {
            margin-top: 8px;
            font-size: 15px;
            font-weight: bold;
            color: #004d40;
            min-height: 20px; 
            line-height: 1.6;
        }

        .btn {
            background: linear-gradient(90deg, #009688, #26a69a);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .btn:hover {
            transform: scale(1.05);
            background: linear-gradient(90deg, #00796b, #004d40);
        }

        .result {
            font-size: 20px;
            margin-top: 25px;
            font-weight: bold;
            text-align: center;
            padding: 15px;
            border: 2px solid #009688;
            border-radius: 10px;
            background-color: #e0f7fa;
        }

        .footer {
            margin-top: 30px;
            font-size: 14px;
            color: #555;
            text-align: center;
        }

        /* ุฃููุงุท ุงููุดุฑูุน ุงูุชุทุจููู */
        .project-section {
            border: 2px solid #009688;
            padding: 20px;
            border-radius: 15px;
            background-color: #f7fff7;
            margin-top: 20px;
        }
        .project-explanation {
            line-height: 1.7;
            font-weight: 600;
        }
        .project-output {
            margin-top: 10px;
            background:#fff;
            padding:12px;
            border-radius:8px;
            font-family:monospace;
            direction:ltr;
            text-align:left;
            white-space:pre-wrap;
            min-height:50px;
            color:#004d40;
            font-weight:700;
            border: 1px solid #ccc;
        }
        .project-output.error {
            background:#fff0f0;
            color:#a00;
            border-color: #a00;
        }
        .project-output.success {
            background: #e6ffe6;
            color: #0a0;
            border-color: #0a0;
        }
        .editor {
            width:100%;
            min-height:150px;
            font-family:monospace;
            font-size:15px;
            direction:ltr;
            text-align:left;
            border-radius:10px;
            padding:12px;
            border:2px solid #d6eae6;
            background:#fff;
            resize:vertical;
        }
    </style>
</head>
<body>

    <h1>๐ ุงุฎุชุจุงุฑ ุงูุฏุฑุณ ุงูุฑุงุจุน - ุงูุญููุงุช (Loops) ูุงูุฏูุงู (Functions)</h1>

    <div class="quiz-container" id="quiz">
        <div id="questions"></div>
        
        <div style="text-align:center; margin-top: 20px;">
            <button class="btn" onclick="submitQuiz()">ุนุฑุถ ูุฌููุน ุงูููุงุท</button>
            <button class="btn" onclick="showCorrectAnswers()">ุงุนุฑุถ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ</button>
        </div>
        <div id="result" class="result"></div>
        
        <h2>๐ข ุงููุดุฑูุน ุงูุชุทุจููู ุงูุฃูู: ุฏุงูุฉ ุญุณุงุจ ูุฌููุน ุงูุฃุฑูุงู (ุญููุฉ For)</h2>
        <div class="project-section">
            <p class="project-explanation">
                <strong>ุงููููุฉ:</strong> ุงูุชุจ ุฏุงูุฉ ุชุณูู <code>sumRange</code> ุชูุจู ุนุฏุฏุงู ูุงุญุฏุงู <code>n</code>. ูุฌุจ ุฃู ุชุณุชุฎุฏู ูุฐู ุงูุฏุงูุฉ ุญููุฉ <code>for</code> ูุญุณุงุจ ูุฌููุน ุงูุฃุฑูุงู ูู 1 ุฅูู <code>n</code> ุซู **ุฅุฑุฌุงุน** ุงููููุฉ (<code>return</code>).
                <ol style="text-align: right;">
                    <li>ุนุฑูู ุงูุฏุงูุฉ ุจุงูุดูู: <code>function sumRange(n) { ... }</code>.</li>
                    <li>ุงุณุชุฎุฏู ุญููุฉ <code>for</code> ุชุจุฏุฃ ูู 1 ูุชุณุชูุฑ ุญุชู <code>n</code>.</li>
                    <li>ูุฌุจ ุฃู ุชุนูุฏ ุงูุฏุงูุฉ ุงููููุฉ ุงูููุงุฆูุฉ ูููุฌููุน.</li>
                </ol>
            </p>
            <label>ุงูุชุจ ุงูููุฏ ุจุชุงุนู ููุง:</label>
            <textarea id="project_editor_1" class="editor">function sumRange(n) {
  let total = 0;
  // ุงุจุฏุฃ ุญููุฉ for ููุง
  for (let i = 1; i <= n; i++) {
    total = total + i; // ุฃู total += i;
  }
  return total;
}

console.log(sumRange(5)); // ุงููุชููุน: 15 (1+2+3+4+5)
</textarea>
            <div style="text-align:center;">
                <button class="btn" onclick="runProjectTest(1)">โถ ุชุดุบูู ุงูููุฏ ูุงุฎุชุจุงุฑ ุงููุชูุฌุฉ</button>
            </div>
            <div id="project_output_1" class="project-output">ุงููุงุชุฌ ุณูุธูุฑ ููุง...</div>
        </div>
        
        <h2>โญ ุงููุดุฑูุน ุงูุชุทุจููู ุงูุซุงูู: ุฏุงูุฉ ุฅุฎุฑุงุฌ ุงููููุฉ ุงูุฃูุจุฑ (Math.max)</h2>
        <div class="project-section">
            <p class="project-explanation">
                <strong>ุงููููุฉ:</strong> ุงูุชุจ ุฏุงูุฉ ุชุณูู <code>findMax</code> ุชูุจู ุซูุงุซุฉ ุฃุฑูุงู (<code>a, b, c</code>). ูุฌุจ ุฃู ุชุณุชุฎุฏู ูุฐู ุงูุฏุงูุฉ ุงูุฏุงูุฉ ุงููุฏูุฌุฉ <code>Math.max</code> ูุฅุฑุฌุงุน ุงููููุฉ ุงูุฃูุจุฑ ุจูู ุงูุฃุฑูุงู ุงูุซูุงุซุฉ.
                <ol style="text-align: right;">
                    <li>ุนุฑูู ุงูุฏุงูุฉ ุจุงูุดูู: <code>function findMax(a, b, c) { ... }</code>.</li>
                    <li>ุงุณุชุฎุฏู <code>return Math.max(...)</code> ุฏุงุฎู ุงูุฏุงูุฉ.</li>
                    <li>ุงุทุจุน ูุงุชุฌ ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ.</li>
                </ol>
            </p>
            <label>ุงูุชุจ ุงูููุฏ ุจุชุงุนู ููุง:</label>
            <textarea id="project_editor_2" class="editor">function findMax(a, b, c) {
  // ุงุณุชุฎุฏู Math.max ูุฅุฑุฌุงุน ุงูุฃูุจุฑ
  return Math.max(a, b, c);
}

console.log(findMax(15, 80, 42)); // ุงููุชููุน: 80
</textarea>
            <div style="text-align:center;">
                <button class="btn" onclick="runProjectTest(2)">โถ ุชุดุบูู ุงูููุฏ ูุงุฎุชุจุงุฑ ุงููุชูุฌุฉ</button>
            </div>
            <div id="project_output_2" class="project-output">ุงููุงุชุฌ ุณูุธูุฑ ููุง...</div>
        </div>
        
        <br>
        <div style="text-align:center;">
            <button class="btn" onclick="location.href='lesson4.html'">๐ ุฑุฌูุน ููุฏุฑุณ</button> 
            <button class="btn" onclick="location.href='index.html'">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</button>
            <button class="btn" onclick="location.href='lesson5.html'">๐ ุงูุฏุฑุณ ุงูุฎุงูุณ</button>
        </div>
     </div>

    <div class="footer">
        ุชู ุงูุชุตููู ุจูุงุณุทุฉ <strong>Ahmed Ezzat</strong> โค๏ธ
    </div>

    <script>
        // ------------------------------------------------------------------------------------------------
        // ุจูุงูุงุช ุฃุณุฆูุฉ ุงูุฏุฑุณ ุงูุฑุงุจุน (ุงูุญููุงุช ูุงูุฏูุงู) - ุชู ุฒูุงุฏุฉ ุงูุนุฏุฏ ุฅูู 20 ุณุคุงู
        // ------------------------------------------------------------------------------------------------
        const quizData = [
            // 10 ุฃุณุฆูุฉ ุฃุณุงุณูุฉ
            { 
                question: "ูุง ูู ุงูุฌุฒุก ุงููุณุคูู ุนู ุฒูุงุฏุฉ ุฃู ุฅููุงุต ุงููุชุบูุฑ ูู ุญููุฉ <code>for</code>ุ", 
                options: ["ุงูุฌุฒุก ุงูุฃูู (ุงูุชููุฆุฉ)", "ุงูุฌุฒุก ุงูุซุงูู (ุงูุดุฑุท)", "ุงูุฌุฒุก ุงูุซุงูุซ (ุงูุฒูุงุฏุฉ/ุงูุฅููุงุต)", "ูููุฉ <code>console.log</code>"], 
                answer: 2, 
                explanation: "ุงูุฌุฒุก ุงูุซุงูุซ (ูุซู <code>i++</code> ุฃู <code>count = count + 1</code>) ูู ุงููุณุคูู ุนู ุชุญุฏูุซ ุงููุชุบูุฑ ุจุนุฏ ูู ุฏูุฑุฉ." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชู ูู ูุฐุง ุงูููุฏุ\n<span class='code-snippet'>for (let i = 0; i < 3; i++) {\n  console.log('Hello');\n}</span>", 
                options: ["Hello ูุฑุฉ ูุงุญุฏุฉ", "Hello ูุฑุชูู", "Hello ุซูุงุซ ูุฑุงุช", "ูู ูุชู ุทุจุงุนุฉ ุดูุก"], 
                answer: 2, 
                explanation: "ุชุจุฏุฃ <code>i</code> ูู 0ุ ูุชุชูุฑุฑ ุนูุฏูุง ุชููู 0 ู 1 ู 2ุ ุฃู 3 ูุฑุงุช." 
            },
            { 
                question: "ูุง ูู ุงููููุฉ ุงูููุชุงุญูุฉ ุงููุณุชุฎุฏูุฉ ูุชุนุฑูู ุฏุงูุฉ ูุฎุตุตุฉ (Custom Function) ูู JavaScriptุ", 
                options: ["def", "function", "routine", "method"], 
                answer: 1, 
                explanation: "ูุชู ุชุนุฑูู ุงูุฏูุงู ุจุงุณุชุฎุฏุงู ุงููููุฉ ุงูููุชุงุญูุฉ <code>function</code>." 
            },
            { 
                question: "ุฅุฐุง ูุงูุช ุงูุฏุงูุฉ ูุง ุชุญุชูู ุนูู ูููุฉ <code>return</code>ุ ููุง ูู ุงููููุฉ ุงูุชู ุชุฑุฌุนูุง ุจุดูู ุงูุชุฑุงุถูุ", 
                options: ["0", "null", "undefined", "ุฎุทุฃ"], 
                answer: 2, 
                explanation: "ุงูุฏูุงู ุงูุชู ูุง ุชุญุชูู ุนูู <code>return</code> ุฃู ุชุญุชูู ุนูู <code>return</code> ุจุฏูู ูููุฉุ ุชุฑุฌุน <code>undefined</code> ุจุดูู ุงูุชุฑุงุถู." 
            },
            { 
                question: "ูุงุฐุง ุชุนูู ุงูุฏุงูุฉ <code>Math.round(4.7)</code>ุ", 
                options: ["ุชูุฑูุจ ุงููููุฉ ููุฃุนูู (5)", "ุชูุฑูุจ ุงููููุฉ ููุฃุฏูู (4)", "ุฅุฑุฌุงุน ุงููููุฉ ููุง ูู (4.7)", "ุฅุฑุฌุงุน ุงููููุฉ ุงูุฃูุจุฑ (4.7)"], 
                answer: 0, 
                explanation: "ุฏุงูุฉ <code>Math.round()</code> ุชูุฑูุจ ูุฃูุฑุจ ุนุฏุฏ ุตุญูุญ. 4.7 ุฃูุฑุจ ูู 5." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชู ุฅุฐุง ูุงูุช <code>j = 5</code>ุ\n<span class='code-snippet'>for (let j = 5; j > 2; j--) {\n  console.log(j);\n}</span>", 
                options: ["5, 4, 3", "5, 4, 3, 2", "5, 4", "4, 3"], 
                answer: 0, 
                explanation: "ุชุจุฏุฃ <code>j</code> ูู 5ุ ูุชุชูุฑุฑ ุนูุฏูุง ุชููู 5 ู 4 ู 3. ุนูุฏูุง ุชุตู ูู 2 ูุชููู ุงูุดุฑุท (2 > 2 ุฎุงุทุฆ)." 
            },
            { 
                question: "ูุง ูู ุงูุบุฑุถ ุงูุฃุณุงุณู ูู ุงุณุชุฎุฏุงู ุงูุฏูุงู (Functions)ุ", 
                options: ["ุฌุนู ุงูููุฏ ูุนูุฏุงู", "ุชูุฑุงุฑ ุงูููุฏ (Duplication)", "ุชูุธูู ุงูููุฏ ูุชุฌูุจ ุงูุชูุฑุงุฑ (Reusability)", "ุชุบููุฑ ุฅุนุฏุงุฏุงุช ุงููุชุตูุญ"], 
                answer: 2, 
                explanation: "ุงูุฏูุงู ุชุณุงุนุฏ ุนูู ุชุฌููุน ุงูุฃูุงูุฑ ูู ูุชูุฉ ูุงุญุฏุฉ ูููู ุงุณุชุฏุนุงุคูุง ูุฑุงุช ุนุฏูุฏุฉ (ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู)." 
            },
            { 
                question: "ุฅุฐุง ูุงูุช ุงูุฏุงูุฉ ุชูุจู ูุนุทูุงุช (Arguments) ููู ุชุนููุ ููุง ูู ุงูุงุณู ุงูุฐู ูุทูู ุนูู ูุฐู ุงููุนุทูุงุช ุฏุงุฎู ุชุนุฑูู ุงูุฏุงูุฉุ", 
                options: ["Variables", "Returns", "Parameters", "Logs"], 
                answer: 2, 
                explanation: "ุชุณูู ุงููุนุทูุงุช ุฏุงุฎู ุชุนุฑูู ุงูุฏุงูุฉ (ุจูู ุงูุฃููุงุณ) ุจุงูู 'Parameters' ุฃู ุงููุนุงููุงุช." 
            },
            { 
                question: "ูุง ูู ุงููููุฉ ุงูุชู ุชุฑุฌุนูุง ุงูุฏุงูุฉ <code>Math.max(10, 50, 5, 20)</code>ุ", 
                options: ["10", "5", "50", "20"], 
                answer: 2, 
                explanation: "ุฏุงูุฉ <code>Math.max()</code> ุชุฑุฌุน ุงููููุฉ ุงูุฃูุจุฑ ุจูู ุฌููุน ุงููุนุทูุงุช ุงููุฏุฎูุฉ." 
            },
            { 
                question: "ูู ุฃู ุฌุฒุก ูู ุญููุฉ <code>for</code> ูุถุน ุดุฑุท ุงูุชูููุ", 
                options: ["ุงูุฌุฒุก ุงูุฃูู (ุงูุชููุฆุฉ)", "ุงูุฌุฒุก ุงูุซุงูู (ุงูุดุฑุท)", "ุงูุฌุฒุก ุงูุซุงูุซ (ุงูุฒูุงุฏุฉ)", "ูู ุฃู ููุงู ุจุงุณุชุฎุฏุงู <code>break</code>"], 
                answer: 1, 
                explanation: "ุงูุฌุฒุก ุงูุซุงูู ูู ุญููุฉ <code>for</code> ูู ุงูุดุฑุทุ ูุทุงููุง ูุงู ุตุญูุญุงู ุชุณุชูุฑ ุงูุญููุฉ." 
            },
            
            // 10 ุฃุณุฆูุฉ ุฅุถุงููุฉ (ููุงููู ูุชูุฏูุฉ ูุจููุฉ)
            {
                question: "ูุฅููุงู ุญููุฉ ุชูุฑุงุฑูุฉ (Loop) ุจุดูู ููุฑู ูุงูุฎุฑูุฌ ูููุง ุจุงููุงููุ ูุณุชุฎุฏู ุงููููุฉ ุงูููุชุงุญูุฉ:",
                options: ["continue", "stop", "break", "exit"],
                answer: 2,
                explanation: "ุชูุณุชุฎุฏู <code>break</code> ูุฅููุงุก ุงูุญููุฉ ููุฑุงู ููุชุงุจุนุฉ ุชูููุฐ ุงูููุฏ ุงูุฐู ููููุง."
            },
            {
                question: "ูุงุฐุง ุชูุนู ุงููููุฉ ุงูููุชุงุญูุฉ <code>continue</code> ุฏุงุฎู ุญููุฉ ุงูุชูุฑุงุฑุ",
                options: ["ุชููู ุงูุญููุฉ ููุงุฆูุงู", "ุชุจุฏุฃ ุงูุญููุฉ ูู ุฌุฏูุฏ", "ุชุชุฎุทู ุงูุฏูุฑุฉ ุงูุญุงููุฉ ูุชูุชูู ููุฏูุฑุฉ ุงูุชุงููุฉ", "ุชูุฑุฌุน ูููุฉ ูู ุงูุญููุฉ"],
                answer: 2,
                explanation: "<code>continue</code> ุชุชุฎุทู ุงูุฃูุงูุฑ ุงููุชุจููุฉ ูู ุงูุฏูุฑุฉ ุงูุญุงููุฉ ูุชุจุฏุฃ ุงูุฏูุฑุฉ ุงูุชุงููุฉ ููุญููุฉ ูุจุงุดุฑุฉ."
            },
            {
                question: "ุฃู ูู ุฃููุงุน ุงูุญููุงุช ุงูุชุงููุฉ ูู ุงูุฃูุณุจ ุนูุฏูุง ูุง ูุนุฑู ุนุฏุฏ ุงูุชูุฑุงุฑุงุช ูุณุจูุงูุ ุจู ูุชููู ุงูุชูุฑุงุฑ ุนูู ุดุฑุท ูุนููุ",
                options: ["ุญููุฉ For", "ุญููุฉ While", "ุฌููุฉ If", "ุฏุงูุฉ Function"],
                answer: 1,
                explanation: "ุชูุณุชุฎุฏู ุญููุฉ <code>while</code> ุนูุฏูุง ูุนุชูุฏ ุงูุชููู ุนูู ุดุฑุท ูุชู ุงูุชุญูู ููู ูู ุจุฏุงูุฉ ูู ุฏูุฑุฉ."
            },
            {
                question: "ูุง ูู ุงูุฎุทุฃ ูู ูุฐุง ุงูููุฏุ\n<span class='code-snippet'>function calculate() {\n  let x = 5;\n  return x * 2;\n}\n\nlet result = x;</span>",
                options: ["ูููุฉ <code>function</code> ุฎุงุทุฆุฉ", "ูุง ูููู ุงุณุชุฎุฏุงู <code>return</code>", "ุงููุชุบูุฑ <code>x</code> ุบูุฑ ูุนุฑูู ุฎุงุฑุฌ ุงูุฏุงูุฉ (Scope)", "ูุฌุจ ุฃู ุชููู ุงูุฏุงูุฉ ุจุงุณู <code>calc</code>"],
                answer: 2,
                explanation: "ุงููุชุบูุฑ <code>x</code> ุชู ุชุนุฑููู ุฏุงุฎู ุงูุฏุงูุฉุ ูุจุงูุชุงูู ูุฅู ูุทุงู ุฑุคูุชู (Scope) ูุง ูุณูุญ ุจุงููุตูู ุฅููู ูู ุงูุฎุงุฑุฌ."
            },
            {
                question: "ูู ุญููุฉ <code>for</code>ุ ุฅุฐุง ูููุง ุจุฅุบูุงู ุงูุฌุฒุก ุงูุซุงูุซ (ุงูุฒูุงุฏุฉ/ุงูุฅููุงุต)ุ ููุงุฐุง ูุญุฏุซ ุนุงุฏุฉูุ",
                options: ["ุชููุฐ ุงูุญููุฉ ูุฑุฉ ูุงุญุฏุฉ ููุท", "ุชููุฐ ุงูุญููุฉ ุจุดูู ุทุจูุนู", "ุชุญุฏุซ ุญููุฉ ูุง ููุงุฆูุฉ (Infinite Loop)", "ูุญุฏุซ ุฎุทุฃ ุจุฑูุฌู (Syntax Error)"],
                answer: 2,
                explanation: "ุฅุฐุง ูู ูุชุบูุฑ ุนุฏุงุฏ ุงูุญููุฉุ ูุจูู ุดุฑุท ุงูุชููู ุตุญูุญุงู ุจุงุณุชูุฑุงุฑุ ููุง ูุคุฏู ุฅูู ุญููุฉ ูุง ููุงุฆูุฉ."
            },
            {
                question: "ูุง ูู ุงููููุฉ ุงูุชู ุชุฑุฌุนูุง ุงูุฏุงูุฉ <code>Math.floor(9.9)</code>ุ",
                options: ["10", "9", "9.5", "ุฎุทุฃ"],
                answer: 1,
                explanation: "ุฏุงูุฉ <code>Math.floor()</code> ุชูุฑูุจ ุงูุนุฏุฏ ุฏุงุฆูุงู ููุฃุณูู (ุฃูุจุฑ ุนุฏุฏ ุตุญูุญ ุฃุตุบุฑ ูู ุงููููุฉ)."
            },
            {
                question: "ุฃู ููุง ููู ููุซู ุงูุทุฑููุฉ ุงูุตุญูุญุฉ ูุชุนุฑูู ูุงุณุชุฏุนุงุก ุฏุงูุฉ ูุง ุชูุจู ูุนุทูุงุช ูุชุทุจุน ุฑุณุงูุฉุ",
                options: ["<code>function hello() { console.log('H'); }</code> ูุงุณุชุฏุนุงุก <code>hello;</code>", "<code>function hello() { console.log('H'); }</code> ูุงุณุชุฏุนุงุก <code>hello();</code>", "<code>func hello: console.log('H');</code>", "<code>hello() => console.log('H')</code>"],
                answer: 1,
                explanation: "ูุฌุจ ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุจูุถุน ุงูุฃููุงุณ <code>()</code> ุจุนุฏ ุงุณููุง: <code>hello()</code>."
            },
            {
                question: "ูู ูุฑุฉ ุณูุชู ุทุจุงุนุฉ 'Loop'ุ\n<span class='code-snippet'>let count = 0;\nwhile (count < 4) {\n  console.log('Loop');\n  count = count + 2;\n}</span>",
                options: ["4 ูุฑุงุช", "ูุฑุชูู", "3 ูุฑุงุช", "ูุฑุฉ ูุงุญุฏุฉ"],
                answer: 1,
                explanation: "ุชุจุฏุฃ <code>count</code> ูู 0ุ ูุชุชูุฑุฑ ุนูุฏูุง ุชููู 0 ู 2. ุนูุฏูุง ุชุตู ูู 4 ูุชููู ุงูุดุฑุท (4 < 4 ุฎุงุทุฆ). ุฃู ูุฑุชูู."
            },
            {
                question: "ููุงุฐุง ูุณุชุฎุฏู ุงูุฏูุงู ุงููุฏูุฌุฉ (Built-in Functions) ูุซู <code>Math</code>ุ",
                options: ["ูุชุฌูุจ ูุชุงุจุฉ ุงูููุฏ ุจููุณูุง ููุธุงุฆู ุดุงุฆุนุฉ", "ูุฃููุง ุฃุจุทุฃ ูู ุงูุฏูุงู ุงูุนุงุฏูุฉ", "ูุฃููุง ุชุฌุนู ุงูููุฏ ุฃุทูู", "ูุฃูู ูุฌุจ ุนูููุง ุฏุงุฆูุงู ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุฐู ุงูุฏูุงู"],
                answer: 0,
                explanation: "ุชูุณุชุฎุฏู ูุชูููุฐ ูุธุงุฆู ุดุงุฆุนุฉ (ูุซู ุงูุนูููุงุช ุงูุฑูุงุถูุฉ) ุจููุงุกุฉ ุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ุงุฎุชุฑุงุน ุงูุนุฌูุฉ."
            },
            {
                question: "ูู ุชุนุฑูู ุงูุฏุงูุฉ <code>function greet(name)</code>ุ ูุงุฐุง ููุซู <code>name</code>ุ",
                options: ["ุงููููุฉ ุงููุฑุฌุนุฉ", "ุงูุฌุณู (Body) ููุฏุงูุฉ", "ุงูู Argument (ุงููุนุทู)", "ุงูู Parameter (ุงููุนุงูู) ููุฏุงูุฉ"],
                answer: 3,
                explanation: "ุงูู 'Parameter' ูู ุงูุงุณู ุงูุฐู ููุนุทู ูููุฏุฎู ุงููุทููุจ ุฃุซูุงุก ุชุนุฑูู ุงูุฏุงูุฉ."
            }
        ];

        const questionsDiv = document.getElementById("questions");
        let selectedAnswers = new Array(quizData.length).fill(null);

        // ุจูุงุก ุงูุฃุณุฆูุฉ (ูุง ุชุบููุฑ)
        quizData.forEach((q, i) => {
            const div = document.createElement("div");
            div.classList.add("question-block");
            div.id = `q-${i}`; 
            
            div.innerHTML = `
                <p class="question">${i + 1}. ${q.question}</p>
                ${q.options.map((opt, index) => `
                    <div class="option" data-q-index="${i}" data-opt-index="${index}" onclick="selectOption(${i}, ${index}, this)">${opt}</div>
                `).join('')}
                <div id="feedback-${i}" class="feedback"></div>
            `;
            questionsDiv.appendChild(div);
        });

        // ------------------------------------------------------------------------------------------------
        // ูุธุงุฆู ุงูุงุฎุชุจุงุฑ ูุงูุฅุฌุงุจุงุช ุงูููุฑูุฉ ูุงููุชุงุฆุฌ (ูุง ุชุบููุฑ)
        // ------------------------------------------------------------------------------------------------

        function selectOption(qIndex, optIndex, el) {
            const questionBlock = el.parentNode;
            const options = questionBlock.querySelectorAll(".option");
            const feedback = questionBlock.querySelector(`#feedback-${qIndex}`);
            const q = quizData[qIndex];

            options.forEach(opt => {
                opt.classList.remove('correct', 'wrong');
                opt.style.backgroundColor = "#f1f8e9";
            });

            selectedAnswers[qIndex] = optIndex;
            
            if (optIndex === q.answer) {
                el.classList.add('correct');
                feedback.innerHTML = `โ **ุตุญูุญ!** ${q.explanation}`;
                feedback.style.color = "#2e7d32";
            } else {
                el.classList.add('wrong');
                feedback.innerHTML = `โ **ุฎุทุฃ!** ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: <b>${q.options[q.answer]}</b> - ${q.explanation}`;
                feedback.style.color = "#c62828";
            }
        }

        function submitQuiz() {
            let score = 0;
            let total = quizData.length;
            let unanswered = 0;
            
            quizData.forEach((q, i) => {
                if (selectedAnswers[i] === null) {
                    unanswered++;
                } else if (selectedAnswers[i] === q.answer) {
                    score++;
                }
            });

            const resultDiv = document.getElementById("result");
            
            if (unanswered > 0) {
                resultDiv.innerHTML = `๐ซ ูู ุชุฌุจ ุนูู ${unanswered} ุณุคุงู. `;
            } else {
                resultDiv.innerHTML = "";
            }

            if (score === total) {
                resultDiv.innerHTML += `๐ ููุชุงุฒ ูุง ูุจุฑูุฌ ุงููุณุชูุจู! ุฌุจุช <b>${score}</b> ูู <b>${total}</b> โ`;
            } else if (score >= total * 0.7) {
                resultDiv.innerHTML += `๐ ูุชูุฌุชู ุฑุงุฆุนุฉ! ุฌุจุช <b>${score}</b> ูู <b>${total}</b>ุ ุดููุฉ ูุฑุงุฌุนุฉ ุจุณูุทุฉ. ๐ช`;
            } else if (score >= total / 2) {
                resultDiv.innerHTML += `๐ ูุชูุฌุชู ุฌูุฏุฉ! ุฌุจุช <b>${score}</b> ูู <b>${total}</b>ุ ุฑุงุฌุน ุงูุฃุฌุฒุงุก ุงููู ุฃุฎุทุฃุช ูููุง.`;
            } else {
                resultDiv.innerHTML += `๐ค ูุญุชุงุฌ ูุฑุงุฌุนุฉ ุจุณูุทุฉุ ุฌุจุช <b>${score}</b> ูู <b>${total}</b>. ูุง ุชูุฃุณุ ูุฑุฑ ุงููุญุงููุฉ!`;
            }
        }

        function showCorrectAnswers() {
            quizData.forEach((q, i) => {
                const questionBlock = document.getElementById(`q-${i}`);
                const options = questionBlock.querySelectorAll(".option"); 
                const feedback = questionBlock.querySelector(`#feedback-${i}`);

                options.forEach(opt => {
                    opt.classList.remove('correct', 'wrong');
                    opt.style.backgroundColor = "#f1f8e9";
                });

                options[q.answer].classList.add('correct');
                feedback.innerHTML = `โ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: <b>${q.options[q.answer]}</b> - ${q.explanation}`;
                feedback.style.color = "#2e7d32";
            });
            document.getElementById("result").innerHTML = "ุชู ุชุธููู ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ. ุฑุงุฌุน ุงูุดุฑุญ ูู ูู ุณุคุงู.";
        }

        // ------------------------------------------------------------------------------------------------
        // ูุธุงุฆู ุชูููุฐ ูุงุฎุชุจุงุฑ ุงููุดุงุฑูุน ุงูุชุทุจูููุฉ (ููุนุฏูููุฉ ููุฏุฑุณ ุงูุฑุงุจุน)
        // ------------------------------------------------------------------------------------------------

        function executeAndCapture(codeStr){
            const logs = [];
            const origConsole = window.console.log; 
            const timeoutDuration = 3000; // ุญูุงูุฉ ูู Infinite Loop

            window.console.log = function(...args){
                const line = args.map(a=>{
                    if (typeof a === 'object' && a !== null) {
                        try { return JSON.stringify(a); } catch(e){ return String(a); } 
                    }
                    return String(a);
                }).join(' ');
                logs.push(line);
                try { origConsole.apply(window.console, args); } catch(e){}
            };

            let error = null;
            let startTime = Date.now(); 
            try {
                const codeToExecute = `'use strict';\n${codeStr}`;
                const fn = new Function(codeToExecute);
                
                let isTimeout = false;
                const runLoop = setTimeout(() => {
                    isTimeout = true;
                    throw new Error("Execution timed out (Possible Infinite Loop).");
                }, timeoutDuration);

                fn();

                clearTimeout(runLoop); 

                if (Date.now() - startTime > timeoutDuration || isTimeout) {
                    error = { msg: "Execution timed out (Possible Infinite Loop)." };
                    logs.length = 0; 
                }

            } catch (err) {
                let msg = err && err.message ? err.message : String(err);
                msg = msg.replace(/\n/g,' ').replace(/\s+/g,' ').trim();
                error = { msg };
            } finally {
                window.console.log = origConsole;
            }
            return { logs, error };
        }


        function runProjectTest(projectNumber){
            const editor = document.getElementById(`project_editor_${projectNumber}`);
            const outputEl = document.getElementById(`project_output_${projectNumber}`);
            const code = editor.value || '';
            const cleanedCode = code.replace(/\/\*[\s\S]*?\*\//g, '').replace(/\/\/.*$/gm, '').trim();

            outputEl.classList.remove('success', 'error');
            outputEl.textContent = '... ุฌุงุฑู ุงูุชูููุฐ ูุงูุชุญูู ...';

            if (!cleanedCode) {
                outputEl.classList.add('error');
                outputEl.textContent = 'โ๏ธ ุงูุชุจ ุงูููุฏ ุฃููุงู.';
                return;
            }

            const studentRes = executeAndCapture(code);

            if (studentRes.error) {
                outputEl.classList.add('error');
                outputEl.textContent = `โ ุฎุทุฃ ูู ุงูููุฏ: ${studentRes.error.msg}`;
                return;
            }

            const studentOutput = studentRes.logs.join('\n').trim();

            // ------------------------------------
            // ููุทู ุงูุชุญูู ูููุดุฑูุน 1 (ุฏุงูุฉ ูุฌููุน ุงูุฃุฑูุงู)
            // ------------------------------------
            if (projectNumber === 1) {
                const testNumbers = [5, 10, 0, 1, 3]; // ุงููุชููุน: 15, 55, 0, 1, 6
                const expectedResults = [15, 55, 0, 1, 6];
                
                let allCorrect = true;
                let testOutput = '';

                // ูุญุต ุจููุฉ ุงูุฏุงูุฉ ูุงูุญููุฉ
                if (!/function\s+sumRange\s*\(\s*n\s*\)/i.test(cleanedCode) || !/for\s*\(.*\)/i.test(cleanedCode) || !/return/i.test(cleanedCode)) {
                    outputEl.classList.add('error');
                    outputEl.textContent = 'โ ุฎุทุฃ ูู ุงูุจููุฉ: ุชุฃูุฏ ูู ุชุนุฑูู ุงูุฏุงูุฉ function sumRange(n)ุ ูุงุณุชุฎุฏุงู ุญููุฉ forุ ููููุฉ return.';
                    return;
                }

                // ุชูููุฐ ููุฏ ุงูุทุงูุจ ูุน ุงูุฃุฑูุงู ุงูุชุฌุฑูุจูุฉ
                for(let i=0; i < testNumbers.length; i++){
                    const n = testNumbers[i];
                    const expected = String(expectedResults[i]);
                    // ูุณุชุฎุฏู ููุฏ ุงูุทุงูุจ ูุน ุงุณุชุฏุนุงุก ุตุฑูุญ ููุฏุงูุฉ ููุญุตูู ุนูู ุงููุชูุฌุฉ
                    const testCode = cleanedCode + `\nconsole.log(sumRange(${n}));`; 
                    
                    let res = executeAndCapture(testCode);
                    let result = (res.logs || []).map(l => l.trim()).filter(l => l !== '').pop() || ''; // ูุงุฎุฏ ุขุฎุฑ ูุชูุฌุฉ ุทุจุงุนุฉ
                    
                    if (result !== expected) {
                        allCorrect = false;
                        testOutput += `โ ูุดู ุงูุงุฎุชุจุงุฑ: ุงูุฑูู ${n}. ุงููุชููุน: "${expected}". ุงููุงุชุฌ: "${result || '(ูุง ุดูุก)'}"\n`;
                    } else {
                        testOutput += `โ ูุฌุญ ุงูุงุฎุชุจุงุฑ: ุงูุฑูู ${n}. ุงููุงุชุฌ: "${result}"\n`;
                    }
                }

                if (allCorrect) {
                    outputEl.classList.add('success');
                    outputEl.textContent = `โ ููุชุงุฒ! ุงูุฏุงูุฉ ุชุนูู ุจุดูู ุตุญูุญ ูุญุณุงุจ ูุฌููุน ุงูุฃุฑูุงู.\n\n${testOutput}`;
                } else {
                    outputEl.classList.add('error');
                    outputEl.textContent = `โ ุงูุฏุงูุฉ ูู ุชุนุฏ ุงููููุฉ ุงูุตุญูุญุฉ ูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช. ุฑุงุฌุน ููุทู ุญููุฉ for ูุงููุฌููุน.\n\n${testOutput}`;
                }
            } 
            
            // ------------------------------------
            // ููุทู ุงูุชุญูู ูููุดุฑูุน 2 (ุฏุงูุฉ Math.max)
            // ------------------------------------
            else if (projectNumber === 2) {
                const testCases = [
                    [15, 80, 42, "80"], 
                    [100, 10, 5, "100"], 
                    [1, 5, 20, "20"],
                    [-1, -5, -2, "-1"],
                    [7, 7, 7, "7"]
                ];

                let allCorrect = true;
                let testOutput = '';

                // ูุญุต ุจููุฉ ุงูุฏุงูุฉ ูุงุณุชุฎุฏุงู Math.max
                if (!/function\s+findMax\s*\(\s*a\s*,\s*b\s*,\s*c\s*\)/i.test(cleanedCode) || !/Math\.max/i.test(cleanedCode) || !/return/i.test(cleanedCode)) {
                    outputEl.classList.add('error');
                    outputEl.textContent = 'โ ุฎุทุฃ ูู ุงูุจููุฉ: ุชุฃูุฏ ูู ุชุนุฑูู ุงูุฏุงูุฉ function findMax(a, b, c)ุ ูุงุณุชุฎุฏุงู Math.maxุ ููููุฉ return.';
                    return;
                }

                for (const [a, b, c, expected] of testCases) {
                    // ูุณุชุฎุฏู ููุฏ ุงูุทุงูุจ ูุน ุงุณุชุฏุนุงุก ุตุฑูุญ ููุฏุงูุฉ ููุญุตูู ุนูู ุงููุชูุฌุฉ
                    const testCode = cleanedCode + `\nconsole.log(findMax(${a}, ${b}, ${c}));`; 
                    
                    let res = executeAndCapture(testCode);
                    let result = (res.logs || []).map(l => l.trim()).filter(l => l !== '').pop() || ''; 

                    if (result !== expected) {
                        allCorrect = false;
                        testOutput += `โ ูุดู ุงูุงุฎุชุจุงุฑ (ุงูุฃุฑูุงู: ${a}, ${b}, ${c}). ุงููุชููุน: "${expected}". ุงููุงุชุฌ: "${result || '(ูุง ุดูุก)'}"\n`;
                    } else {
                        testOutput += `โ ูุฌุญ ุงูุงุฎุชุจุงุฑ (ุงูุฃุฑูุงู: ${a}, ${b}, ${c}). ุงููุงุชุฌ: "${result}"\n`;
                    }
                }

                if (allCorrect) {
                    outputEl.classList.add('success');
                    outputEl.textContent = `โ ููุชุงุฒ! ุชู ุงุณุชุฎุฏุงู ุฏุงูุฉ Math.max ุจุดูู ุตุญูุญ.\n\n${testOutput}`;
                } else {
                    outputEl.classList.add('error');
                    outputEl.textContent = `โ ุงูุฏุงูุฉ ูู ุชุนุฏ ุงููููุฉ ุงูุฃูุจุฑ ุจุดูู ุตุญูุญ. ุฑุงุฌุน ุทุฑููุฉ ุงุณุชุฎุฏุงู Math.max ู return.\n\n${testOutput}`;
                }
            }
        }
    </script>

</body>
</html>