<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
ย <meta charset="utf-8" />
ย <meta name="viewport" content="width=device-width,initial-scale=1" />
ย <title>ุงูุฏุฑุณ ุงูุฑุงุจุน - ุงูุนูููุงุช ุงูุชูุฑุงุฑูุฉ (for) ูุงูุฏูุงู (Functions)</title>
ย <style>
    /* ุณุชุงูู ูุทุงุจู ููุญุณูู - ุชู ุชุฏูููู ูุชุตุญูุญู ูู ุงูุฃุฎุทุงุก ูุงูุชุญุฐูุฑุงุช ุงูุดุงุฆุนุฉ */
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
    
    :root{
      --primary:#00796b;
      --green1:#009688;
      --green2:#26a69a;
      --bg1: #f9f9f9;
      --bg2: #e0f7fa;
      --card:#fff;
      --code-bg:#f1f8e9;
      --accent:#ffe227;
      /* ูุชุบูุฑ ุฌุฏูุฏ ูุณุฑุนุฉ ุงูุงูุชูุงู */
      --transition-speed: 0.3s; 
    }
    
    *{
        box-sizing:border-box;
        /* ุชุทุจูู ุงูุงูุชูุงู ุงูุชููุงุฆู ุนูู ูู ุดูุก ุชูุฑูุจูุง */
        transition: background-color var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed), border var(--transition-speed);
    } 

    body{
      font-family:'Cairo',sans-serif;
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      color:#222;
      margin:0;
      padding:20px;
      /* ุชุญุณูู ุงูุชูุงูููุฉ */
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ุฎุทูุท ูุนูุงููู ุฃุซูู ูุฃูุซุฑ ุธููุฑูุง */
    h1{color:var(--primary); text-align:center; font-size:2rem; margin-bottom:8px; font-weight:900;}
    h3{color:var(--green1); margin:16px 0; font-weight:800;}
    h4{margin:10px 0; font-weight:800;}

    /* ุชุฃุซูุฑุงุช ุงูุชูุงุนู ุนูู ุงูุตูุฏูู ุงูุฑุฆูุณู */
    .content{
      max-width:980px; 
      margin:12px auto; 
      background:var(--card); 
      padding:24px; 
      border-radius:14px;
      box-shadow:0 6px 24px rgba(0,0,0,0.08); 
      text-align:right;
      /* ุฅุถุงูุฉ ุชูุงุนู ุฎููู ุนูุฏ ูุฑูุฑ ุงููุงูุณ ุนูู ูุญุชูู ุงูุตูุญุฉ */
      border: 1px solid transparent; 
    }
    .content:hover {
        box-shadow: 0 10px 30px rgba(0,0,0,0.12); /* ุธู ุฃุซูู ููููุงู */
        border: 1px solid var(--green2); /* ุฎุท ุฎููู ุญูู ุงูุตูุฏูู */
    }

    .lead{color:#333; line-height:1.8; margin-bottom:12px; font-weight:700;}
    .explain{color:#333; line-height:1.6; margin-bottom:8px; font-weight:600;}
    
    /* ุชูุงุนู ุตูุฏูู ุงูููุงุญุธุงุช */
    .note{
      background:#fff3cd; 
      color:#856404; 
      padding:12px; 
      border-radius:8px; 
      margin:12px 0; 
      font-weight:700;
      cursor: default; /* ูุชูุถูุญ ุฃูู ููุณ ุฒุฑูุง */
    }
    .note:hover {
        box-shadow: 0 2px 8px rgba(0,0,0,0.05); /* ุธู ุจุณูุท ุนูุฏ ุงููุฑูุฑ */
    }

    hr{border:none;border-top:1px solid #eee;margin:26px 0;} 
    
    /* ุชูุงุนู ุตูุฏูู ุนุฑุถ ุงูููุฏ */
    pre.display-code{
      background:var(--code-bg); 
      border:2px solid var(--green1); 
      padding:12px; 
      border-radius:10px;
      font-family: "Courier New", monospace; 
      direction:ltr; 
      text-align:left; 
      white-space:pre-wrap; 
      margin:8px 0;
      font-weight:700;
    }
    pre.display-code:hover {
        border-color: var(--primary); /* ุชุบููุฑ ููู ุงูุญุฏูุฏ ุนูุฏ ุงููุฑูุฑ */
        background-color: #f5fdee; /* ุชุบููุฑ ุจุณูุท ูู ุงูุฎูููุฉ */
    }

    textarea.editor{
      width:100%; 
      min-height:130px; 
      font-family:monospace; 
      font-size:15px; 
      direction:ltr; 
      text-align:left;
      border-radius:10px; 
      padding:12px; 
      border:2px solid #d6eae6; 
      background:#fff; 
      resize:vertical;
    }
    
    .controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;}
    
    /* ุชูุงุนู ุงูุฃุฒุฑุงุฑ ุงููุญุณูู */
    .btn{
      background:linear-gradient(90deg,var(--green1),var(--green2)); 
      color:#fff; 
      border:none; 
      padding:10px 16px;
      border-radius:12px; 
      cursor:pointer; 
      font-weight:800; 
      transition:all var(--transition-speed); 
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    .btn:hover{
        transform:translateY(-2px); /* ุฑูุนุฉ ุจุณูุทุฉ */
        box-shadow:0 8px 18px rgba(0,0,0,0.15); /* ุธู ุฃูุจุฑ */
    } 
    .btn:active{
        transform:translateY(0px); /* ุถุบุทุฉ ููุฏุงุฎู */
        box-shadow:0 2px 8px rgba(0,0,0,0.15); 
    }

    .btn.ghost{
        background:#fff; 
        color:var(--green1); 
        border:2px solid var(--green2); 
        font-weight:800;
    } 
    .btn.ghost:hover{
        background: var(--bg2); /* ุชุธููู ุฎููู ููุฎูููุฉ */
        color: var(--primary);
    }

    .output{
      margin-top:10px; 
      background:#e0f7fa; 
      padding:12px; 
      border-radius:8px; 
      font-family:monospace; 
      direction:ltr; 
      text-align:left; 
      white-space:pre-wrap; 
      min-height:48px; 
      color:#004d40; 
      font-weight:700;
    }
    .output.error{background:#fff0f0;color:#a00;} 
    
    .solution{
      margin-top:8px; 
      background:#fff6e6; 
      padding:10px; 
      border-radius:8px; 
      font-family:monospace; 
      direction:ltr; 
      text-align:left; 
      white-space:pre-wrap; 
      display:none; 
      font-weight:700;
    }
    
    /* ุชูุงุนู ุตูุฏูู ุงูููุฎุต */
    .summary{
      background:#f7fff7; 
      border:1px solid #d1f5d1; 
      padding:14px; 
      border-radius:10px; 
      text-align:right; 
      margin-top:16px; 
      font-weight:700;
    }
    .summary:hover {
        background: #f0fff0; /* ุชุบููุฑ ุฎููู ุนูุฏ ุงููุฑูุฑ */
    }

    .navs{display:flex; gap:10px; justify-content:center; margin-top:16px; flex-wrap:wrap;}
    .footer{text-align:center; margin-top:18px; color:#555; font-weight:700;}
    .small{padding:8px 10px; font-size:14px;}
    
    /* responsive */
    @media(max-width:720px){
      .controls{flex-direction:column;} 
    }
    
    /* ุณุชุงูู ุชุธููู ุงูุฎุทุฃ */
    .highlight-error { 
        background: rgba(255, 0, 0, 0.08) !important; 
        outline: 2px solid rgba(255,0,0,0.18); 
    }
</style>
</head>
<body>
    <div class="container">
        <h1>๐ ุงูุฏุฑุณ ุงูุฑุงุจุน: ุงูุนูููุงุช ุงูุชูุฑุงุฑูุฉ (for Loop) ูุงูุฏูุงู (Functions)</h1>

        <div class="content">
            <p class="lead">ุงูุฏุฑุณ ุฏู ูู ุงููู ููุฎููู ุจุฑูุฌุฑุงูุฑ ุชููู ุจุฌุฏ. ุชุฎูู ุฅูู ุดุบุงู ูู ุจูู ููุทููุจ ููู ุชุญุณุจ ููุงูุฏ 1000 ุนูููุ ุฃู ุชุทุจุน 500 ูุงุชูุฑุฉ. ูุชูุชุจ ุงูููุฏ ุฏู 1000 ูุฑุฉุ ุทุจุนูุง ูุฃ! ููุง ุจุชูุฌู ููุฉ ุงูู **Loops** ุนุดุงู ุชูุฑุฑ ุงูุดุบู ุฏู ุฃูุชููุงุชูู ุจุฃูู ุนุฏุฏ ุณุทูุฑ. ูููุงู ููุชุนูู ุฅุฒุงู ูุนูู ุฃุฏูุงุช ุฎุงุตุฉ ุจููุง (Functions) ุนุดุงู ูุณุชุฎุฏููุง ูุฐุง ูุฑุฉ ูู ุบูุฑ ูุง ููุฑุฑ ุงููุชุงุจุฉ.</p>

            <div class="note">ุงูุญููุงุช ุงูุชูุฑุงุฑูุฉ (Loops) ูุงูุฏูุงู (Functions) ููุง ุงูุนููุฏ ุงูููุฑู ูุฃู ูุดุฑูุน ุจุฑูุฌูุ ุจูุฎููุง ุงูููุฏ ุจุชุงุนู **ูุงุดู** (ูุฎุชุตุฑ) ู **ูุฑู** (ุณูู ุงูุชุนุฏูู).</div>

            <hr>
            <h3>1) ุงูุนูููุงุช ุงูุชูุฑุงุฑูุฉ ูุญููุฉ `for`</h3>

            <p class="explain">
                ุงูู **Loops** ุฏู ุฒู ูุง ุชููู ุจุชุฏู ููุฌุงูุง ุณูุฑูุจุช ูุฑูุฉ ููุงู ูุจุชููููุง: "ูุฑุฑู ุงูููุงู ุฏู ูุญุฏ ูุง ุงูุดุฑุท ุฏู ูุจุทู ูุชุญูู". ุฏู ุจูููุฑ ููุช ูุฌูุฏ ุฎุฑุงูู ูู ุงูููุฏ. **ูููุชูุง ุงูุฃุณุงุณูุฉ**: ุชูููุฑ ููุงููู ุงูุณุทูุฑ ูู ุงูููุฏ ุงููู ุจูุชูุฑุฑูุง.
                
                <br><br>


            </p>

            <h4>ุฃ) ูุซุงู 1: ุชูููุฑ ุงูููุฏ ูุน `for` (ุงูุฑุบู ุงูุชูุตููู)</h4>
            <p class="explain">
                ุชุฎูู ุฅูู ุจุชุนูู ูููุฉ ุณุฑูุนุฉ. ุจุฏู ูุง ุชููู "ุญุท ุณูุฑุ ูููุจ" ุนุดุฑ ูุฑุงุชุ ุจุชููู: "ูุฑุฑ ุนูููุฉ ุงูุชูููุจ 10 ูุฑุงุช". ุงูู `for` ุจุชุนูู ุจุงูุธุจุท ูุฏู: ุจุชูุฑุฑ ุฃูุงูุฑ ูุนููุฉ. ููุง ุจุฏู ูุง ููุชุจ <code>console.log("silk");</code> ุนุดุฑ ูุฑุงุชุ ูุชุจูุงูุง ูุฑุฉ ูุงุญุฏุฉ ูุญุทููุงูุง ูู ููุจ ุงูู Loop ุงููู ูุฑุฑูุชูุง ุฃูุชููุงุชูู.
            </p>
            
            <pre class="display-code">// ุงูููุฏ ุงูุทููู ูุงูุชูููุฏู
// console.log("silk");
// ... 9 ูุฑุงุช ููุงู

// ุงูููุฏ ุงููุฎุชุตุฑ ุจุงุณุชุฎุฏุงู for:
for (let count = 0; count < 10; count = count + 1) {
  console.log("silk");
} // ูุชููุน: ุทุจุงุนุฉ "silk" 10 ูุฑุงุช
</pre>

            <label>ุงูุชุจ ุงูููุฏ ุงููู ูุทุจุน "silk" 10 ูุฑุงุช ุจุงุณุชุฎุฏุงู ุญููุฉ for:</label>
            <textarea id="editor_1a" class="editor">for (let count = 0; count < 10; count = count + 1) {
  console.log("silk");
}</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_1a','out_1a','ref_1a','sol_1a')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_1a', 'sol_1a', 'ref_1a')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_1a" class="output"></div>
            <pre id="sol_1a" class="solution">// ููุง ุณูุธูุฑ ุงูุญู (ุณูุงุก ููุฏู ุฃู ุงูููุฏ ุงููุฑุฌุนู) ุจุนุฏ ุงูุชุดุบูู</pre>

            <h4>ุจ) ูุซุงู 2: ุจููุฉ ุฌููุฉ `for` (ุงูุชุฑููุจุฉ ุงูุฃุณุงุณูุฉ ูุณุจุจ ุงุณุชุฎุฏุงููุง)</h4>
            <p class="explain">
                ุงูู `for` ุจุชุชูุณู ูู 3 ุฃุฌุฒุงุก ุฑุฆูุณูุฉ ูููุฉุ ุฒู ููุงููู ุงููุฑูุฑ ุนุดุงู ุงูุนุฑุจูุฉ ูุชุชููุด. ูู ุฃู ุฌุฒุก ูู ุฏูู ูุงูุต ุฃู ุบูุทุ ุงูุนุฑุจูุฉ ูููู ูุชุชุญุฑูุด ุฃู ุชุนูู ุญุงุฏุซุฉ (Infinite Loop)!
                <ol>
                    <li>**ููุทุฉ ุงูุจุฏุงูุฉ (Initialization):** (<code>let count = 0</code>) **ุงูุชูุตูู:** ููุง ุจูุนุฑูู ูุชุบูุฑ (ุบุงูุจูุง ุงุณูู `i` ุฃู `count`) ูุจูุฏูู ุฃูู ูููุฉ ูุจุฏุฃ ุงูุนุฏ ูููุง. ุงููุชุบูุฑ ุฏู ุจูููู ููุฌูุฏ **ุฌูู ุงูู Loop ุจุณ**.</li>
                    <li>**ุดุฑุท ุงูุชููู (Condition):** (<code>count < 10</code>) **ุงูุชูุตูู:** ุฃูู ุฌุฒุก. ูุจู ูู ููุฉุ ุงูุฌุงูุง ุณูุฑูุจุช ุจุชุณุฃู: "ูู ุงูุดุฑุท ุฏู ูุณุฉ ุญููููุ" ูู ุงูุฅุฌุงุจุฉ "ุขู"ุ ุงูููุฏ ุงููู ุฌูู ุงูููุณูู <code>{}</code> ุจูุชููุฐ. ูู ุงูุฅุฌุงุจุฉ "ูุฃ"ุ ุจูููู ุงูู Loop ูุจูููู ุจุงูู ุงูููุฏ.</li>
                    <li>**ุฎุทูุฉ ุงูุชูุฏูู (Increment/Decrement):** (<code>count = count + 1</code>) **ุงูุชูุตูู:** ุฏู ุงููู ุจุชุฎูููุง ูุชุญุฑู ุฎุทูุฉ ููุฏุงู ุนุดุงู ููุตู ูููุงูุฉ ุงูู Loop. ูู ูููุด ุฎุทูุฉ ุชูุฏูุ ุงูุดุฑุท ูููุถู ุทูู ุนูุฑู ุญูููู ูููุฏุฎู ูู **Infinite Loop**.</li>
                </ol>
                <span style="font-weight: bold; color: #a00;">**ููุญูุธุฉ:** ูุงุฒู ุชูุตู ุจูู ุงูุฃุฌุฒุงุก ุฏู ุจูุงุตูุฉ ููููุทุฉ (<code>;</code>) ูุด ูุงุตูุฉ ุนุงุฏูุฉ.</span>
            </p>

            <pre class="display-code">// ุงููุฑุฌุน (ุดุฑุญ ุจููุฉ ุงูุญููุฉ)
for (let count = 0; count < 10; count = count + 1) {
  console.log("campus");
} // ูุชููุน: ุทุจุงุนุฉ "campus" 10 ูุฑุงุช
</pre>
            <textarea id="editor_1b" class="editor">for (let count = 0; count < 10; count = count + 1) {
  console.log("campus");
}</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_1b','out_1b','ref_1b','sol_1b')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_1b', 'sol_1b', 'ref_1b')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_1b" class="output"></div>
            <pre id="sol_1b" class="solution">// ููุง ุณูุธูุฑ ุงูุญู (ุณูุงุก ููุฏู ุฃู ุงูููุฏ ุงููุฑุฌุนู) ุจุนุฏ ุงูุชุดุบูู</pre>

            <h4>ุฌ) ูุซุงู 3: ุงุฎุชุตุงุฑ ุนุงูู ุงูุฒูุงุฏุฉ (`++`) - ุชุญููู ุงูุฃููุฑ ุชุงูู</h4>
            <p class="explain">
                ุงููุจุฑูุฌูู ุจูุญุจูุง ุงูุงุฎุชุตุงุฑุงุชุ ุนุดุงู ูุฏู ุงูู <code>count = count + 1</code> ูููู ุชุฎุชุตุฑูุง ุจู <code>count++</code> ุฃู <code>i++</code>. ุงูุฑูุฒูู ุฏูู ุจูููููุง ููููุจููุชุฑ: "ุฒูุฏ ุนูู ุงููููุฉ ุงูุญุงููุฉ ูุงุญุฏ ุฒูุงุฏุฉ ุจุณ". **ุงูุฑุบู:** ุชุฎูู ุฅูู ูู ุจูู ูุจุชุฒูุฏ ููุทุฉ ููุงุก ูุงุญุฏุฉ ููู ุนููู ุนูู ุนูููุฉ ุดุฑุงุก. ูุชุณุชุฎุฏู ุงูู `++` ูุชุญุฏูุซ ุนุฏุฏ ููุงุท ุงูููุงุก ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุนุฏ ูู ุนูููุฉ.
            </p>

            <pre class="display-code">// ุงููุฑุฌุน (ุงุณุชุฎุฏุงู ุงูุงุฎุชุตุงุฑ ++)
for (let i = 1; i <= 6; i++) {
  console.log("Count is " + i);
} // ูุชููุน: Count is 1, Count is 2, ..., Count is 6
</pre>
            <label>ุงูุชุจ ุญููุฉ for ุชุจุฏุฃ ูู 1 ูุชูุชูู ุนูุฏ 6ุ ูุณุชุฎุฏููุง ุงูุงุฎุชุตุงุฑ `i++`.</label>
            <textarea id="editor_1c" class="editor">for (let i = 1; i <= 6; i++) {
  console.log("Count is " + i);
}</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_1c','out_1c','ref_1c','sol_1c')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_1c', 'sol_1c', 'ref_1c')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_1c" class="output"></div>
            <pre id="sol_1c" class="solution">// ุงููุฑุฌุน: for (let i = 1; i <= 6; i++) { console.log("Count is " + i); }</pre>

            <h4>ุฏ) ูุซุงู 4: ุดุฑุญ ุนูู ุงูุญููุฉ ุฎุทูุฉ ุจุฎุทูุฉ (ุชุญููู ุฏููู)</h4>
            <p class="explain">
                ุนุดุงู ุชููู ุงูู Loop ุตุญุ ูุงุฒู ุชุดูููุง ูุฃููุง ุนูููุฉ ุญุณุงุจูุฉ ุจุชุญุตู ุนูู ูุฑุงุญู. **ุงูุฑุบู:** ุฏุงููุงู ุฑูุฒ ูู ุงูุดุฑุท (<code>i < 3</code>). ุทุงููุง ุงูุฑูู ุจููุตู ูู 3ุ ุงูุดุฑุท ุจูุจูู "ุฎุงุทุฆ" (False) ูุชูู ุงูุญููุฉ ููุฑูุงุ ุญุชู ูู ูุงู ุงูููุฏ ูุณู ููุชููุฐ.
                <ol>
                    <li>**ุงูููุฉ 1 (i=1):** ุงูุดุฑุท <code>1 < 3</code> (ุตุญูุญ) -> ุงุทุจุน. i ุชุตุจุญ 2.</li>
                    <li>**ุงูููุฉ 2 (i=2):** ุงูุดุฑุท <code>2 < 3</code> (ุตุญูุญ) -> ุงุทุจุน. i ุชุตุจุญ 3.</li>
                    <li>**ุงูููุฉ 3 (i=3):** ุงูุดุฑุท <code>3 < 3</code> (ุฎุงุทุฆ) -> **ุชููู ุงูุญููุฉ.**</li>
                </ol>
                ุฏู ููุถุญ ููู ุงูู Loop ุฏู ุจุชุดุชุบู ูุฑุชูู ุจุณ ุจุงูุฑุบู ูู ุฅู ุงูุดุฑุท ููู ุฑูู 3!
            </p>
            <pre class="display-code">// ุงููุฑุฌุน (ุญููุฉ ุชุชูุฑุฑ ูุฑุชูู ููุท)
for (let i = 1; i < 3; i++) {
  console.log("Red lorry, yellow lorry");
} // ูุชููุน: ุทุจุงุนุฉ ุงูุนุจุงุฑุฉ ูุฑุชูู
</pre>
            <label>ุนุฏูู ุงูููุฏ ููุทุจุน ุงูุนุจุงุฑุฉ ุฎูุณ ูุฑุงุช (ูู 1 ุฅูู 5).</label>
            <textarea id="editor_1d" class="editor">for (let i = 1; i <= 5; i++) {
  console.log("Red lorry, yellow lorry");
}</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_1d','out_1d','ref_1d','sol_1d')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_1d', 'sol_1d', 'ref_1d')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_1d" class="output"></div>
            <pre id="sol_1d" class="solution">// ุงููุฑุฌุน: for (let i = 1; i <= 5; i++) { console.log("Red lorry, yellow lorry"); }</pre>


            <h4>ูู) ุชูุฑูู ุฅุถุงูู: ุงูุนุฏ ุงูุชูุงุฒูู (`j--`) - ุชุญููู ุงูุชูุงุตูู</h4>
            <p class="explain">
                ูููู ุชุนูู ุนุฏ ุชูุงุฒูู! ุจุฏู ูุง ุชุฒูุฏ ุงูุนุฏุงุฏ (<code>i++</code>)ุ ูููู ุชููุตู (<code>i--</code>). **ุงูุฑุบู:** ููุง ุจูุบููุฑ ุฌุฒุฃูู ููููู: **ุงูุจุฏุงูุฉ** (ูุจุฏุฃ ูู ุฑูู ูุจูุฑ ุฒู 5) ู **ุงูุดุฑุท** (ูุณุชูุฑ ุทุงููุง <code>j</code> ุฃูุจุฑ ูู ุฃู ูุณุงูู 1) ู **ุฎุทูุฉ ุงูุชูุฏู** (ูุณุชุฎุฏู <code>j--</code> ุนุดุงู ูููุต ูุงุญุฏ ูู ููุฉ).
            </p>
            <pre class="display-code">// ุงููุทููุจ: ุนุฏ ุชูุงุฒูู ูู 5 ูู 1
for (let j = 5; j >= 1; j--) {
  console.log(j);
} // ูุชููุน: 5, 4, 3, 2, 1
</pre>
            <label>ุงูุชุจ ุงูููุฏ ุงููู ูุนูู ุนุฏ ุชูุงุฒูู ูู 5 ูู 1 ุซู ูุทุจุน ูููุฉ "Go!" ุจุนุฏ ุงูู loop.</label>
            <textarea id="editor_1e" class="editor">for (let j = 5; j >= 1; j--) {
  console.log(j);
}
console.log("Go!");</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_1e','out_1e','ref_1e','sol_1e')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_1e', 'sol_1e', 'ref_1e')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_1e" class="output"></div>
            <pre id="sol_1e" class="solution">// ุงููุฑุฌุน: for (let j = 5; j >= 1; j--) { console.log(j); } console.log("Go!");</pre>
            <div class="security-note" style="background:#fff3cd; color:#856404; border:1px solid #ffeeba; padding:15px; border-radius:8px; margin-bottom:20px;">
        <h3>๐จ ุญูุงุฑ ุงููุงูุฑ ูุงูุจูู (ุงููุงูุน ุงูุฃููู):</h3>
        
        <p style="font-weight: bold; color: #a00;">๐ด ููุชูุนูุฉ ููุท: ูุง ุชุณุชุฎุฏู ูุฐู ุงููุนุฑูุฉ ูู ุฃู ุฃุนูุงู ุบูุฑ ูุงููููุฉ ุฃู ุถุงุฑุฉ!</p>

        <h4>1. ุงูุชูุฑุงุฑ ุงูููุฑุท (Loops) ูุณููุท ุงูุฃูุธูุฉ:</h4>
        <p>ุงูููู ุงูุฌูุฏ ูุญููุงุช ุงูุชูุฑุงุฑ (Loops) ุจูุณุงุนุฏู ุชููู ููู ุงูุฃูุธูุฉ ุจุชูุน. ุฏู ุจูุญุตู ูู ุณููุงุฑููููู ุฑุฆูุณููู:</p>
        
        <ul>
            <li>
                **ุชูุฑุงุฑ ุงููุงูุฑ (Brute Force/DoS):** ุงููุงูุฑ ุจูุณุชุฎุฏู ุฃุฏูุงุช ุจุฑูุฌูุฉ (ุชุนุชูุฏ ุนูู **Loops ูุง ููุงุฆูุฉ ูุณุฑูุนุฉ**) ูุฅุฑุณุงู **ุขูุงู ุทูุจุงุช ุงูุฏุฎูู** (ูุซู ูุญุงููุฉ ุชุณุฌูู ุงูุฏุฎูู ุจูููุงุช ูุฑูุฑ ูุฎุชููุฉ) ุฃู **ุขูุงู ุทูุจุงุช ุงูุณุญุจ ูู ุงูุจูู** ูู ุฌุฒุก ูู ุงูุซุงููุฉ.
                <br>
                **ุงููุชูุฌุฉ:** ุงููุธุงู (ุงูุณูุฑูุฑ) ุจูุฏุฎู ูู ุญููุฉ ุชูุฑุงุฑ ุถุฎูุฉ ูุบูุฑ ูุชููุนุฉ ููุฑุฏ ุนูู ูุฐู ุงูุทูุจุงุช. ุงูู CPU ูุงูุฐุงูุฑุฉ ูุด ุจููุฏุฑูุง ููุฑุฃูุง ููุนุงูุฌูุง ูู ูุฐุง ุงูุชูุฑุงุฑ ูู ููุช ูุงุญุฏุ ูู **ุงูุณูุณุชู ุจูุณูุท** ููุนุฌุฒ ุนู ุฎุฏูุฉ ุฃู ูุณุชุฎุฏู ุญูููู.
            </li>
            <li>
                **ุชูุฑุงุฑ ุงููุณุชุฎุฏููู (ุงูุถุบุท):** ููุง ูููู ูู ุญุฏุซ ููู (ุฒู ูุฒูู ูุฑุชุจุงุช ุฃู ุนุฑุถ ุชุฎููุถุงุช)ุ ุนุฏุฏ ุถุฎู ูู ุงููุณุชุฎุฏููู ุงูุญูููููู ุจูุนูููุง **ุนูููุฉ ุชูุฑุงุฑ** (ุณุญุจ ุฃู ุดุฑุงุก) ูู ููุช ูุงุญุฏ.
                <br>
                **ุงููุชูุฌุฉ:** ูู ุทูุจ ุณุญุจ ูู **Loop** ุตุบูุฑุฉ ุจุชุญุตู ุนูู ุงูุณูุฑูุฑ (ูุฑุงุฌุนุฉ ุฑุตูุฏุ ุฎุตู ุงููุจูุบุ ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช). ุชูุฑุงุฑ ุขูุงู ุงูุนูููุงุช ุฏู ูู ูุญุธุฉ ูุงุญุฏุฉ ุจูุคุฏู ูููุณ ุงููุชูุฌุฉ: **ุงูุณูุณุชู ุจูุชููู** ูุคูุชูุง ูุฃูู ุบูุฑ ูุงุฏุฑ ุนูู ูุนุงูุฌุฉ ูู ูุฐุง ุงูุชูุฑุงุฑ ุงูุถุฎู ุงููุชุฒุงูู.
            </li>
        </ul>

        <hr style="border-top: 1px solid #ffeeba;">

        <h4>2. ุงูุฏูุงู (Functions) ูุงูุฃูุงู ุงููุฑูุฒู:</h4>
        <p>ููู ุงุณุชุฎุฏุงู ุงูุฏูุงู (Functions) ูุนุชุจุฑ ููุทุฉ ููุฉ ูุถุนู ูู ููุณ ุงูููุชุ</p>
        <p>ุงูุฏุงูุฉ <code>calculateInterest(rate)</code> ุจุชุฌูุน ุดุบู ููููู ุณุทุฑ ูู ููุงู ูุงุญุฏ. ุฏู ูุฎูู ุงูููุฏ ูุธููุ ููู ูู ูุฏุฑ ูุงูุฑ ููุงูู ุซุบุฑุฉ ูู ุงูุฏุงูุฉ ุฏูุ ููุฏุฑ ููุงุฌู ุงููุธุงู ููู ูู **ููุงู ูุฑูุฒู ูุงุญุฏ**. ุฅุชูุงูู ููุชุงุจุฉ ุงูุฏูุงู ูุนูู ูุฏุฑุชู ุนูู **ุชุฃููู ูุฐู ุงูููุงุท ุงููุฑูุฒูุฉ** ุจุฐูุงุก ุดุฏูุฏ.</p>

        <hr style="border-top: 1px solid #ffeeba;">

        <p style="font-style: italic;">๐ก **ุงูุฑุจุท ุจููููุง:** ุงููุจุฑูุฌ ุงูุดุงุทุฑ ูู ุงููู ุจูุตูู ุฏูุงู (Functions) ูููุฉ ูุขููุฉ ุชุชุญูู ุงูุถุบุท ููููุงุช ุงูุชูุฑุงุฑ (Loops) ุงููุงุฆูุฉ ุงููู ูููู ุชุญุตู ุณูุงุก ูู ุงููุณุชุฎุฏููู ุฃู ูู ูุญุงููุงุช ุงููุฌูู.</p>
    </div>
            <div class="note" style="background:#f0e3ff; color:#5c1d91;">
                โ๏ธ **ุฃุฎุทุฑ ุบูุทุฉ:** ูู ูุณูุช ุฎุทูุฉ ุงูุชูุฏูู (<code>i++</code>)ุ ุงูููุจููุชุฑ ููุฏุฎู ูู "ุญููุฉ ูุง ููุงุฆูุฉ" (Infinite Loop)ุ ูุฏู ุจููููู ุงูุจุฑูุงูุฌ ุฃู ุงููุชุตูุญ. ุฎูู ุจุงูู ุฏุงูููุง ุฅู ุงูู Loop ูุงุฒู ุชูุชูู!
            </div>

            <hr>
            <h3>2) ุจูุงุก ุงูุฏูุงู ุงูุฎุงุตุฉ (Functions)</h3>

            <p class="explain">
                ุงูุฏุงูุฉ ูู ุฒู "ุขูุฉ ุณุญุฑูุฉ" ุจุชุนูู ุดุบู ูุนูู ููููู ุชุณุชุฎุฏููุง ูู ุฃู ููุงู ูู ุงูููุฏ. ุจุฏู ูุง ุชูุชุจ ุฎุทูุงุช ุตูุน ุงูููู ูู ูุฑุฉุ ุจุชุณูููุง "ุฏุงูุฉ ุตูุน ุงูููู" ูุชุณุชุฏุนููุง. ุฏู ุจูุฎูู ุงูููุฏ ููุธู ูุณูู ุงููุฑุงุกุฉ ูุงูุตูุงูุฉ. **ููุฒุชูุง:** ุชุฌูุจ ุชูุฑุงุฑ ุงูููุฏ (DRY - Don't Repeat Yourself).
            </p>

            <h4>ุฃ) ูุซุงู 5: ุฏุงูุฉ ุจุฏูู ูุนุงููุงุช ุฃู ุฅุฑุฌุงุน (ุชุญููู ูุนูู)</h4>
            <p class="explain">
                ุนุดุงู ุชุนูู ุฏุงูุฉุ ุจุชุณุชุฎุฏู ุงููููุฉ <code>function</code> ูุจุนุฏูุง ุงูุงุณู ุงููู ุชุฎุชุงุฑู (ููุถู ูููู ุงุณู ุจููุตู ุนูู ุงูุฏุงูุฉ)ุ ู ุจุนุฏูุง ุฃููุงุณ <code>()</code>. **ุงูุฑุบู:** ุงูุฏุงูุฉ ุฏู ุฒู "ุงูุฒุฑุงุฑ" ุงููู ุจุชุฏูุณ ุนููู ุนุดุงู ูุนูู ูููุฉ ุซุงุจุชุฉ (ุฒู ุฒุฑุงุฑ ูุชุญ ุงูุจุงุจ). ูู ูุด ุจุชุฃุฎุฏ ููู ุฃู ูุฏุฎูุงุช ุนุดุงู ุชุดุชุบูุ ูุจุชููุฐ ุงูุฃูุงูุฑ ุงููู ุฌูุงูุง ูุฎูุงุต.
            </p>
            <div class="code-analysis" style="background: #f7f7f7; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-right: 4px solid #5cb85c;">
                <h5 style="margin-top:0; color:#5cb85c;">ุชุญููู ุฏุงูุฉ `sayWelcome()` ุฎุทูุฉ ุจุฎุทูุฉ:</h5>
                <ol style="padding-right: 20px;">
                    <li><strong style="color:#28a745;">ุงูุชุนุฑูู:</strong> ุชุจุฏุฃ ุจู <code>function sayWelcome()</code>. ูุง ููุฌุฏ ูุนุงููุงุชุ ุฃู ูุง ููุฌุฏ ูุฏุฎูุงุช ูุทููุจุฉ.</li>
                    <li><strong style="color:#ff9800;">ุงูุชูููุฐ:</strong> ูุชู ุชูููุฐ ุงูุฃูุฑ ุงููุญูุฏ ุฏุงุฎููุง: <code>console.log("ุฃููุงู ูุณููุงู");</code>.</li>
                    <li><strong style="color:#dc3545;">ุงูุฅููุงุก:</strong> ุชูุชูู ุงูุฏุงูุฉ ุจุนุฏ ุชูููุฐ ุงูุฃูุฑุ **ููุง ุชูุฑุฌุน ุฃู ูููุฉ** (ูุฃููุง ูุง ุชุญุชูู ุนูู `return`).</li>
                    <li><strong style="color:#007bff;">ุงูุงุณุชุฏุนุงุก:</strong> ุนูุฏ ุงุณุชุฏุนุงุฆูุง (<code>sayWelcome();</code>)ุ ูุชู ุชูููุฐ ูุง ุจุฏุงุฎููุง ูุจุงุดุฑุฉ ูุทุจุงุนุชู ูู ุงูู Console.</li>
                </ol>
            </div>
            <pre class="display-code">// ุงููุฑุฌุน
function sayHello() {
  console.log("Hello, Programmer!");
}
sayHello(); // ุงุณุชุฏุนุงุก ุฃูู
sayHello(); // ุงุณุชุฏุนุงุก ุซุงูู
</pre>
            <label>ุงูุชุจ ุฏุงูุฉ ุงุณููุง `sayWelcome` ุจุชุทุจุน "ุฃููุงู ูุณููุงู" ุซู ุงุณุชุฏุนููุง ูุฑุชูู.</label>
            <textarea id="editor_2a" class="editor">function sayWelcome() {
  console.log("ุฃููุงู ูุณููุงู");
}
sayWelcome();
sayWelcome();</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_2a','out_2a','ref_2a','sol_2a')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_2a', 'sol_2a', 'ref_2a')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_2a" class="output"></div>
            <pre id="sol_2a" class="solution">// ุงููุฑุฌุน: function sayWelcome() { console.log("ุฃููุงู ูุณููุงู"); } sayWelcome(); sayWelcome();</pre>

            <h4>ุจ) ูุซุงู 6: ุฏุงูุฉ ูุน ูุนุงูู (Parameter) - ุชูุงุตูู ูุงูููุฉ ุงูุตุฑู</h4>
            <p class="explain">
                ูู ุงูุฏุงูุฉ ูุญุชุงุฌุฉ ูุนูููุฉ ุนุดุงู ุชุนูู ุดุบููุงุ ุจุชุญุท ุงููุนูููุฉ ุฏู ูู **ูุนุงูู (Parameter)** ุจูู ุงูููุณูู <code>()</code>. **ุงูุฑุบู:** ุงููุนุงูู ุฏู ูู ุงูู **Input** ุงููู ุจุชุฏุฎูู ููุขูุฉ ุนุดุงู ุชูุฏุฑ ุชุญุณุจ ุตุญ. ูู ูุซุงููุงุ ุงูุฏุงูุฉ ูุญุชุงุฌุฉ ุชุนุฑู ุงููููุฉ (<code>quantity</code>) ุนุดุงู ุชูุฏุฑ ุชุญุณุจ ุงูุณุนุฑ ุงูุฅุฌูุงูู ุตุญ. ุฏู ุจุชุฎูู ุงูุฏุงูุฉ ูุฑูุฉ ููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ูุน ุฃู ูููุฉ.
            </p>
            <div class="code-analysis" style="background: #f7f7f7; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-right: 4px solid #f0ad4e;">
                <h5 style="margin-top:0; color:#f0ad4e;">ุชุญููู ุฏุงูุฉ `calculatePrice(quantity)` ุฎุทูุฉ ุจุฎุทูุฉ:</h5>
                <ol style="padding-right: 20px;">
                    <li><strong style="color:#28a745;">ุงุณุชูุจุงู ุงููุนุงูู:</strong> ุชุณุชูุจู ุงูุฏุงูุฉ ูููุฉ `quantity` (ูุซู 10 ุฃู 3).</li>
                    <li><strong style="color:#ff9800;">ุงูุนูููุฉ:</strong> ูุชู ุญุณุงุจ `let price = quantity * 5;`. ูู ุญุงูุฉ 10ุ ุชููู ุงููุชูุฌุฉ 50.</li>
                    <li><strong style="color:#dc3545;">ุงูุนุฑุถ (Output):</strong> ูุชู ุนุฑุถ ุงููุชูุฌุฉ ูุจุงุดุฑุฉ ุจุงุณุชุฎุฏุงู <code>console.log()</code>.</li>
                    <li><strong style="color:#007bff;">ูุธููุฉ `return`ุ:</strong> ูุง ููุฌุฏ `return`ุ ูุฐุง ุงููุชูุฌุฉ (50) ุชูุนุฑุถ ููุท ููุง ูููู ุชุฎุฒูููุง ูู ูุชุบูุฑ ุขุฎุฑ ุฎุงุฑุฌ ุงูุฏุงูุฉ ุฃู ุฅุฌุฑุงุก ุนูููุฉ ุฃุฎุฑู ุนูููุง.</li>
                </ol>
            </div>
            <pre class="display-code">// ุงููุฑุฌุน
function greet(userName) { // userName ูู ุงููุนุงูู
  console.log("Welcome back, " + userName + ".");
}
greet("Ahmed"); // "Ahmed" ูู ุงููููุฉ ุงูููุฑุฑุฉ
greet("Sarah"); 
</pre>
            <label>ุงูุชุจ ุฏุงูุฉ ุงุณููุง `calculatePrice` ุชุณุชูุจู `quantity` (ุงููููุฉ) ูุชุทุจุน ุณุนุฑูุง (ุจุงูุชุฑุงุถ ุฃู ุงูุณุนุฑ ูู ุงููููุฉ * 5).</label>
            <textarea id="editor_2b" class="editor">function calculatePrice(quantity) {
  let price = quantity * 5;
  console.log("Total price is: " + price + " EGP");
}
calculatePrice(10);
calculatePrice(3);</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_2b','out_2b','ref_2b','sol_2b')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_2b', 'sol_2b', 'ref_2b')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_2b" class="output"></div>
            <pre id="sol_2b" class="solution">// ุงููุฑุฌุน: function calculatePrice(quantity) { let price = quantity * 5; console.log("Total price is: " + price + " EGP"); } calculatePrice(10); calculatePrice(3);</pre>

            <div class="return-focus">
                <h4>โญ ุชุฑููุฒ ุฎุงุต: ุฃูููุฉ ูููุฉ `return`</h4>
                <p>ูููุฉ <code>return</code> ูู ุฃูู ููุทุฉ ูู ุงูุฏุงูุฉ! ูู ุงููู ุจุชูุฑู ุจูู:</p>
                <ul>
                    <li>**1. ุฏุงูุฉ ูุชูููุฐ ูููุฉ (Task Runner):** ุฒู ุฏุงูุฉ <code>sayWelcome()</code>ุ ูููุชูุง ุงููุญูุฏุฉ ูู ุทุจุงุนุฉ ุฑุณุงูุฉ. ูู ูุด ุจุชุฑุฌุน ูููุฉุ ููุฐูู ูุด ุจูุญุชุงุฌ ูููุง <code>return</code>.</li>
                    <li>**2. ุฏุงูุฉ ูุญุณุงุจ ูุฅุฑุฌุงุน ูููุฉ (Calculator):** ุฒู ุฏุงูุฉ <code>multiply()</code>ุ ูููุชูุง ูู ุฅุฌุฑุงุก ุนูููุฉ ุญุณุงุจูุฉ (ุงูุถุฑุจ) ู **ุฅุฎุฑุงุฌ ุงููุงุชุฌ** ููู ุชุณุชุฎุฏูู ุจุงูู ุฃุฌุฒุงุก ุงูููุฏ.</li>
                </ul>
                <p style="font-weight: bold;">๐ ููู `return` ุถุฑูุฑูุฉุ</p>
                <ul>
                    <li>**ุฅุฎุฑุงุฌ ุงููุชูุฌุฉ:** ุจุฏูููุงุ ุงูุฏุงูุฉ ุชุญุณุจ ููู ูุง ุชูุนุทู ูุงุชุฌูุง ููุงุณุชุฎุฏุงู.</li>
                    <li>**ุฅููุงุก ุงูุชูููุฐ:** ุจูุฌุฑุฏ ุฃู ูุตู ุงูููุฏ ุฅูู ุณุทุฑ <code>return</code>ุ ุชุชููู ุงูุฏุงูุฉ ููุฑุงู ุนู ุงูุนููุ ุญุชู ูู ูุงู ููุงู ููุฏ ุขุฎุฑ ุจุนุฏูุง.</li>
                </ul>
                <p>๐ก **ููุญูุธุฉ:** ูู ูู ุชุณุชุฎุฏู `return` ูู ุฏุงูุฉ ูููุชุฑุถ ุฃู ุชูุฑุฌุน ูููุฉุ ูุฅู ุงูุฌุงูุง ุณูุฑูุจุช ุชูุฑุฌุน ูููุฉ ุงูุชุฑุงุถูุฉ ูู <code>undefined</code>. ููุฐุง ูู ุณุจุจ ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุชู ุธูุฑุช ูู ูู ุงูุจุฏุงูุฉ!</p>
            </div>
            <h4>ุฌ) ูุซุงู 7: ุงุณุชุฎุฏุงู `return` (ูููุฉ ุงูุฅุฑุฌุงุน) - ุฃูููุฉ ุงููุงุชุฌ</h4>
            <p class="explain">
                ูู ุงูุฏุงูุฉ ุจุชุนูู ุญุณุจุฉ ูุนููุฉุ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุจุชุทูุนูุง ุนู ุทุฑูู ูููุฉ <code>return</code>. ุงูู `return` ุจุชุนูู ุญุงุฌุชูู: ุจุชููู ุงูุฏุงูุฉ ูุจุชุทูุน ุงููููุฉ ุฏู ุนุดุงู ุชูุฏุฑ ุชุณุชุฎุฏููุง ูู ููุงู ุชุงูู ูู ุงูููุฏ ุจุชุงุนู ุฃู ุชุฎุฒููุง ูู ูุชุบูุฑ. **ุงูุฑุบู:** ุงูุฏุงูุฉ ุงููู ูููุง `return` ุจุชููู ุฒู "ุงูุขูุฉ ุงูุญุงุณุจุฉ". ุจุชุฏููุง ูุฏุฎูุงุชุ ููู ุจุชุฏูู ูุงุชุฌ ุฑูุงุถู ุชูุฏุฑ ุชููู ุจูู ุจุงูู ุดุบูู. ูู ูููุด `return`ุ ุงูุฏุงูุฉ ูุชุดุชุบู ููู ูุชุทูุน `undefined`!
            </p>
            <div class="code-analysis" style="background: #f7f7f7; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-right: 4px solid #007bff;">
                <h5 style="margin-top:0; color:#007bff;">ุชุญููู ุฏุงูุฉ `add(num1, num2)` ุฎุทูุฉ ุจุฎุทูุฉ:</h5>
                <ol style="padding-right: 20px;">
                    <li><strong style="color:#28a745;">ุงุณุชูุจุงู ุงููุฏุฎูุงุช:</strong> ุชุณุชูุจู ูููุชู `num1` ู `num2` (ูุซูุงู 5 ู 7).</li>
                    <li><strong style="color:#ff9800;">ุงูุนูููุฉ ูุงูุญุณุงุจ:</strong> ูุชู ุญุณุงุจ ูุงุชุฌ ุงูุฌูุน (5 + 7 = 12).</li>
                    <li><strong style="color:#dc3545;">ุงูุฅุฑุฌุงุน ุงูุญุงุณู: <code>return num1 + num2;</code></strong><br>
                        <span style="font-size: 0.9em;">- ูุชู ุฅุฎุฑุงุฌ ุงููููุฉ 12 ูู ุงูุฏุงูุฉ.<br>
                        - ุจุนุฏ `return 12`ุ ุชุชุญูู ุฌููุฉ ุงูุงุณุชุฏุนุงุก (<code>add(5, 7)</code>) ุฅูู ุงููููุฉ **12**.</span></li>
                    <li><strong style="color:#007bff;">ุงูุงุณุชุฎุฏุงู:</strong> ูููู ุชุฎุฒูู ุงููููุฉ ุงููุฑุฌุนุฉ (12) ูู ูุชุบูุฑ (<code>let sum = 12;</code>) ุฃู ุงุณุชุฎุฏุงููุง ูุจุงุดุฑุฉ (<code>console.log(13)</code>).</li>
                </ol>
            </div>
            <pre class="display-code">// ุงููุฑุฌุน (ุงูุฏุงูุฉ ุจุชุฑุฌุน ูุชูุฌุฉ ุจูุฎุฒููุง)
function add(num1, num2) {
  return num1 + num2;
}
let sum = add(5, 7); // ุงููุงุชุฌ 12 ุจูุชุฎุฒู ูู sum
console.log(sum);
console.log(add(10, 3)); // ุงููุงุชุฌ 13 ุจูุทุจุน ูุจุงุดุฑุฉ
</pre>
            <label>ุงูุชุจ ุฏุงูุฉ ุงุณููุง `multiply` ุชุถุฑุจ ุฑูููู ูุชุนูู `return` ูููุงุชุฌุ ุซู ุงุทุจุน ุงููุงุชุฌ ุจุนุฏ ุชุฎุฒููู ูู ูุชุบูุฑ.</label>
            <textarea id="editor_2c" class="editor">function multiply(a, b) {
  return a * b;
}
let product = multiply(4, 5);
console.log("ุงููุงุชุฌ ูู: " + product);</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_2c','out_2c','ref_2c','sol_2c')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_2c', 'sol_2c', 'ref_2c')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_2c" class="output"></div>
            <pre id="sol_2c" class="solution">// ุงููุฑุฌุน: function multiply(a, b) { return a * b; } let product = multiply(4, 5); console.log("ุงููุงุชุฌ ูู: " + product);</pre>

            <h4>ุฏ) ูุซุงู 8: ุชุทุจูู ุนููู - ุชุญุฏูุฏ ุงูุณุนุฑ ุงูุฃุฑุฎุต (ุฏูุฌ ุงูุฃููุงุฑ)</h4>
            <p class="explain">
                ููุง ุจูุฌูุน ุงููู ูุงุช ููู: ุฏุงูุฉ ุจุชุงุฎุฏ ุฑููููุ ูุจุชุณุชุฎุฏู ุฌููุฉ ุดุฑุทูุฉ (ุฒู ุงููู ุฎุฏูุงูุง ูู ุงูุฏุฑุณ ุงููู ูุงุช) ุนุดุงู ุชูุงุฑูุ ููู ุงูุขุฎุฑ ุจุชุนูู <code>return</code> ูููููุฉ ุงูุฃูู (ุงูุณุนุฑ ุงูุฃุฑุฎุต). **ุงูุฑุบู:** ุงูุฏุงูุฉ ุฏู ุจุชูุซู ุงูู Logic (ุงูููุทู) ุงูุฃุณุงุณู ุงููู ุจูุฎูู ุฃู ูููุน ุชุณูู ูุฎุชุงุฑ ุงูููุชุฌ ุงูุฃูุถู ูููุณุชุฎุฏู ุฃู ุฃู ุณูุณุชู ูุงูู ูุฎุชุงุฑ ุฃูุถู ุนุฑุถ ูุงุฆุฏุฉ.
            </p>
            <div class="code-analysis" style="background: #f7f7f7; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-right: 4px solid #d9534f;">
                <h5 style="margin-top:0; color:#d9534f;">ุชุญููู ุฏุงูุฉ `min2(num1, num2)` ุฎุทูุฉ ุจุฎุทูุฉ:</h5>
                <ol style="padding-right: 20px;">
                    <li><strong style="color:#28a745;">ุงุณุชูุจุงู ุงููุฏุฎูุงุช:</strong> ุชุณุชูุจู ุฑูููู (ูุซูุงู 20 ู 8).</li>
                    <li><strong style="color:#ff9800;">ุงูุดุฑุท ูุงูููุทู:</strong> ูุชู ูุญุต ุงูุดุฑุท: <code>(20 < 8)</code>. ุงูุดุฑุท **ุฎุงุทุฆ** (False).</li>
                    <li><strong style="color:#dc3545;">ุงูุชุฎุฒูู:</strong> ูุชู ุงูุงูุชูุงู ุฅูู ุฌุฒุก `else`ุ ูุชุฎุฒูู ุงูุฑูู ุงูุฃุตุบุฑ `num2` (ููู 8) ูู ุงููุชุบูุฑ `result`.</li>
                    <li><strong style="color:#007bff;">ุงูุฅุฑุฌุงุน:</strong> <code>return result;</code> ูุชู ุฅุฎุฑุงุฌ ุงููููุฉ 8 ูู ุงูุฏุงูุฉ.</li>
                </ol>
            </div>
            <pre class="display-code">// ุงููุฑุฌุน
function min2(num1, num2) {
  let result;
  if (num1 < num2) {
    result = num1;
  } else {
    result = num2;
  }
  return result;
}
console.log("ุงูุฃุตุบุฑ ุจูู 5 ู 10 ูู: " + min2(5, 10)); // ูุชููุน: 5
console.log("ุงูุฃุตุบุฑ ุจูู 20 ู 8 ูู: " + min2(20, 8)); // ูุชููุน: 8
</pre>
            <label>ุงูุชุจ ุงูููุฏ ุงููุฑุฌุนู ุซู ูู ุจุชุดุบููู.</label>
            <textarea id="editor_2d" class="editor">function min2(num1, num2) {
  let result;
  if (num1 < num2) {
    result = num1;
  } else {
    result = num2;
  }
  return result;
}
console.log("ุงูุฃุตุบุฑ ุจูู 5 ู 10 ูู: " + min2(5, 10));</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_2d','out_2d','ref_2d','sol_2d')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_2d', 'sol_2d', 'ref_2d')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_2d" class="output"></div>
            <pre id="sol_2d" class="solution">// ุงููุฑุฌุน: function min2(num1, num2) { let result; if (num1 < num2) { result = num1; } else { result = num2; } return result; } console.log("ุงูุฃุตุบุฑ ุจูู 5 ู 10 ูู: " + min2(5, 10)); console.log("ุงูุฃุตุบุฑ ุจูู 20 ู 8 ูู: " + min2(20, 8));</pre>

            <hr>
            <h3>3) ุงูุฏูุงู ุงููุฏูุฌุฉ (Built-in Functions) - ุฃุฏูุงุช ุฌุงูุฒุฉ ูู ุงููุตูุน</h3>

            <p class="explain">
                ุงูุฌุงูุง ุณูุฑูุจุช ุนูุฏูุง ุฏูุงู ูุชูุฑ ุฌุงูุฒุฉ ููุฌูุฒุฉ ุนุดุงู ุชุณูู ุนููู ุงูุดุบู. ูุด ูุงุฒู ุชุนูู ูู ุญุงุฌุฉ ุจููุณู! **ููุงุญุธุฉ:** ูู ุงูุฏูุงู ุงูุฑูุงุถูุฉ ุฏู ุจุชูุฌู ุชุญุช ุงููุงุฆู (Object) ุงููู ุงุณูู `Math`.
            </p>

            <h4>ุฃ) ูุซุงู 9: ุฏุงูุฉ ุงูุชูุฑูุจ `Math.round()` (ุงูุฑุบู ูู ุงูุชูุฑูุจ)</h4>
            <p class="explain">
                ุฏุงูุฉ <code>Math.round(value)</code> ุจุชูุฑุจ ุงูุฑูู ูุฃูุฑุจ ุนุฏุฏ ุตุญูุญ. **ุงูุฑุบู:** ุงูุชูุฑูุจ ุฏู ููู ุฌุฏูุง ูู ุงูุชุทุจููุงุช ุงููุงููุฉ (ุฒู ุงูุจููู) ุนุดุงู ููุจูุงุด ููู ูุณูุฑ ุตุบูุฑุฉ ุฌุฏูุง ูุฌูููุฉ ูู ุงูุญุณุงุจุงุช. ูู ุงููุณุฑ 0.5 ุฃู ุฃูุชุฑุ ุจุชูุฑูุจ ูููู. ูู ุฃูู ูู 0.5ุ ุจุชูุฑูุจ ูุชุญุช.
            </p>

            <pre class="display-code">// ุงููุฑุฌุน
console.log("4.4 ุชูุฑูุจูุง: " + Math.round(4.4));
console.log("4.6 ุชูุฑูุจูุง: " + Math.round(4.6));
console.log("4.5 ุชูุฑูุจูุง: " + Math.round(4.5)); // ูุชููุน: 4 ุซู 5 ุซู 5
</pre>
            <label>ุงูุชุจ ุงูููุฏ ุงููู ููุฑุจ ุงูุฃุฑูุงู ุฏู: 7.2 ู 7.8.</label>
            <textarea id="editor_3a" class="editor">console.log(Math.round(7.2));
console.log(Math.round(7.8));</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_3a','out_3a','ref_3a','sol_3a')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_3a', 'sol_3a', 'ref_3a')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_3a" class="output"></div>
            <pre id="sol_3a" class="solution">// ุงููุฑุฌุน: console.log(Math.round(7.2)); console.log(Math.round(7.8));</pre>

            <h4>ุจ) ูุซุงู 10: ุฏุงูุฉ ุงููููุฉ ุงูุนุธูู `Math.max()` (ุงูุฑุบู ูู ุงุชุฎุงุฐ ุงููุฑุงุฑ)</h4>
            <p class="explain">
                ุฏุงูุฉ <code>Math.max()</code> ุจุชุฑุฌุน ุฃูุจุฑ ุฑูู ุจูู ูู ุงูุฃุฑูุงู ุงููู ุจุชุฏููุง ููุง. ูููุฏุฉ ุฌุฏูุง ูู ุจุชุญุณุจ ุฃุนูู ุฏุฑุฌุฉุ ุฃู ุฃุนูู ุณุนุฑ ุจูุน. **ุงูุฑุบู:** ุฏู ุจุชุณุชุฎุฏู ูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช: ูู ุนุงูุฒ ุชุนุฑู ุฃุนูู ููุฒุงููุฉ ุตุฑูุชูุง ูู ุงูุฑุจุน ุงูุฃุฎูุฑุ ุจุชุฏุฎู ุงูุฃุฑูุงู ููู ุจุชุทูุน ูู ุงูุฃูุตู.
            </p>

            <pre class="display-code">// ุงููุฑุฌุน
console.log("ุฃูุจุฑ ูููุฉ: " + Math.max(5, 10, 50));
console.log("ุฃูุจุฑ ูููุฉ: " + Math.max(100, 20, 99)); // ูุชููุน: 50 ุซู 100
</pre>
            <label>ุงูุชุจ ุงูููุฏ ุงููู ูุญุฏุฏ ุฃูุจุฑ ุฑูู ุจูู 140, 70, 250, 90.</label>
            <textarea id="editor_3b" class="editor">console.log(Math.max(140, 70, 250, 90));</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_3b','out_3b','ref_3b','sol_3b')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_3b', 'sol_3b', 'ref_3b')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_3b" class="output"></div>
            <pre id="sol_3b" class="solution">// ุงููุฑุฌุน: console.log(Math.max(140, 70, 250, 90));</pre>

            <h4>ุฌ) ูุซุงู 11: ุฏุงูุฉ ุงููููุฉ ุงูุตุบุฑู `Math.min()` (ุงูุฑุบู ูู ุชูููู ุงููุฎุงุทุฑ)</h4>
            <p class="explain">
                ุฏุงูุฉ <code>Math.min()</code> ุจุชุฑุฌุน ุฃุตุบุฑ ุฑูู ุจูู ูู ุงูุฃุฑูุงู ุงููู ุจุชุฏููุง ููุง. ูููุฏุฉ ุฌุฏูุง ูู ุจุชุฏูุฑ ุนูู ุฃูู ุชูููุฉ ุดุญู ุฃู ุฃูู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ. **ุงูุฑุบู:** ุจุชุณุชุฎุฏู ูู ุชูููู ุงููุฎุงุทุฑ ุฃู ุงูุชูุงููู. ูู ุนูุฏู 4 ุนุฑูุถ ุฃุณุนุงุฑ ูููุฑุฏูู ูุฎุชููููุ ุงูุฏุงูุฉ ุฏู ุจุชุทูุน ูู ุงูุฃุฑุฎุต ูููู ุนุดุงู ุชููุฑ ูููุณ ุงูุดุฑูุฉ.
            </p>

            <pre class="display-code">// ุงููุฑุฌุน
console.log("ุฃุตุบุฑ ูููุฉ: " + Math.min(5, 10, 50));
console.log("ุฃุตุบุฑ ูููุฉ: " + Math.min(-1, 0, 10)); // ูุชููุน: 5 ุซู -1
</pre>
            <label>ุงูุชุจ ุงูููุฏ ุงููู ูุญุฏุฏ ุฃุตุบุฑ ุฑูู ุจูู 12, 5, 80, 2.</label>
            <textarea id="editor_3c" class="editor">console.log(Math.min(12, 5, 80, 2));</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_3c','out_3c','ref_3c','sol_3c')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_3c', 'sol_3c', 'ref_3c')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_3c" class="output"></div>
            <pre id="sol_3c" class="solution">// ุงููุฑุฌุน: console.log(Math.min(12, 5, 80, 2));</pre>

            <h4>ุฏ) ูุซุงู 12: ุฏุงูุฉ ูุฑูุจุฉ ุชุญุณุจ ูุณุงุญุฉ ุฏุงุฆุฑุฉ (ุงูุชุทุจูู ุงููุชูุงูู)</h4>
            <p class="explain">
                ูุฏู ุชุทุจูู ุจููุฑูู ููุฉ ุงูุฏูุฌ: ุฏุงูุฉ ุจุชุฃุฎุฏ ูููุฉ (ูุตู ุงููุทุฑ)ุ ุจุชุณุชุฎุฏู ุงูุซุงุจุช ุงูุฌุงูุฒ **ฯ** (`Math.PI`) ูุงูููุฉ **^2**ุ ูุจุชุนูู `return` ูููุชูุฌุฉ ุงููู ุจุชูุฑุจูุง ุจุงุณุชุฎุฏุงู ุฏุงูุฉ ุฌุงูุฒุฉ ุชุงููุฉ (`Math.round`). **ุงูุฑุบู:** ููุง ุจูุณุชุฎุฏู **ุงูุซูุงุจุช ุงูุฑูุงุถูุฉ ุงูุฌุงูุฒุฉ** ุงููู ุจุชููุฑูุง ุงูุฌุงูุง ุณูุฑูุจุช (ุฒู `Math.PI` ูู ฯ)ุ ูุฏู ุจูุถูู ุฏูุฉ ุงูุญุณุงุจุงุชุ ูุฃู ูููุชูุง ุจุชููู ูุนุฑููุฉ ุนุงููููุงุ ููุญุฏุด ูููุฏุฑ ูุบูุท ูููุง ุฃู ูุญุงูู ูุบููุฑูุง (ูุฏู ุฃุณุงุณ ูู ุงูุจุฑูุฌุฉ: ุงุณุชุฎุฏุงู ุงูุฃููุงุฏ ุงูุฌุงูุฒุฉ ุงูุขููุฉ).
            </p>

            <pre class="display-code">// ุงููุฑุฌุน
// ูุณุงุญุฉ ุงูุฏุงุฆุฑุฉ = ฯ * ูุตู ุงููุทุฑ^2
function calculateArea(radius) {
  return Math.PI * radius * radius;
}
let area5 = calculateArea(5);
console.log("Area for 5 is: " + Math.round(area5)); 
// ูุชููุน: Area for 5 is: 79 (ุจุนุฏ ุงูุชูุฑูุจ)
</pre>
            <label>ุงูุชุจ ุฏุงูุฉ ุชุญุณุจ ูุณุงุญุฉ ุฏุงุฆุฑุฉ ูุตู ูุทุฑูุง 3ุ ูุงุทุจุน ุงููุงุชุฌ ููุฑุจูุง.</label>
            <textarea id="editor_3d" class="editor">function calculateArea(radius) {
  return Math.PI * radius * radius;
}
let area3 = calculateArea(3);
console.log("Area for 3 is: " + Math.round(area3));</textarea>
            <div class="controls">
                <button class="btn" onclick="runAndCompare('editor_3d','out_3d','ref_3d','sol_3d')">โถ ุชุดุบูู</button>
                <button class="btn ghost" onclick="toggleSolution('editor_3d', 'sol_3d', 'ref_3d')">๐ ุนุฑุถ ุงูุญู</button>
            </div>
            <div id="out_3d" class="output"></div>
            <pre id="sol_3d" class="solution">// ุงููุฑุฌุน: function calculateArea(radius) { return Math.PI * radius * radius; } let area3 = calculateArea(3); console.log("Area for 3 is: " + Math.round(area3));</pre>

            <hr>
            <h3>๐ ุฎูุงุตุฉ ุงูุฏุฑุณ ุงูุฑุงุจุน</h3>
            <div class="summary">
                <ul style="direction:rtl; text-align:right; line-height:1.8; margin:0; padding-right:10px;">
                    <li>**ุงูุญููุฉ `for`:** ุจุทู ุงูุชูุฑุงุฑุ ุจูุนูู ุดุบู ูุชูุฑ ูู ุณุทูุฑ ููููุฉ. ุชุฑููุจู: **ุจุฏุงูุฉ** ; **ุดุฑุท** ; **ุฎุทูุฉ ุงูุชูุฏูู**.</li>
                    <li>**ุงูุงุฎุชุตุงุฑ `++`:** ุงุฎุชุตุงุฑ ุญูู ูุฒูุงุฏุฉ ุงููุชุบูุฑ ุจูุงุญุฏ.</li>
                    <li>**ุงูุฏุงูุฉ (Function):** ููุฏ ูุนูุจ ุจูุนูู ูููุฉ ูุนููุฉุ ุจูุฎูู ููุฏู ูุธูู.</li>
                    <li>**ุงููุนุงูู (Parameter):** ุงููุนูููุงุช ุงููู ุจุชุฏุฎู ุงูุฏุงูุฉ ุนุดุงู ุชุดุชุบู ุนูููุง.</li>
                    <li>**`return`:** ุงูุฃูุงูุฑ ุฏู ุจุชุฎุฑุฌ ูุชูุฌุฉ ุงูุฏุงูุฉ ุนุดุงู ูุณุชุฎุฏููุง ูู ุญุชุฉ ุชุงููุฉ ูู ุงูููุฏ.</li>
                    <li>**ุงูุฏูุงู ุงูุฌุงูุฒุฉ:** ุงุณุชุฎุฏู ุงูุฏูุงู ุงููู ุจุชุจุฏุฃ ุจู `Math.` ุนุดุงู ุชููุฑ ุนูู ููุณู ุงูุญุณุงุจุงุช ุฒู ุงูุชูุฑูุจ ูุฃูุจุฑ ูุฃุตุบุฑ ูููุฉ.</li>
                    <li>**ุงูุฃูู ูุงููุธุงุฆู (Bonus):** ูู ูุง ูุงู ุงูููุฏ ููุธู ูู ุฏูุงู (Functions)ุ ูู ูุง ูุงู ุฃุณูู ูู ุงูุตูุงูุฉ ูุงูุชุทููุฑุ ููููู ุจูุฎููู ููุงุท ุงููุฌูู ูุฑูุฒูุฉุ ููุงุฒู ุชุชุฃูู ูููุณ.</li>
                </ul>
            </div>

            <hr>
            <div style="text-align:center; margin-top:12px;">
                <button class="btn" onclick="location.href='quiz4.html'">ุงุฎุชุจุฑ ููุณู</button>
            </div>

            <div class="navs">
                <button class="btn" onclick="location.href='lesson3.html'">โฌ๏ธ ุงูุฏุฑุณ ุงูุซุงูุซ</button>
                <button class="btn" onclick="location.href='index.html'">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</button>
                <button class="btn" onclick="location.href='lesson5.html'">๐ ุงูุฏุฑุณ ุงูุฎุงูุณ</button>
            </div>

            <div class="footer">ุชุตููู ุจูุงุณุทู <strong>Ahmed Ezzat</strong> โค๏ธ</div>

        </div>
    </div>
<script>
/* ========================================================
  SCRIPT ูุตุญุญ ููุญุฏุซ ููุงูุฉ ุฃูุซูุฉ ุงูุฏุฑุณ ุงูุฑุงุจุน (ุงูุฅุตุฏุงุฑ ุงูููุงุฆู)
  ูุดูู: ุญูุงูุฉ ูู Infinite Loopุ ุฅุตูุงุญ Function Validationุ ูุฒูุงุฏุฉ ูุฑููุฉ ุงูููุงุฑูุฉ.
  ======================================================== */

/* ----- ุชุฎุฒูู ุงูุฃููุงุฏ ุงููุฑุฌุนูุฉ ูู ูุชุบูุฑุงุช Global ----- */
window.REF_CODES = {
  // Example 1: for Loops Basics
  'ref_1a': `for (let count = 0; count < 10; count = count + 1) {\n  console.log("silk");\n}`,
  'ref_1b': `for (let count = 0; count < 10; count = count + 1) {\n  console.log("campus");\n}`,
  'ref_1c': `for (let i = 1; i <= 6; i++) {\n  console.log("Count is " + i);\n}`,
  'ref_1d': `for (let i = 1; i <= 5; i++) {\n  console.log("Red lorry, yellow lorry");\n}`,
  'ref_1e': `for (let j = 5; j >= 1; j--) {\n  console.log(j);\n}\nconsole.log("Go!");`,

  // Example 2: Custom Functions
  'ref_2a': `function sayWelcome() {\n  console.log("ุฃููุงู ูุณููุงู");\n}\nsayWelcome();\nsayWelcome();`,
  'ref_2b': `function calculatePrice(quantity) {\n  let price = quantity * 5;\n  console.log("Total price is: " + price + " EGP");\n}\ncalculatePrice(10);\ncalculatePrice(3);`,
  'ref_2c': `function multiply(a, b) {\n  return a * b;\n}\nlet product = multiply(4, 5);\nconsole.log("ุงููุงุชุฌ ูู: " + product);`,
  'ref_2d': `function min2(num1, num2) {\n  let result;\n  if (num1 < num2) {\n    result = num1;\n  } else {\n    result = num2;\n  }\n  return result;\n}\nconsole.log("ุงูุฃุตุบุฑ ุจูู 5 ู 10 ูู: " + min2(5, 10));\nconsole.log("ุงูุฃุตุบุฑ ุจูู 20 ู 8 ูู: " + min2(20, 8));`,

  // Example 3: Built-in Functions
  'ref_3a': `console.log(Math.round(7.2));\nconsole.log(Math.round(7.8));`,
  'ref_3b': `console.log(Math.max(140, 70, 250, 90));`,
  'ref_3c': `console.log(Math.min(12, 5, 80, 2));`,
  'ref_3d': `function calculateArea(radius) {\n  return Math.PI * radius * radius;\n}\nlet area3 = calculateArea(3);\nconsole.log("Area for 3 is: " + Math.round(area3));`
};

// ูุชุบูุฑ ุฌุฏูุฏ ูุชุฎุฒูู ุญุงูุฉ ุตุญุฉ ุงูุญู ููู ุชูุฑูู (ุฌุฏูู Hash Map)
window.SOLUTION_STATUS = {}; 


/* ----- ุฅุนุฏุงุฏุงุช ุณููู ุงููุญุต (ููุง ูู) ----- */
const REQUIRE_SEMICOLON = false; 
const ALLOW_LOOSE_SYNTAX = true; 
window._EDU_SETTINGS = { REQUIRE_SEMICOLON: REQUIRE_SEMICOLON, ALLOW_LOOSE_SYNTAX: ALLOW_LOOSE_SYNTAX };

/* ----- ูุณุงุนุฏุฉ: ุฅุฒุงูุฉ ุงูุชุนูููุงุช (ููุง ูู) ----- */
function removeComments(code) {
  let result = code.replace(/\/\*[\s\S]*?\*\//g, ''); 
  result = result.replace(/\/\/.*$/gm, ''); 
  return result;
}
window.removeComments = removeComments;

/* ----- ูุญูู ุงูุฃุฎุทุงุก ุงูุจููููุฉ (ููุง ูู) ----- */
function analyzeCodeErrors(code) {
  const lines = code.split('\n');
  const stack = [];
  
  for (let i = 0; i < lines.length; i++) {
    const raw = lines[i];
    const noComment = raw.replace(/\/\*[\s\S]*?\*\//g,'').replace(/\/\/.*$/g,'').trim(); 
    if (noComment === '') continue;

    let inSingleQuote = false;
    let inDoubleQuote = false;
    for (let j = 0; j < raw.length; j++) {
      const ch = raw[j];

      if (ch === "'" && !inDoubleQuote) {
        inSingleQuote = !inSingleQuote;
        continue;
      }
      if (ch === '"' && !inSingleQuote) {
        inDoubleQuote = !inDoubleQuote;
        continue;
      }

      if (inSingleQuote || inDoubleQuote) continue;

      if (ch === '(' || ch === '{' || ch === '[') {
        stack.push({ch, i});
      } else if (ch === ')' || ch === '}' || ch === ']') {
        const last = stack.pop();
        if (!last) {
          return { valid:false, line: i+1, message: 'โ ููุณ ุฅุบูุงู ุจุฏูู ููุณ ูุชุญ ูุจูู.' };
        }
        if ((ch === ')' && last.ch !== '(') ||
            (ch === '}' && last.ch !== '{') ||
            (ch === ']' && last.ch !== '[')) {
          return { valid:false, line: i+1, message: 'โ ุงูุฃููุงุณ ุบูุฑ ูุชุทุงุจูุฉ.' };
        }
      }
    }
    
    if (inSingleQuote || inDoubleQuote) {
      return { valid:false, line: i+1, message: 'โ ุนูุงูุฉ ุงูุชุจุงุณ ููุฑุฏุฉ ุฃู ูุฒุฏูุฌุฉ ุบูุฑ ูุบููุฉ ูู ุงูุณุทุฑ.' };
    }
  }

  if (stack.length > 0) {
    const last = stack[stack.length-1];
    return { valid:false, line: last.i+1, message: `โ ูู ุฃููุงุณ ููุชูุญุฉ ุบูุฑ ูููููุฉ. (ูุชุญ ุนูุฏ ุณุทุฑ ${last.i+1})` };
  }

  return { valid:true };
}
window.analyzeCodeErrors = analyzeCodeErrors;

/* ----- ููุงุนุฏ ุชุญูู ุฎุงุตุฉ ุจุงูุชูุฑูู (ููุญุฏููุซ ูู Function Validation) ----- */
function validateCode(inputId, code) {
  const m = inputId.match(/(\d+)([a-zA-Z]?)$/);
  const base = m ? m[1] : null;
  const cleaned = removeComments(code).trim();
  const hasConsoleLog = /console\.log\s*\(/.test(code);
  
  if (!base) return { valid:true };

  switch (base) {
    case '1': // For Loops
      if (!/for\s*\(.*\)/i.test(cleaned)) return { valid:false, message: "โ ูุฐุง ุงูุชูุฑูู ูุฑูุฒ ุนูู ุงุณุชุฎุฏุงู ุญููุฉ for." };
      if (!hasConsoleLog) return { valid:false, message: "โ ูุงุฒู ุชุณุชุฎุฏู console.log() ูุนุฑุถ ุงููุชูุฌุฉ ุฏุงุฎู ุงูุญููุฉ ุฃู ุจุนุฏูุง." };
      break;
    case '2': // Custom Functions
      if (!/function\s+\w+\s*\(.*\)\s*\{/i.test(cleaned)) return { valid:false, message: "โ ูุฐุง ุงูุชูุฑูู ูุฑูุฒ ุนูู ุชุนุฑูู ุงูุฏูุงู (function name() {})." };
      
      // ููุงุนุฏ return ุฃููู ุนูู 2c ู 2d ููุท
      const requiresReturn = inputId === 'editor_2c' || inputId === 'editor_2d';
      
      if (!/return/i.test(cleaned) && requiresReturn) {
        return { valid:false, message: "โ ุงูุฏูุงู ูู ูุฐุง ุงููุซุงู ุชุญุชุงุฌ ูุฅุฑุฌุงุน ูููุฉ ุจุงุณุชุฎุฏุงู ูููุฉ <code style='font-weight:bold;'>return</code>." };
      }
      break;
    case '3': // Built-in Functions
      if (!/Math\.(round|max|min)/i.test(cleaned) && inputId !== 'editor_3d') return { valid:false, message: "โ ูุฐุง ุงูุชูุฑูู ุนู ุงูุฏูุงู ุงููุฏูุฌุฉ (Math.round, Math.max, Math.min)." };
      break;
    default:
      break;
  }
  return { valid:true };
}
window.validateCode = validateCode;

/* ----- ุชูููุฐ ุงูููุฏ ูุงูุชูุงุท console.log + ุฃุฎุทุงุก ุงูุชูููุฐ (ุญูุงูุฉ ูู ุงูู Infinite Loop) ----- */
function executeAndCapture(codeStr){
  const logs = [];
  const origConsole = window.console.log; 
  const timeoutDuration = 3000; // 3 ุซูุงูู ูุญุฏ ุฃูุตู ููุชูููุฐ
  let error = null;

  window.console.log = function(...args){
    const line = args.map(a=>{
      if (typeof a === 'object' && a !== null) {
        try { return JSON.stringify(a, null, 2); } catch(e){ return String(a); } 
      }
      return String(a);
    }).join(' ');
    logs.push(line);
    try { origConsole.apply(window.console, args); } catch(e){}
  };

  const startTime = Date.now(); 

  try {
    const codeToExecute = `'use strict';\n${codeStr}`;
    const fn = new Function(codeToExecute);
    
    let isTimeout = false;
    const runLoop = setTimeout(() => {
        isTimeout = true;
        // ูุง ูููู ุฅููุงู ุชูููุฐ ุงูุฏุงูุฉ (fn()) ุจุดูู ูุจุงุดุฑ ูู ููุง
    }, timeoutDuration);

    fn(); // ุชูููุฐ ุงูููุฏ ูุนูููุง

    clearTimeout(runLoop); 

    // ูุญุต ุฅุถุงูู ูููุช ุงูุชูููุฐ ุจุนุฏ ุงูุงูุชูุงุก
    if (Date.now() - startTime > timeoutDuration || isTimeout) {
         error = { msg: "โ ุชู ุฅููุงู ุงูุชูููุฐ! ุงูููุฏ ุงุณุชุบุฑู ููุชูุง ุทูููุงู ุฌุฏูุง (ุฑุจูุง Infinite Loop).", line: null };
         // ููุณุญ ุฃู logs ุชู ุชุณุฌูููุง ุฅุฐุง ูุงู ุงูุณุจุจ ูู Timeout
         logs.length = 0; 
    }

  } catch (err) {
    let ln = null;
    if (err && err.stack) {
      const lines = err.stack.split('\n');
      for (let l of lines){
        let m = l.match(/<anonymous>:(\d+):\d+/) || l.match(/new Function:(\d+):\d+/);
        if (m && m[1]) { 
            const foundLine = Number(m[1]) - 1; 
            if(foundLine > 0) ln = foundLine; 
            break; 
        }
      }
    }
    let msg = err && err.message ? err.message : String(err);
    msg = msg.replace(/\n/g,' ').replace(/\s+/g,' ').trim();
    error = { msg, line: ln };
  } finally {
    window.console.log = origConsole;
  }
  return { logs, error };
}
window.executeAndCapture = executeAndCapture;

/* ----- ูุณุงุนุฏุฉ: ููุงุฑูุฉ ุฃูู ุณุทุฑ ูุฎุชูู (ููุง ูู) ----- */
function firstDiffLine(expected, actual){
  const exp = expected.split('\n');
  const act = actual.split('\n');
  const max = Math.max(exp.length, act.length);
  for (let i=0;i<max;i++){
    const e = (exp[i]||'').trim(); 
    const a = (act[i]||'').trim();
    if (e !== a) return i+1;
  }
  return null;
}
window.firstDiffLine = firstDiffLine;

/* ----- ุชุธููู ุณุทุฑ ุงูุฎุทุฃ ุฏุงุฎู textarea (ููุง ูู) ----- */
function highlightErrorLine(textarea, lineNumber) {
  try {
    textarea.classList.remove('highlight-error');
    if (!lineNumber || lineNumber < 1) return;
    const lines = textarea.value.split('\n');
    const safeLine = Math.min(lineNumber, lines.length);
    let start = 0;
    for(let i = 0; i < safeLine - 1; i++){
        start += lines[i].length + 1; 
    }
    
    const end = start + (lines[safeLine - 1] ? lines[safeLine - 1].length : 0);
    
    textarea.focus();
    if (textarea.setSelectionRange) textarea.setSelectionRange(start, end);
    textarea.classList.add('highlight-error');
  } catch(e){}
}
window.highlightErrorLine = highlightErrorLine;

/* ----- ุงูุฏุงูุฉ ุงูุฃุณุงุณูุฉ: ุชุดุบููุ ุชุญูููุ ุชูููุฐุ ููุงุฑูุฉ (ููุญุณูููุฉ ูุฒูุงุฏุฉ ุงููุฑููุฉ ููุถูุญ ุฑุณุงุฆู ุงูุฎุทุฃ) ----- */
function runAndCompare(editorId, outId, refCodeId, solId){
  const textarea = document.getElementById(editorId);
  const outEl = document.getElementById(outId);
  const expectedCode = window.REF_CODES[refCodeId]; 
  const currentCode = textarea.value; 

  if (!textarea || !outEl || !expectedCode) return;
  
  // ูุถู ุญุงูุฉ ุงูุฎุทุฃ ูุงูุฅุฎุฑุงุฌ
  textarea.classList.remove('highlight-error');
  outEl.classList.remove('error');
  outEl.textContent = '... ุฌุงุฑู ุงูุชูููุฐ ูุงูุชุญููู ...';

  const code = currentCode || '';
  if (!code.trim()) {
    outEl.textContent = 'โ๏ธ ุงูุชุจ ุงูููุฏ ูุจู ุงูุถุบุท ุนูู ุชุดุบูู.';
    window.SOLUTION_STATUS[solId] = null; 
    return;
  }

  // 1) ุชุญููู ุจูููู ููุฃุฎุทุงุก
  const analysis = analyzeCodeErrors(code);
  if (!analysis.valid) {
    outEl.classList.add('error');
    outEl.textContent = `${analysis.message}\n๐ ุงูุณุทุฑ ุฑูู: ${analysis.line || '?'}`;
    highlightErrorLine(textarea, analysis.line || 1);
    window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode };
    return;
  }

  // 2) ุชุญูู ุญุณุจ ูุชุทูุจุงุช ุงููุซุงู
  const validation = validateCode(editorId, code);
  if (!validation.valid) {
    outEl.classList.add('error');
    outEl.textContent = validation.message;
    window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode };
    return;
  }

  // 3) ุชูููุฐ ููุฏ ุงูุทุงูุจ
  const studentRes = executeAndCapture(code);
  if (studentRes.error) {
    outEl.classList.add('error');
    const ln = studentRes.error.line ? `ุ ุชูุฑูุจูุง ุนูุฏ ุงูุณุทุฑ ${studentRes.error.line}` : '';
    outEl.textContent = `โ ููู ุฎุทุฃ ููุช ุงูุชูููุฐ: ${studentRes.error.msg}${ln}\n(ุงูุฎุทุฃ ูู ููุฏู)`;
    if (studentRes.error.line) highlightErrorLine(textarea, studentRes.error.line);
    window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode };
    return;
  }

  // 4) ุชูููุฐ ุงูุญู ุงููุฑุฌุนู
  let expectedRes = { logs: [], error: null };
  try {
    expectedRes = executeAndCapture(expectedCode);
    if (expectedRes.error) {
      outEl.classList.add('error');
      outEl.textContent = `โ ูู ูุดููุฉ ูู ููุฏ ุงูุญู ุงููุฑุฌุนู: ${expectedRes.error.msg}`;
      window.SOLUTION_STATUS[solId] = null; 
      return;
    }
  } catch(e){
    outEl.classList.add('error');
    outEl.textContent = `โ ุฎุทุฃ ุฏุงุฎูู ุฃุซูุงุก ุชูููุฐ ุงูุญู ุงููุฑุฌุนู: ${e.message || e}`;
    window.SOLUTION_STATUS[solId] = null; 
    return;
  }

  const studentText = (studentRes.logs || []).join('\n');
  const expectedText = (expectedRes.logs || []).join('\n');

  // ุชูุธูู ุงููุต (ุฅุฒุงูุฉ ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ ูุงูุณุทูุฑ ุงููุงุฑุบุฉ ููููุงุฑูุฉ)
  // ***** ุงูุชุญุณูู: ุฅุฒุงูุฉ ุฃู ุณุทุฑ ูุญุชูู ุนูู ูุณุงูุงุช ููุท ุฃู ูุงุฑุบ ููุฑููุฉ ุฃูุจุฑ *****
  const sNorm = studentText.split('\n').map(l => l.trim()).filter(l => l !== '').join('\n');
  const eNorm = expectedText.split('\n').map(l => l.trim()).filter(l => l !== '').join('\n');
  
  // ***** ุงูุชุญุณูู 2: ุฅุฒุงูุฉ ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ ูู ุงููุชูุฌุฉ ุงููุนุฑูุถุฉ ููุทุงูุจ *****
  const sRawNorm = studentText.replace(/[ \t]+/g, ' ').trim(); 
  
  if (!studentText) {
    outEl.textContent = 'โ ูููุฐ ุงูููุฏ ููู ูููุด console.log ูุทุจูุน. ูู ุงูููุฑูุถ ูููู ูู ุฅุฎุฑุงุฌ ุงุณุชุฎุฏู console.log().';
  } else {
    outEl.textContent = sRawNorm; // ูุนุฑุถ ุงููุชูุฌุฉ ููุทุงูุจ ุจุดูู ูุธูู
  }
  
  // 5) ููุงุฑูุฉ ุงููุชุงุฆุฌ ูุชุญุฏูุซ ุญุงูุฉ ุงูุญู (SOLUTION_STATUS)
  if (sNorm === eNorm) {
    outEl.textContent += '\n\nโ ููุชุงุฒ โ ุงููุงุชุฌ ูุธุจูุท ุจุงูุธุจุท! ๐';
    window.SOLUTION_STATUS[solId] = { correct: true, code: currentCode }; // ุงูุญู ุตุญูุญ
    showToast('ุจุฑุงูู! ุงููุงุชุฌ ูุธุจูุท ๐ช', true);
  } else {
    outEl.classList.add('error');
    
    // ****** ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูููุญุณููุฉ ******
    outEl.textContent += '\n\nโ ุงููุงุชุฌ ูุด ุฒู ุงููุชููุน: ';
    
    const diffLine = firstDiffLine(eNorm, sNorm);
    if (diffLine !== null) {
        outEl.textContent += `ุฃูู ุงุฎุชูุงู ูุงู ูู ุณุทุฑ ุงูุฅุฎุฑุงุฌ ุฑูู ${diffLine}.`;
    } else {
        outEl.textContent += `ุงููุงุชุฌ ูุฎุชูู ุนู ุงูุญู ุงููุฑุฌุนู.`;
    }
    
    outEl.textContent += `\n\n๐ค ููุชุตุญูุญ: ุฑุงุฌุน ุงูุณุทุฑ ุงูููุชููุน ููุงุฑูู ุจุงูุณุทุฑ ุงูุฐู ุธูุฑ ูู.`;
    outEl.textContent += `\n\n--- ุงููุงุชุฌ ุงูููุชููุน (ุจุนุฏ ุงูุชูุธูู) ---\n${eNorm || '(ูููุด ูุชุงูุฌ ูุชููุนุฉ)'}`;
    outEl.textContent += `\n--------------------------------------`;
    // ------------------------------------
    
    window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode }; // ุงูุญู ุบูุฑ ุตุญูุญุ ูุฎุฒู ุงูููุฏ ุงููุฑุฌุนู ููุนุฑุถ
    showToast('ูุฑูุจ ุฌุฏูุง โ ุฑุงุฌุน ุงูุงุฎุชูุงู ูุนุฏูู ููุฏู โ๏ธ', false);
  }
}
window.runAndCompare = runAndCompare;

/* ----- ุฏุงูุฉ ุนุฑุถ ุงูุญู ุงูุฌุฏูุฏุฉ (ุชุนุชูุฏ ุนูู ุญุงูุฉ SOLUTION_STATUS) (ููุง ูู) ----- */
function toggleSolution(editorId, solId, refCodeId){
  const solEl = document.getElementById(solId);
  if(!solEl) return;
  
  if (solEl.style.display === 'block') {
    // ูู ุงูุญู ููุชูุญุ ุงูููู
    solEl.style.display = 'none';
    return;
  }
  
  // ุงูุญู ูุด ููุชูุญุ ูุงุฒู ูุนุฑุถู
  const status = window.SOLUTION_STATUS[solId];
  const expectedCode = window.REF_CODES[refCodeId];
  const editorCode = document.getElementById(editorId).value;

  if (status && status.code) {
    // ููู ูุชูุฌุฉ ุณุงุจูุฉ ุจุนุฏ ุงูุชุดุบูู (ุณูุงุก ุตุญ ุฃู ุบูุท)
    solEl.textContent = status.code;
    solEl.style.display = 'block';
    if(status.correct){
       solEl.textContent = `// โ ุงูุญู ุจุชุงุนู ุฏู ุตุญ:\n` + status.code;
    } else {
       solEl.textContent = `// โ ุงูุญู ุงููุฑุฌุนู (ุดูู ุงููุฑู ุจููู ูุจูู ููุฏู):\n` + status.code;
    }
  } else {
    // ูู ูุชู ุชุดุบูู ุงูููุฏ ุจุนุฏุ ูุนุฑุถ ุงูููุฏ ุงููุฑุฌุนู ูููุจู ุงููุณุชุฎุฏู
    solEl.textContent = `// โ๏ธ ูุงุฒู ุชุดุบูู ุงูููุฏ ุงูุฃูู ุนุดุงู ูุญุฏุฏ ูู ููุฏู ุตุญ ููุง ุบูุท.\n` + expectedCode;
    solEl.style.display = 'block';
  }
}
window.toggleSolution = toggleSolution;

/* ----- Toast (ููุง ูู) ----- */
function showToast(text, ok){
  const t = document.createElement('div');
  t.style.position='fixed'; t.style.left='50%'; t.style.transform='translateX(-50%)';
  t.style.bottom='26px'; t.style.padding='10px 14px'; t.style.borderRadius='999px';
  t.style.color='#fff'; t.style.fontWeight='700'; t.style.zIndex=9999;
  t.style.boxShadow='0 8px 20px rgba(0,0,0,0.2)';
  t.style.background = ok? 'rgba(6,125,70,0.95)' : 'rgba(150,20,20,0.95)';
  t.textContent = text;
  document.body.appendChild(t);
  setTimeout(()=>{ t.style.transition='all .4s'; t.style.opacity='0'; setTimeout(()=>t.remove(),420)},1400);
}
window.showToast = showToast;
</script>
</body>
</html>
