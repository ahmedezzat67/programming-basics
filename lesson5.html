<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>ุงูุฏุฑุณ ุงูุฎุงูุณ: ุงูุฑูุงุถูุงุช ูุฃููุงุน ุงูุจูุงูุงุช ูุงููุตูููุงุช</title>
	<style>
		/* ========================================================
		   CSS ููุญุณูู (ุชู ุชุนุฒูุฒ ุงูุฃููููุดู ูุงูุชูุงุนูุงุช)
		   ======================================================== */
		@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
		
		:root{
			--primary:#00796b;
			--green1:#009688;
			--green2:#26a69a;
			--bg1: #f9f9f9;
			--bg2: #e0f7fa;
			--card:#fff;
			--code-bg:#f1f8e9;
			--error-bg: #fff0f0; /* ููู ุฌุฏูุฏ ููุฎูููุฉ ุนูุฏ ุงูุฎุทุฃ */
			--accent:#ffe227;
			--transition-speed: 0.3s;	
		}
		
		*{
			box-sizing:border-box;
			/* ุชุทุจูู ุงูุงูุชูุงู ุงูุชููุงุฆู ุนูู ุงูุฎุตุงุฆุต ุงููุงูุฉ ูุนูู ุญุฑูุงุช ุณูุณุฉ */
			transition: background-color var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed), border var(--transition-speed), color var(--transition-speed);
		}	

		body{
			font-family:'Cairo',sans-serif;
			background: linear-gradient(135deg,var(--bg1),var(--bg2));
			color:#222;
			margin:0;
			padding:20px;
			-webkit-font-smoothing:antialiased;
			-moz-osx-font-smoothing:grayscale;
			text-align: right;
		}

		h1{color:var(--primary); text-align:center; font-size:2rem; margin-bottom:8px; font-weight:900;}
		h3{color:var(--green1); margin:16px 0; font-weight:800; border-bottom: 2px solid #e0f7fa; padding-bottom: 5px;}
		h4{margin:10px 0; font-weight:800;}

		/* ุชุญุณูู ุชูุงุนู ุงูุตูุฏูู ุงูุฑุฆูุณู */
		.content{
			max-width:980px;	
			margin:12px auto;	
			background:var(--card);	
			padding:24px;	
			border-radius:14px;
			box-shadow:0 6px 24px rgba(0,0,0,0.08);	
			text-align:right;
			border: 1px solid transparent;	
		}
		.content:hover {
			box-shadow: 0 10px 30px rgba(0,0,0,0.12);
			border: 1px solid var(--green2);
		}

		.lead{color:#333; line-height:1.8; margin-bottom:12px; font-weight:700;}
		.explain{color:#333; line-height:1.6; margin-bottom:8px; font-weight:600;}
		
		/* ุชูุงุนู ุตูุฏูู ุงูููุงุญุธุงุช */
		.note{
			background:#fff3cd;	
			color:#856404;	
			padding:12px;	
			border-radius:8px;	
			margin:12px 0;	
			font-weight:700;
			cursor: default;
		}
		.note:hover {
			transform: scale(1.005); /* ุญุฑูุฉ ุชูุณูุน ุฎูููุฉ */
			box-shadow: 0 4px 12px rgba(0,0,0,0.05);
		}

		hr{border:none;border-top:1px solid #eee;margin:26px 0;}	
		
		/* ุชูุงุนู ุตูุฏูู ุนุฑุถ ุงูููุฏ */
		pre.display-code{
			background:var(--code-bg);	
			border:2px solid var(--green1);	
			padding:12px;	
			border-radius:10px;
			font-family: "Courier New", monospace;	
			direction:ltr;	
			text-align:left;	
			white-space:pre-wrap;	
			margin:8px 0;
			font-weight:700;
			cursor: text;
		}
		pre.display-code:hover {
			border-color: var(--primary);
			background-color: #f5fdee;
		}
		
		/* ุชูุงุนู ุญูู ุงูุชุญุฑูุฑ */
		textarea.editor{
			width:100%;	
			min-height:130px;	
			font-family:monospace;	
			font-size:15px;	
			direction:ltr;	
			text-align:left;
			border-radius:10px;	
			padding:12px;	
			border:2px solid #d6eae6;	
			background:#fff;	
			resize:vertical;
			outline: none; /* ุฅุฒุงูุฉ ุงูู outline ุงูุงูุชุฑุงุถู */
		}
		textarea.editor:focus {
			border-color: var(--green2); /* ุฅุทุงุฑ ุจููู ูููุฒ ุนูุฏ ุงูุชุฑููุฒ */
			box-shadow: 0 0 0 3px rgba(38, 166, 154, 0.2);
		}
		
		.controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;}
		
		/* ุชูุงุนู ุงูุฃุฒุฑุงุฑ ุงูููุนุฒูุฒ */
		.btn{
			background:linear-gradient(90deg,var(--green1),var(--green2));	
			color:#fff;	
			border:none;	
			padding:10px 16px;
			border-radius:12px;	
			cursor:pointer;	
			font-weight:800;	
			transition:all var(--transition-speed);	
			box-shadow:0 4px 12px rgba(0,0,0,0.1);
			min-width: 120px;
		}
		.btn:hover{
			transform:translateY(-3px); /* ุฑูุนุฉ ุฃูุจุฑ ููููุงู */
			box-shadow:0 10px 20px rgba(0,0,0,0.18);
		}	
		.btn:active{
			transform:translateY(-1px); /* ุถุบุทุฉ ููุฏุงุฎู ุจุณูุทุฉ */
			box-shadow:0 4px 8px rgba(0,0,0,0.15);	
		}
		.btn:disabled {
			opacity: 0.6;
			cursor: not-allowed;
			transform: none;
			box-shadow: none;
		}

		.btn.ghost{
			background:#fff;	
			color:var(--green1);	
			border:2px solid var(--green2);	
			font-weight:800;
		}	
		.btn.ghost:hover{
			background: var(--bg2);
			color: var(--primary);
			border-color: var(--primary);
		}

		.output{
			margin-top:10px;	
			background:#e0f7fa;	
			padding:12px;	
			border-radius:8px;	
			font-family:monospace;	
			direction:ltr;	
			text-align:left;	
			white-space:pre-wrap;	
			min-height:48px;	
			color:#004d40;	
			font-weight:700;
		}
		/* ููู ุฎุงุต ููุชุงุฆุฌ ุงูุฎุทุฃ */
		.output.error{
			background:var(--error-bg);
			color:#a00;
			border: 1px solid rgba(255, 0, 0, 0.3);
		}	
		
		.solution{
			margin-top:8px;	
			background:#fff6e6;	
			padding:10px;	
			border-radius:8px;	
			font-family:monospace;	
			direction:ltr;	
			text-align:left;	
			white-space:pre-wrap;	
			display:none;	
			font-weight:700;
			border-left: 5px solid var(--accent);
		}
		
		/* ุชูุงุนู ุตูุฏูู ุงูููุฎุต */
		.summary{
			background:#f7fff7;	
			border:1px solid #d1f5d1;	
			padding:14px;	
			border-radius:10px;	
			text-align:right;	
			margin-top:16px;	
			font-weight:700;
		}
		.summary:hover {
			background: #f0fff0;
			box-shadow: 0 2px 5px rgba(0,0,0,0.05);
		}

		.navs{display:flex; gap:10px; justify-content:center; margin-top:16px; flex-wrap:wrap;}
		.footer{text-align:center; margin-top:18px; color:#555; font-weight:700;}
		
		/* ุณุชุงูู ุชุธููู ุงูุฎุทุฃ */
		.highlight-error {	
			background: var(--error-bg) !important;	
			outline: 2px solid rgba(255,0,0,0.3);	
			box-shadow: 0 0 0 5px rgba(255,0,0,0.1);
		}
		
		/* ุณุชุงูู ุจุทุงูุฉ ุชุญููู ุงูููุฏ */
		.code-analysis {
			background: #e0f7fa; 
			padding: 15px; 
			border-radius: 8px; 
			margin-bottom: 20px; 
			border-right: 4px solid #009688;
		}
		.code-analysis h5 {
			margin-top:0; 
			color:#00796b; 
			font-weight:800;
		}
		.code-analysis ul, .code-analysis ol {
			padding-right: 20px;
			margin-bottom: 0;
			line-height: 1.6;
		}
		.code-analysis strong {
			font-weight: 700;
		}
		
		/* responsive */
		@media(max-width:720px){
			.controls{flex-direction:column;}	
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>๐ ุงูุฏุฑุณ ุงูุฎุงูุณ: ุฑูุงุถูุงุช ุงูุฃููุงุฏุ ูุฃููุงุน ุงูุจูุงูุงุชุ ูููุงุฆู ุงููุตูููุงุช</h1>

		<div class="content">
			<p class="lead">ุงูุฏุฑุณ ุฏู ูู ุงููู ููุญูู ุงูููุฏ ุจุชุงุนู ูู ูุฌุฑุฏ ุฃูุงูุฑ ุฅูู ูุธุงู ุชุญููู ุจูุงูุงุช ุญูููู. ุชุฎูู ุฅูู ูุญุชุงุฌ ุชุญุณุจ ุงููุชูุณุท ุงูุดูุฑู ูุฃุณุนุงุฑ ุงูุฃุณููุ ุฃู ุชุตูู ุงูุนููุงุก ุญุณุจ ูุฏุฎูุงุชูู. ููุง ูุชูุฌู ููุฉ ุงูุฏูุงู ุงูุฑูุงุถูุฉ (Math Functions)ุ ูููุฉ ุชุญููู ุฃููุงุน ุงูุจูุงูุงุช (Data Types)ุ ูููุฉ ุชุฎุฒูู ุงูุจูุงูุงุช ูู ููุงุฆู ูุฑุชุจุฉ (Arrays).</p>

			<div class="note">ูุงุฆู <code>Math</code>ุ ูุฃููุงุน ุงูุจูุงูุงุชุ ูุงููุตูููุงุช ููุง ุงูุฃุฏูุงุช ุงููู ุจูุณุชุฎุฏููุง ูู ูุญูู ุจูุงูุงุช ููุจุฑูุฌ ูุงููุ ูุจูุฎููู ุชุนูู ููุฏ ุจูุนุฑู ููุฑุฃ ููููู ููุญูู ุงูุจูุงูุงุช.</div>

			<hr>
			<h3>1) ุงูุฏูุงู ุงูุฑูุงุถูุฉ ุงููุชูุฏูุฉ (ูุงุฆู <code>Math</code>)</h3>

			<p class="explain">
				ุงููุงุฆู ุงูุฌุงูุฒ <code>Math</code> ูู ุงูุฌุงูุง ุณูุฑูุจุช ุจูููุฑูู ุฃุฏูุงุช ุฑูุงุถูุฉ ุฌุงูุฒุฉ ููุนุชูุฏุฉ ุฏููููุง. ูู ุงููู ูุญุชุงุฌู ูู ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุนุดุงู ุชุนูู ุญุณุจุฉ ูุนููุฉ. **ูููุชูุง ุงูุฃุณุงุณูุฉ**: ุงูุชุนุงูู ุงูุขูู ูุงูุณุฑูุน ูุน ุงูุฃุฑูุงู ูุงููุณูุฑ.
			</p>

			<h4>ุฃ) ุงูุชูุฑูุจ: <code>Math.round()</code> ู <code>Math.floor()</code> (ุงูุฑุบู ูู ุงูุชุญูู ูู ุงููุณูุฑ)</h4>
			<p class="explain">
				ุฏู ุฏูุงู ุญุงุณูุฉ ูู ุฃู ูุธุงู ูุงูู ุฃู ุฅุญุตุงุฆู. **ุงูุฑุบู:** ุงูู <code>round</code> ูู ุงูุชูุฑูุจ ุงูุนุงุฏู ุงููู ุจูุณุชุฎุฏูู ูู ุญูุงุชูุง: ูู ุงููุณุฑ 0.5 ุฃู ุฃูุชุฑ ูุฑุจ ููููุ ููู ุฃูู ูุฑุจ ูุชุญุช. ููู ุงูู <code>floor</code> ุฏู ุฒู "ุงูุญุฏ ุงูุฃุฏูู": ุจุชููู ููุฑูู ูููุง ูุงูุช ูุณูุฑู ูุจูุฑุฉุ ุฏุงููุงู ุฎููู ูู ุงูุฑูู ุงูุตุญูุญ ุงููู ุชุญุชู.
			</p>
			<div class="code-analysis">
				<h5 style="margin-top:0; color:#00796b;">ุชุญููู ุงููุฑู ุจูู ุงูุชูุฑูุจ:</h5>
				<ul style="padding-right: 20px;">
					<li><strong style="color:#26a69a;"><code>Math.round(10.5)</code>:</strong> ุงููุณุฑ 0.5ุ ูุฐุง ููุฑุจ ููุฃุนูู. ุงููุงุชุฌ **11**.</li>
					<li><strong style="color:#00796b;"><code>Math.floor(10.5)</code>:</strong> ุงูุชูุฑูุจ ููุฃุณูู ุฏุงุฆูุงู. ุงููุงุชุฌ **10**.</li>
					<li><strong style="color:#00796b;"><code>Math.floor(10.9)</code>:</strong> ุฑุบู ุฃู ุงููุณุฑ 0.9ุ ุงููุงุชุฌ ูุธู **10**.</li>
				</ul>
			</div>
			
			<pre class="display-code">// ุงููุซุงู ุงูุฃุตูู:
console.log(Math.round(10.5)); // 11 (ุชูุฑูุจ ูุฃูุฑุจ ุนุฏุฏ ุตุญูุญ)
console.log(Math.floor(10.5)); // 10 (ุชูุฑูุจ ููุฃุณูู ุฏุงุฆููุง)
</pre>
			<label>ุฃูุซูุฉ ูุฎุชููุฉ: ุงุณุชุฎุฏู <code>Math.round</code> ู <code>Math.floor</code> ุนูู 7.4 ู 7.6 ู 7.9.</label>
			<textarea id="editor_5a" class="editor">console.log(Math.round(7.4));
console.log(Math.round(7.6));
console.log(Math.floor(7.9));</textarea>
			<div class="controls">
				<button class="btn" onclick="runAndCompare('editor_5a','out_5a','ref_5a','sol_5a')">โถ ุชุดุบูู</button>
				<button class="btn ghost" onclick="toggleSolution('editor_5a', 'sol_5a', 'ref_5a')">๐ ุนุฑุถ ุงูุญู</button>
			</div>
			<div id="out_5a" class="output"></div>
			<pre id="sol_5a" class="solution">// ุงููุฑุฌุน: console.log(Math.round(7.4)); console.log(Math.round(7.6)); console.log(Math.floor(7.9));</pre>

			<h4>ุจ) ุชูููุฏ ูููุฉ ุนุดูุงุฆูุฉ: <code>Math.random()</code> (ุงูุฑุบู ูู ูุญุงูุงุฉ ุงูุญุธ)</h4>
			<p class="explain">
				ุฏุงูุฉ <code>Math.random()</code> ุจุชุฏููุง ุฑูู ุนุดุฑู ุนุดูุงุฆู ุจูู **0** (ุดุงูู) ู **1** (ุบูุฑ ุดุงูู). **ุงูุฑุบู:** ุฏู ุจุชุณุชุฎุฏู ูู ูู ุญุงุฌุฉ ูููุง ุนูุตุฑ ุญุธ ุฃู ุนุดูุงุฆูุฉ: ุณุญุจ ุฌุงุฆุฒุฉุ ุงุฎุชูุงุฑ ุตูุฑุฉ ุนุดูุงุฆูุฉ ูุนุฑุถูุงุ ุฃู ุญุชู ูุนูู ููุฏ ุณุฑู (Token) ููุชุฃููู.
			</p>
			<div class="code-analysis">
				<h5 style="margin-top:0; color:#00796b;">ุชุญููู ุงููุทุงู ุงูุนุดูุงุฆู:</h5>
				<ul style="padding-right: 20px;">
					<li>ุงูุฏุงูุฉ ุชูุฑุฌุน ุฑูู ูู ุงููุทุงู: **[0, 1)**.</li>
					<li>ูุนูู ูููู ูุทูุน **0.000001**ุ ููููู ูุทูุน **0.999999**.</li>
					<li>ูุณุชุญูู ูุทูุน **1** ุตุญูุญ.</li>
				</ul>
			</div>
			
			<pre class="display-code">// ุงููุซุงู ุงูุฃุตูู (ูู ูุฑุฉ ููุฏู ูุงุชุฌ ูุฎุชูู):
console.log(Math.random());	
console.log(Math.random());
console.log(Math.random());	
</pre>
			<label>ุงูุชุจ ุงูููุฏ ุงููู ูุทุจุน <code>Lucky today</code> ุฃู <code>Unlucky today</code> ุจูุงุกู ุนูู ูููุฉ ุนุดูุงุฆูุฉ (50/50).</label>
			<textarea id="editor_5b" class="editor">if (Math.random() < 0.5) {
	console.log("Lucky today");
} else {
	console.log("Unlucky today");
}
</textarea>
			<div class="controls">
				<button class="btn" onclick="runAndCompare('editor_5b','out_5b','ref_5b','sol_5b')">โถ ุชุดุบูู</button>
				<button class="btn ghost" onclick="toggleSolution('editor_5b', 'sol_5b', 'ref_5b')">๐ ุนุฑุถ ุงูุญู</button>
			</div>
			<div id="out_5b" class="output"></div>
			<pre id="sol_5b" class="solution">// ุงููุฑุฌุน: if (Math.random() < 0.5) { console.log("Lucky today"); } else { console.log("Unlucky today"); }</pre>

			<hr>
<h3>1) ุงูุฏูุงู ุงูุฑูุงุถูุฉ ุงููุชูุฏูุฉ (ูุงุฆู <code>Math</code>)</h3>

<p class="explain">
	ุงููุงุฆู ุงูุฌุงูุฒ <code>Math</code> ูู ุงูุฌุงูุง ุณูุฑูุจุช ุจูููุฑูู ุฃุฏูุงุช ุฑูุงุถูุฉ ุฌุงูุฒุฉ ููุนุชูุฏุฉ ุฏููููุง. ูู ุงููู ูุญุชุงุฌู ูู ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุนุดุงู ุชุนูู ุญุณุจุฉ ูุนููุฉ. **ูููุชูุง ุงูุฃุณุงุณูุฉ**: ุงูุชุนุงูู ุงูุขูู ูุงูุณุฑูุน ูุน ุงูุฃุฑูุงู ูุงููุณูุฑ.
</p>

<h4>ุฌ) ุฏูุฌ ุงูุฏูุงู: ุงูุญุตูู ุนูู ุฑูู ุตุญูุญ ุนุดูุงุฆู (ุงูุฑุบู ูู ุงูุฏูุฉ)</h4>
<p class="explain">
	ูุนุธู ุงูููุชุ ูุด ุจูุญุชุงุฌ ุฑูู ุนุดุฑูุ ุจูุญุชุงุฌ ุฑูู ุตุญูุญ ุนุดูุงุฆู ุถูู ูุทุงู ูุนูู (ุฒู ูุนุจุฉ ูุฑุฏ ูู 1 ูู 6). ููุง ุจูุนูู **ุฏูุฌ ููุฏูุงู** (Nesting Functions): ุจูุถุฑุจ ุงููุงุชุฌ ุงูุนุดูุงุฆู ูู ุงูุฑูู ุงููุทููุจุ ูุจุนุฏูู ุจูุณุชุฎุฏู <code>Math.floor()</code> ุนุดุงู ูุถูู ุฅูู ูุจูู ุฑูู ุตุญูุญ.
</p>
<div class="code-analysis">
	<h5 style="margin-top:0; color:#00796b;">๐ ุชุญููู ุนูููุฉ ุชูููุฏ ุงูุฑูู ุงูุตุญูุญ ุงูุนุดูุงุฆู (ูุทุงู 1 ุฅูู 6):</h5>
	<ol style="padding-right: 20px; line-height: 1.6;">
		<li><strong style="color:#00796b;">ุงูุฃุณุงุณ <code>Math.random()</code>:</strong> ูุนุทู [0.0, 1.0)</li>
		<li><strong style="color:#26a69a;">ุงูุถุฑุจ ูู 6:</strong> ููุณุน ุงููุทุงู ุฅูู [0.0, 6.0)</li>
		<li><strong style="color:#009688;">ุงูุชูุฑูุจ ููุฃุณูู <code>Math.floor()</code>:</strong> ูุฌุจุฑ ุงููุทุงู ุนูู ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ [0, 5]</li>
		<li><strong style="color:#dc3545;">ุงูุฌูุน (+ 1):</strong> ูุฒุญุฒุญ ุงููุทุงู ุฅูู ุงูุฃุนูู ููุตุจุญ [1, 6] (ุงููุงุชุฌ ุงููุทููุจ ูุญุฌุฑ ุงููุฑุฏ)</li>
	</ol>
</div>
<pre class="display-code">// ุงููุซุงู ุงูุฃุตูู: ุฑูู ุตุญูุญ ุนุดูุงุฆู ุจูู 0 ู 9
console.log(Math.floor(Math.random() * 10));	
// ุงูุดุฑุญ:
// 1. Math.random() ูุนุทู [0, 1)
// 2. * 10 ูุนุทู [0, 10) (ูุซูุงู 9.999)
// 3. Math.floor() ูุนุทู [0, 9] (ุฑูู ุตุญูุญ ุฏุงุฆููุง)
</pre>
<label>ูุซุงู 1: ุฑูู ุตุญูุญ ุนุดูุงุฆู ุจูู 0 ู 5. <span style="color:var(--primary); font-weight:700;">(ุนุฏูู ุงูููุฏ)</span></label>
<textarea id="editor_5c1" class="editor">console.log(Math.floor(Math.random() * 6));</textarea>
<label>ูุซุงู 2: ุฑูู ุตุญูุญ ุนุดูุงุฆู ุจูู 1 ู 6 (ุฒู ุญุฌุฑ ุงููุฑุฏ). <span style="color:var(--primary); font-weight:700;">(ุนุฏูู ุงูููุฏ)</span></label>
<textarea id="editor_5c2" class="editor">console.log(Math.floor(Math.random() * 6) + 1);</textarea>
<div class="controls">
	<button class="btn" onclick="runAndCompare('editor_5c1','out_5c1','ref_5c1','sol_5c1')">โถ ุชุดุบูู (0-5)</button>
	<button class="btn" onclick="runAndCompare('editor_5c2','out_5c2','ref_5c2','sol_5c2')">โถ ุชุดุบูู (1-6)</button>
</div>
<div id="out_5c1" class="output"></div>
<div id="out_5c2" class="output"></div>
<pre id="sol_5c1" class="solution">// ุงููุฑุฌุน 1: console.log(Math.floor(Math.random() * 6));</pre>
<pre id="sol_5c2" class="solution">// ุงููุฑุฌุน 2: console.log(Math.floor(Math.random() * 6) + 1);</pre>

<hr>
			<h3>2) ุฃููุงุน ุงูุจูุงูุงุช ูู JavaScript</h3>

			<p class="explain">
				ูู ูุนูููุฉ ุจุชุชุนุงูู ูุนุงูุง ูู ุงูููุฏ ูููุง "ููุน". ุชุญุฏูุฏ ุงูููุน ุฏู ูู ุงููู ุจูุฎูู ุงูุฌุงูุง ุณูุฑูุจุช ุชุนุฑู ุชุนูู ุนูููุฉ ุฌูุน (+)ุ ูู ูู ูุชุฌูุน ุฃุฑูุงู (5 + 5 = 10) ููุง ูุชูุตู ูุตูุต ("Hi" + "Ahmed" = "Hi Ahmed").
			</p>
			<h4>ุฃ) ุงูุฃููุงุน ุงูุฃุณุงุณูุฉ ูููููุฉ ุงูุชุญูู ูููุง (<code>typeof</code>)</h4>
			<p class="explain">
				ููู ุฃููุงุน ุฑุฆูุณูุฉ ูุงุฒู ุชููู ุนุงุฑููุง ุฒู (Number, String, Boolean, Null, Undefined). ุนุดุงู ุชุนุฑู ุฃู ูุชุบูุฑ ุชุจุน ุฃู ุนุงุฆูุฉุ ุจุชุณุชุฎุฏู ุงููููุฉ ุงูููุชุงุญูุฉ <code>typeof</code>. **ุงูุฑุบู:** ุชุฎูู ุงูู <code>typeof</code> ุฏู ุฒู ุฌูุงุฒ ุจูุนูู ุชุญููู ุฏู ูููุชุบูุฑ ุนุดุงู ูุนุฑู ูู ูู ูุตููุฉ ุฅูู ุนุดุงู ููุฏุฑ ูุชุนุงูู ูุนุงู ุตุญ.
			</p>

			<pre class="display-code">// ุงููุฑุฌุน: ูุนุฑูุฉ ููุน ุงูุจูุงูุงุช
console.log(typeof 42); // "number"
console.log(typeof "Campus"); // "string"
console.log(typeof true); // "boolean"
console.log(typeof [1, 2, 3]); // "object" (ุงููุตูููุงุช ูุงุฆูุงุช)
</pre>
			<label>ุงุทุจุน ููุน ุงูุจูุงูุงุช ูููุชุบูุฑุงุช ุงูุชุงููุฉ: <code>9.5</code>ุ <code>"Cairo"</code>ุ <code>false</code>. (ูุฌุจ ุงุณุชุฎุฏุงู <code>console.log()</code>)</label>
			<textarea id="editor_5d" class="editor">console.log(typeof 9.5);
console.log(typeof "Cairo");
console.log(typeof false);</textarea>
			<div class="controls">
				<button class="btn" onclick="runAndCompare('editor_5d','out_5d','ref_5d','sol_5d')">โถ ุชุดุบูู</button>
				<button class="btn ghost" onclick="toggleSolution('editor_5d', 'sol_5d', 'ref_5d')">๐ ุนุฑุถ ุงูุญู</button>
			</div>
			<div id="out_5d" class="output"></div>
			<pre id="sol_5d" class="solution">// ุงููุฑุฌุน: console.log(typeof 9.5); console.log(typeof "Cairo"); console.log(typeof false);</pre>

			<h4>ุจ) ุงูููุงุฑูุฉ ุงูุตุงุฑูุฉ ููุงุจู ุงูููุงุฑูุฉ ุงูุถุนููุฉ (<code>==</code> vs <code>===</code>)</h4>
			<p class="explain">
				ุฏู ูู ุฃุดูุฑ ุงูุฃุฎุทุงุก ุงููู ุจุชูุงุฌู ุงููุจุฑูุฌูู ุงููุจุชุฏุฆูู. **ุงูุฑุบู:** ุงูู <code>==</code> ููุงุฑูุฉ ูุชุณุงููุฉ (Loose): ุจุชุดูู ุงููููุฉ ุจุณุ ููู ููุช ููุน ุงูุจูุงูุงุช ูุฎุชูู (ุฒู ุฑูู ููุต)ุ ุจุชุญุงูู ูู ุชุนุฏู ุงูููุน ุจููุณูุง ุนุดุงู ุชุนุฑู ุชูุงุฑู. ุฃูุง ุงูู <code>===</code> ููู ููุงุฑูุฉ ุตุงุฑูุฉ (Strict): ุจุชุทูุจ ุชุทุงุจู **ุงููููุฉ ูุงูููุน ูุนุงู**ุ ูุฏู ุฏุงููุงู ุฃูุถู ุนุดุงู ุจูููู ุงูุฃุฎุทุงุก.
			</p>
			<div class="code-analysis">
				<h5 style="margin-top:0; color:#dc354f;">ุงูููุงุฑูุฉ ุงูุตุงุฑูุฉ (===) ูู ุงูุฃูุถู ุฏุงุฆููุง ูุชุฌูุจ ุงูุฃุฎุทุงุก.</h5>
				<ul style="padding-right: 20px;">
					<li>**<code>10 == "10"</code>:** ุชุนูุฏ <code>true</code> (ุตุญูุญ) ูุฃููุง ูุงุฑูุช ุงููููุฉ ููุท.</li>
					<li>**<code>10 === "10"</code>:** ุชุนูุฏ <code>false</code> (ุฎุงุทุฆ) ูุฃู ุงูููุนูู ูุฎุชูููู (<code>number</code> ู <code>string</code>).</li>
				</ul>
			</div>
			<pre class="display-code">// ุงููุฑุฌุน:
console.log(5 == "5"); // true (ูุชุณุงููุฉ)
console.log(5 === "5"); // false (ุตุงุฑูุฉ)
console.log(0 == false); // true (ูุชุณุงููุฉ)
console.log(0 === false); // false (ุตุงุฑูุฉ)
</pre>
			<label>ุฌุฑุจ ุงูููุงุฑูุงุช: <code>1 == true</code> ู <code>1 === true</code>. (ูุฌุจ ุงุณุชุฎุฏุงู <code>console.log()</code>)</label>
			<textarea id="editor_5e" class="editor">console.log(1 == true);
console.log(1 === true);</textarea>
			<div class="controls">
				<button class="btn" onclick="runAndCompare('editor_5e','out_5e','ref_5e','sol_5e')">โถ ุชุดุบูู</button>
				<button class="btn ghost" onclick="toggleSolution('editor_5e', 'sol_5e', 'ref_5e')">๐ ุนุฑุถ ุงูุญู</button>
			</div>
			<div id="out_5e" class="output"></div>
			<pre id="sol_5e" class="solution">// ุงููุฑุฌุน: console.log(1 == true); console.log(1 === true);</pre>

			<hr>
			<h3>3) ุงููุตูููุงุช (Arrays) ูุงูุชุนุงูู ูุน ุงูููุงุฆู</h3>

			<p class="explain">
				ุงููุตูููุฉ ูู ูุงุฆูุฉ ูุฑุชุจุฉ ุจุชุฎุฒู ูุฌููุนุฉ ูู ุงูููู ุชุญุช ุงุณู ูุงุญุฏ. ุจุฏู ูุง ุชุนูู ูุชุบูุฑ ููู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ (temp1, temp2, temp3...) ุจุชุนูู ูุตูููุฉ ูุงุญุฏุฉ ุจุชุฎุฒู ูู ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุฏู.
			</p>
			<h4>ุฃ) ูุชุงุจุฉ ุงููุตูููุฉุ ุงูุชุฑูููุ ูุงุณุชุฎุฑุงุฌ ุงูููู</h4>
			<p class="explain">
				**ูุชุงุจุฉ ุงููุตูููุฉ:** ุจูุณุชุฎุฏู ุงูุฃููุงุณ ุงููุฑุจุนุฉ <code>[]</code> ุฒู: <code>let myList = [ูููุฉ1, ูููุฉ2, ...]</code>. **ุงูุฑุบู ูู ุงูุชุฑููู:** ุฃูู ููุทุฉ ุนูู ุงูุฅุทูุงู: ุงููุตูููุฉ ุชุจุฏุฃ ูู ุงูุตูุฑ (Zero-based Indexing). ูุนูู ุงูุนูุตุฑ ุงูุฃูู ุฏุงุฆููุง ุฑููู 0.
			</p>
			<div class="code-analysis">
				<h5 style="margin-top:0; color:#00796b;">ุงููุตูููุฉ ุชุจุฏุฃ ูู ุงูููุฑุณ (Index) ุฑูู 0:</h5>
				<p style="font-size: 0.9em; margin-bottom: 5px;"><code>let tempList = [36, 36, 26, 27, 28, 33, 36];</code></p>
				<p style="font-size: 0.9em; font-family: monospace;">ุงูููุฑุณ: 0	1	2	3	4	5	6</p>
			</div>

			<pre class="display-code">// ุงููุฑุฌุน: ุงุณุชุฎุฑุงุฌ ุงูููู
let tempList = [36, 36, 26, 27, 28, 33, 36];
console.log(tempList[0]); // ุงููุงุชุฌ: 36 (ุฃูู ูููุฉ)
console.log(tempList[3]); // ุงููุงุชุฌ: 27
</pre>
			<label>ูู ุจุงุณุชุฎุฑุงุฌ ุงููููุฉ ุงูุชู ูู ุงูููุฑุณ ุฑูู 5. (ูุฌุจ ุงุณุชุฎุฏุงู <code>console.log()</code>)</label>
			<textarea id="editor_5f" class="editor">let tempList = [36, 36, 26, 27, 28, 33, 36];
console.log(tempList[5]);</textarea>
			<div class="controls">
				<button class="btn" onclick="runAndCompare('editor_5f','out_5f','ref_5f','sol_5f')">โถ ุชุดุบูู</button>
				<button class="btn ghost" onclick="toggleSolution('editor_5f', 'sol_5f', 'ref_5f')">๐ ุนุฑุถ ุงูุญู</button>
			</div>
			<div id="out_5f" class="output"></div>
			<pre id="sol_5f" class="solution">// ุงููุฑุฌุน: let tempList = [36, 36, 26, 27, 28, 33, 36]; console.log(tempList[5]);</pre>

			<h4>ุจ) ุงููุตูููุงุช ูุญููุฉ <code>for</code> (ุงูุชุญูู ูู ุฌููุน ุงูููู)</h4>
			<p class="explain">
				ุนุดุงู ุชุนูู ุฃู ุนูููุฉ ุนูู ูู ุงูููู ุงููู ูู ุงููุตูููุฉ (ุฒู ุญุณุงุจ ุงููุฌููุน ุฃู ุงููุชูุณุท)ุ ูุงุฒู ุชุณุชุฎุฏู ุญููุฉ <code>for</code>. **ุงูุฑุบู:** ุงูู <code>for</code> ุจุชุดุชุบู ูู "ูุงุณุญ ุถูุฆู". ุงูุนุฏุงุฏ <code>i</code> ุจููุฑ ุนูู ููุฑุณ ููุฑุณ (ูู 0 ูุขุฎุฑ ุฑูู) ููุฌูุจ ุงููููุฉ ุงููุฎุฒูุฉ ูู ุงูููุงู ุฏู.
			</p>
			<pre class="display-code">// ุงููุฑุฌุน: ุญุณุงุจ ุงููุฌููุน
let tempList = [36, 36, 26, 27, 28, 33, 36];
let total = 0;
for(let i = 0; i < 7; i++){
	total = total + tempList[i]; // ูู ููุฉ ุจุชุงุฎุฏ ูููุฉ ูู ุงููุตูููุฉ
}
console.log(total); // ุงููุงุชุฌ: 222
</pre>
			<label>ุงูุชุจ ุงูููุฏ ุงูุฐู ูุญุณุจ ุงููุฌููุน ุซู ูุทุจุน ุงููุงุชุฌ. (ูุฌุจ ุงุณุชุฎุฏุงู <code>console.log()</code> ูู ุงูููุงูุฉ)</label>
			<textarea id="editor_5g" class="editor">let tempList = [36, 36, 26, 27, 28, 33, 36];
let total = 0;
for(let i = 0; i < 7; i++){
	total = total + tempList[i];
}
console.log(total);</textarea>
			<div class="controls">
				<button class="btn" onclick="runAndCompare('editor_5g','out_5g','ref_5g','sol_5g')">โถ ุชุดุบูู</button>
				<button class="btn ghost" onclick="toggleSolution('editor_5g', 'sol_5g', 'ref_5g')">๐ ุนุฑุถ ุงูุญู</button>
			</div>
			<div id="out_5g" class="output"></div>
			<pre id="sol_5g" class="solution">// ุงููุฑุฌุน: let tempList = [36, 36, 26, 27, 28, 33, 36]; let total = 0; for(let i = 0; i < 7; i++){ total = total + tempList[i]; } console.log(total);</pre>

			<h4>ุฌ) ุทูู ุงููุตูููุฉ (<code>.length</code>) - ุงููุฑููุฉ ุงูุงุญุชุฑุงููุฉ</h4>
			<p class="explain">
				ุจุฏู ูุง ุชูุชุจ ุฑูู ุซุงุจุช ูุนุฏุฏ ุงูุชูุฑุงุฑุงุช (ุฒู <code>i < 7</code>)ุ ูุงุฒู ุชุณุชุฎุฏู ุฎุงุตูุฉ <code>.length</code>. **ุงูุฑุบู:** ุฏู ุงูุญุฑูุฉ ุงูุงุญุชุฑุงููุฉ. ูู ุฒูุฏุช ุฃู ููุตุช ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ูู ุงููุตูููุฉุ ูุด ูุชุญุชุงุฌ ุชุนุฏู ุงูู <code>for loop</code> ุฎุงูุตุ ููู ูุชุชููู ุฃูุชููุงุชูู.
			</p>
			<pre class="display-code">// ุงููุฑุฌุน: ุงุณุชุฎุฏุงู .length ูููุฑููุฉ
let tempList = [36, 36, 26, 27, 28, 33, 36, 30, 28, 29]; // 10 ุนูุงุตุฑ
console.log("ุงูุทูู: " + tempList.length); // ุงููุงุชุฌ: 10
let total = 0;
for(let i = 0; i < tempList.length; i++){ // ุงูุดุฑุท ุฃุตุจุญ ูุฑููุง
	total = total + tempList[i];	
}
console.log("ุงููุฌููุน ุงูููู: " + total);
</pre>
			<label>ุงุณุชุฎุฏู <code>tempList.length</code> ูู ุญููุฉ <code>for</code> ูุทุจุงุนุฉ ูู ุนูุตุฑ ูู ุงููุตูููุฉ. (ูุฌุจ ุงุณุชุฎุฏุงู <code>console.log()</code>)</label>
			<textarea id="editor_5h" class="editor">let tempList = [36, 36, 26, 27, 28, 33, 36, 30, 28, 29];
for(let i = 0; i < tempList.length; i++){	
	console.log("ุงููููุฉ ูู ุงูููุฑุณ " + i + ": " + tempList[i]);
}</textarea>
			<div class="controls">
				<button class="btn" onclick="runAndCompare('editor_5h','out_5h','ref_5h','sol_5h')">โถ ุชุดุบูู</button>
				<button class="btn ghost" onclick="toggleSolution('editor_5h', 'sol_5h', 'ref_5h')">๐ ุนุฑุถ ุงูุญู</button>
			</div>
			<div id="out_5h" class="output"></div>
			<pre id="sol_5h" class="solution">// ุงููุฑุฌุน: let tempList = [36, 36, 26, 27, 28, 33, 36, 30, 28, 29]; for(let i = 0; i < tempList.length; i++){ console.log("ุงููููุฉ ูู ุงูููุฑุณ " + i + ": " + tempList[i]); }</pre>

			<hr>
			<h3>๐ ุฎูุงุตุฉ ุงูุฏุฑุณ ุงูุฎุงูุณ</h3>
			<div class="summary">
				<ul style="direction:rtl; text-align:right; line-height:1.8; margin:0; padding-right:10px;">
					<li>**<code>Math.floor()</code> ู <code>Math.round()</code>:** ุฃุฏูุงุชู ููุชุญูู ูู ุงููุณูุฑ ูุงูุชูุฑูุจ ุงูุขูู.</li>
					<li>**<code>Math.random()</code>:** ูุฅูุดุงุก ุนูุตุฑ ุนุดูุงุฆูุ ููููู ุฏูุฌู ูุน <code>floor</code> ูุฅูุดุงุก ุฃุฑูุงู ุตุญูุญุฉ ุถูู ูุทุงู.</li>
					<li>**ุฃููุงุน ุงูุจูุงูุงุช:** ุถุฑูุฑูุฉ ูุชุนุฑู ููู ุชุชุนุงูู ูุน ุงููููุฉ (ูู ูู ุฑูู ุฃู ูุตุ).</li>
					<li>**ุงูููุงุฑูุฉ <code>===</code>:** ูู ุงููุงุนุฏุฉ ุงูุฐูุจูุฉุ ูุงุฑู ุงููููุฉ ูุงูููุน ูุนูุง ูุชุฌูุจ ุงูุฃุฎุทุงุก ุงูุบุงูุถุฉ.</li>
					<li>**ุงููุตูููุฉ (Array):** ูู ูุงุฆูุฉ ูุฑุชุจุฉุ ุชููุชุจ ุฏุงุฎู <code>[]</code>ุ ูุชุณุชุฎุฏู ูุชุฎุฒูู ูุฌููุนุฉ ูู ุงูุจูุงูุงุช ุชุญุช ุงุณู ูุงุญุฏ.</li>
					<li>**ุงูุชุฑููู ุงูุตูุฑู:** ุฏุงุฆููุง ุชุฐูุฑ ุฃู ุงูุนูุตุฑ ุงูุฃูู ูู ุงููุตูููุฉ ูู ุงูููุฑุณ ุฑูู **0**.</li>
					<li>**<code>.length</code>:** ุงุณุชุฎุฏูู ุฏุงุฆููุง ูู ุญููุฉ <code>for</code> ูุชุฌุนู ุงูููุฏ ูุฑูุงู ููุง ูุนุชูุฏ ุนูู ุฃุฑูุงู ุซุงุจุชุฉ.</li>
				</ul>
			</div>

			<hr>
			<div style="text-align:center; margin-top:12px;">
				<button class="btn" onclick="location.href='quiz5.html'">ุงุฎุชุจุฑ ููุณู</button>
			</div>

			<div class="navs">
    <button class="btn" onclick="location.href='lesson4.html'">โฌ๏ธ ุงูุฏุฑุณ ุงูุฑุงุจุน</button>
    <button class="btn" onclick="location.href='index.html'">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</button>
    <button class="btn" onclick="location.href='lesson6.html'">ุงูุฏุฑุณ ุงูุณุงุฏุณ โก๏ธ</button>
</div>

			<div class="footer">ุชุตููู ุจูุงุณุทู <strong>Ahmed Ezzat</strong> โค๏ธ</div>

		</div>
	</div>

<script>
/* ========================================================
   SCRIPT ูุตุญุญ ููุญุฏุซ ููุงูุฉ ุฃูุซูุฉ ุงูุฏุฑุณ ุงูุฎุงูุณ (ุงูุฅุตุฏุงุฑ ุงูููุงุฆู ูุงูููุงุฆู)
   ูุดูู: ุงูุฏูุงู ุงูุฑูุงุถูุฉ (Math)ุ ุฃููุงุน ุงูุจูุงูุงุชุ ูุงููุตูููุงุช (Arrays)
   ุงูุชุญุฏูุซ: ุชุนุฒูุฒ ูุฑููุฉ ุงูููุงุฑูุฉ ูุฅุถุงูุฉ ุงุณุชุซูุงุก ุฎุงุต ููู Math.random()
   ======================================================== */

/* ----- ุชุฎุฒูู ุงูุฃููุงุฏ ุงููุฑุฌุนูุฉ ูู ูุชุบูุฑุงุช Global ----- */
window.REF_CODES = {
    // Example 1: Math Functions
    'ref_5a': `console.log(Math.round(7.4));\nconsole.log(Math.round(7.6));\nconsole.log(Math.floor(7.9));`,
    'ref_5b': `if (Math.random() < 0.5) {\n console.log("Lucky today");\n} else {\n console.log("Unlucky today");\n}`,
    'ref_5c1': `console.log(Math.floor(Math.random() * 6));`, // 0-5
    'ref_5c2': `console.log(Math.floor(Math.random() * 6) + 1);`, // 1-6

    // Example 2: Data Types (typeof, ===)
    'ref_5d': `console.log(typeof 9.5);\nconsole.log(typeof "Cairo");\nconsole.log(typeof false);`,
    'ref_5e': `console.log(1 == true);\nconsole.log(1 === true);`,

    // Example 3: Arrays and Loops
    'ref_5f': `let tempList = [36, 36, 26, 27, 28, 33, 36];\nconsole.log(tempList[5]);`,
    'ref_5g': `let tempList = [36, 36, 26, 27, 28, 33, 36];\nlet total = 0;\nfor(let i = 0; i < 7; i++){\n   total = total + tempList[i];\n}\nconsole.log(total);`,
    'ref_5h': `let tempList = [36, 36, 26, 27, 28, 33, 36, 30, 28, 29];\nfor(let i = 0; i < tempList.length; i++){\n   console.log("ุงููููุฉ ูู ุงูููุฑุณ " + i + ": " + tempList[i]);\n}`,
};

// ูุชุบูุฑ ุฌุฏูุฏ ูุชุฎุฒูู ุญุงูุฉ ุตุญุฉ ุงูุญู ููู ุชูุฑูู (ุฌุฏูู Hash Map)
window.SOLUTION_STATUS = {}; 


/* ----- ุฅุนุฏุงุฏุงุช ุณููู ุงููุญุต (ููุง ูู) ----- */
const REQUIRE_SEMICOLON = false; 
const ALLOW_LOOSE_SYNTAX = true; 
window._EDU_SETTINGS = { REQUIRE_SEMICOLON: REQUIRE_SEMICOLON, ALLOW_LOOSE_SYNTAX: ALLOW_LOOSE_SYNTAX };

/* ----- ูุณุงุนุฏุฉ: ุฅุฒุงูุฉ ุงูุชุนูููุงุช (ููุง ูู) ----- */
function removeComments(code) {
    let result = code.replace(/\/\*[\s\S]*?\*\//g, ''); 
    result = result.replace(/\/\/.*$/gm, ''); 
    return result;
}
window.removeComments = removeComments;

/* ----- ูุญูู ุงูุฃุฎุทุงุก ุงูุจููููุฉ (ููุง ูู) ----- */
function analyzeCodeErrors(code) {
    const lines = code.split('\n');
    const stack = [];
    
    for (let i = 0; i < lines.length; i++) {
        const raw = lines[i];
        const noComment = raw.replace(/\/\*[\s\S]*?\*\//g,'').replace(/\/\/.*$/g,'').trim(); 
        if (noComment === '') continue;

        let inSingleQuote = false;
        let inDoubleQuote = false;
        for (let j = 0; j < raw.length; j++) {
            const ch = raw[j];

            if (ch === "'" && !inDoubleQuote) {
                inSingleQuote = !inSingleQuote;
                continue;
            }
            if (ch === '"' && !inSingleQuote) {
                inDoubleQuote = !inDoubleQuote;
                continue;
            }

            if (inSingleQuote || inDoubleQuote) continue;

            if (ch === '(' || ch === '{' || ch === '[') {
                stack.push({ch, i});
            } else if (ch === ')' || ch === '}' || ch === ']') {
                const last = stack.pop();
                if (!last) {
                    return { valid:false, line: i+1, message: 'โ ููุณ ุฅุบูุงู ุจุฏูู ููุณ ูุชุญ ูุจูู.' };
                }
                if ((ch === ')' && last.ch !== '(') ||
                    (ch === '}' && last.ch !== '{') ||
                    (ch === ']' && last.ch !== '[')) {
                    return { valid:false, line: i+1, message: 'โ ุงูุฃููุงุณ ุบูุฑ ูุชุทุงุจูุฉ.' };
                }
            }
        }
        
        if (inSingleQuote || inDoubleQuote) {
            return { valid:false, line: i+1, message: 'โ ุนูุงูุฉ ุงูุชุจุงุณ ููุฑุฏุฉ ุฃู ูุฒุฏูุฌุฉ ุบูุฑ ูุบููุฉ ูู ุงูุณุทุฑ.' };
        }
    }

    if (stack.length > 0) {
        const last = stack[stack.length-1];
        return { valid:false, line: last.i+1, message: `โ ูู ุฃููุงุณ ููุชูุญุฉ ุบูุฑ ูููููุฉ. (ูุชุญ ุนูุฏ ุณุทุฑ ${last.i+1})` };
    }

    return { valid:true };
}
window.analyzeCodeErrors = analyzeCodeErrors;

/* ----- ููุงุนุฏ ุชุญูู ุฎุงุตุฉ ุจุงูุชูุฑูู (ููุญุฏููุซุฉ: ุชู ุฅุถุงูุฉ ูุฑููุฉ ููุญุต ุงูุฏูุงู ุงูุนุดูุงุฆูุฉ) ----- */
function validateCode(inputId, code) {
    const m = inputId.match(/(\d+)([a-zA-Z]?)$/);
    const base = m ? m[1] : null;
    const cleaned = removeComments(code).trim();
    const hasConsoleLog = /console\.log\s*\(/.test(code);
    
    if (!base) return { valid:true };
    
    // ูู ุงูุฃูุซูุฉ ูู ุงูุฏุฑุณ ุงูุฎุงูุณ ุชุญุชุงุฌ console.log ุจุงุณุชุซูุงุก 5b
    if (!hasConsoleLog && inputId !== 'editor_5b') {
        return { valid:false, message: "โ ูุงุฒู ุชุณุชุฎุฏู console.log() ูุนุฑุถ ุงููุชูุฌุฉ." };
    }
    
    switch (base) {
        case '5': // Math Functions & Data Types
             // ุงูุฌุฒุก ุงูุฎุงุต ุจุฏูุงู Math
            if (inputId.startsWith('editor_5a')) {
                if (!/Math\.(round|floor)/i.test(cleaned)) {
                    return { valid:false, message: "โ ูุฐุง ุงูุฌุฒุก ูุฑูุฒ ุนูู ุงุณุชุฎุฏุงู ุฏูุงู Math ููุชูุฑูุจ (round ุฃู floor)." };
                }
            }
            // ุงูุชุญูู ุงูุฎุงุต ุจุชูููุฏ ุงูุฑูู ุงูุนุดูุงุฆู 5c1 ู 5c2 (ุชู ุฅุถุงูุฉ ูุญุต ุฃูุซุฑ ุฏูุฉ ูู Math.floor)
            if (inputId.startsWith('editor_5c')) {
                if (!/Math\.floor\s*\(Math\.random\s*\*\s*\d+(\s*\+\s*\d+)?\s*\)/i.test(cleaned)) {
                    return { valid:false, message: "โ ูุฌุจ ุฏูุฌ Math.floor ูุน Math.random ููุถุงุนูุฉ ุงููุทุงู ุจุดูู ุตุญูุญ." };
                }
            }
            // ุงูุฌุฒุก ุงูุฎุงุต ุจู Math.random ู if
            if (inputId.startsWith('editor_5b')) {
                if (!/Math\.random\s*\(\)/i.test(cleaned)) {
                    return { valid:false, message: "โ ูุฌุจ ุงุณุชุฎุฏุงู Math.random() ูุชูููุฏ ุงููููุฉ ุงูุนุดูุงุฆูุฉ." };
                }
                // ูุชุญูู ููุท ูู ูุฌูุฏ if (ุงูุณูุงุญ ุจุงููุชุงุจุฉ ุจุฃุณููุจ ูุฎุชูู ุทุงููุง logic ุตุญูุญ)
                if (!/if\s*\(.*\)\s*\{/i.test(cleaned) && !/if\s*\(.*\)\s*console\.log/i.test(cleaned)) {
                    return { valid:false, message: "โ ูุฌุจ ุงุณุชุฎุฏุงู ุดุฑุท if ููููุงุฑูุฉ ุจูู ุงููููุฉ ุงูุนุดูุงุฆูุฉ ู 0.5." };
                }
            }
            // ุงูุฌุฒุก ุงูุฎุงุต ุจู typeof ู ุงูููุงุฑูุฉ
            if (inputId.startsWith('editor_5d')) {
                if (!/typeof\s+/i.test(cleaned)) {
                    return { valid:false, message: "โ ูุฐุง ุงูุชูุฑูู ูุฑูุฒ ุนูู ุงุณุชุฎุฏุงู ูููุฉ typeof ููุนุฑูุฉ ููุน ุงูุจูุงูุงุช." };
                }
            }
            if (inputId.startsWith('editor_5e')) {
                if (!/(===|==)/.test(cleaned)) {
                    return { valid:false, message: "โ ูุฐุง ุงูุชูุฑูู ูุฑูุฒ ุนูู ุงูููุงุฑูุฉ ุจุงุณุชุฎุฏุงู == ู ===." };
                }
            }
            // ุงูุฌุฒุก ุงูุฎุงุต ุจุงููุตูููุงุช
            if (inputId.startsWith('editor_5f')) {
                if (!/tempList\[5\]/.test(cleaned)) {
                    return { valid:false, message: "โ ูุฌุจ ุงุณุชุฎุฑุงุฌ ุงููููุฉ ุจุงุณุชุฎุฏุงู ุงุณู ุงููุตูููุฉ ูุงูููุฑุณ: tempList[5]." };
                }
            }
            if (inputId.startsWith('editor_5g') || inputId.startsWith('editor_5h')) {
                if (!/for\s*\(.*\)/i.test(cleaned)) {
                    return { valid:false, message: "โ ูุฐุง ุงูุชูุฑูู ูุฑูุฒ ุนูู ุงุณุชุฎุฏุงู ุญููุฉ for ูุน ุงููุตูููุงุช." };
                }
                if (inputId.startsWith('editor_5h') && !/\.length/i.test(cleaned)) {
                    return { valid:false, message: "โ ุงุณุชุฎุฏู ุงูุฎุงุตูุฉ .length ูู ุดุฑุท ุญููุฉ for ูุฒูุงุฏุฉ ูุฑููุฉ ุงูููุฏ." };
                }
            }
            break;
        default:
            break;
    }
    return { valid:true };
}
window.validateCode = validateCode;

/* ----- ุชูููุฐ ุงูููุฏ ูุงูุชูุงุท console.log + ุฃุฎุทุงุก ุงูุชูููุฐ (ุญูุงูุฉ ูู ุงูู Infinite Loop) (ููุง ูู) ----- */
function executeAndCapture(codeStr){
    const logs = [];
    const origConsole = window.console.log; 
    const timeoutDuration = 3000; // 3 ุซูุงูู ูุญุฏ ุฃูุตู ููุชูููุฐ
    let error = null;

    window.console.log = function(...args){
        const line = args.map(a=>{
            if (typeof a === 'object' && a !== null) {
                try { return JSON.stringify(a, null, 2); } catch(e){ return String(a); } 
            }
            return String(a);
        }).join(' ');
        logs.push(line);
        try { origConsole.apply(window.console, args); } catch(e){}
    };

    const startTime = Date.now(); 

    try {
        const codeToExecute = `'use strict';\n${codeStr}`;
        const fn = new Function(codeToExecute);
        
        let isTimeout = false;
        const runLoop = setTimeout(() => {
            isTimeout = true;
            // ูุง ูููู ุฅููุงู ุชูููุฐ ุงูุฏุงูุฉ (fn()) ุจุดูู ูุจุงุดุฑ ูู ููุง
        }, timeoutDuration);

        fn(); // ุชูููุฐ ุงูููุฏ ูุนูููุง

        clearTimeout(runLoop); 

        // ูุญุต ุฅุถุงูู ูููุช ุงูุชูููุฐ ุจุนุฏ ุงูุงูุชูุงุก
        if (Date.now() - startTime > timeoutDuration || isTimeout) {
            error = { msg: "โ ุชู ุฅููุงู ุงูุชูููุฐ! ุงูููุฏ ุงุณุชุบุฑู ููุชูุง ุทูููุงู ุฌุฏูุง (ุฑุจูุง Infinite Loop).", line: null };
            // ููุณุญ ุฃู logs ุชู ุชุณุฌูููุง ุฅุฐุง ูุงู ุงูุณุจุจ ูู Timeout
            logs.length = 0; 
        }

    } catch (err) {
        let ln = null;
        if (err && err.stack) {
            const lines = err.stack.split('\n');
            for (let l of lines){
                let m = l.match(/<anonymous>:(\d+):\d+/) || l.match(/new Function:(\d+):\d+/);
                if (m && m[1]) { 
                    const foundLine = Number(m[1]) - 1; 
                    if(foundLine > 0) ln = foundLine; 
                    break; 
                }
            }
        }
        let msg = err && err.message ? err.message : String(err);
        msg = msg.replace(/\n/g,' ').replace(/\s+/g,' ').trim();
        error = { msg, line: ln };
    } finally {
        window.console.log = origConsole;
    }
    return { logs, error };
}
window.executeAndCapture = executeAndCapture;

/* ----- ูุณุงุนุฏุฉ: ููุงุฑูุฉ ุฃูู ุณุทุฑ ูุฎุชูู (ููุง ูู) ----- */
function firstDiffLine(expected, actual){
    const exp = expected.split('\n');
    const act = actual.split('\n');
    const max = Math.max(exp.length, act.length);
    for (let i=0;i<max;i++){
        const e = (exp[i]||'').trim(); 
        const a = (act[i]||'').trim();
        if (e !== a) return i+1;
    }
    return null;
}
window.firstDiffLine = firstDiffLine;

/* ----- ุชุธููู ุณุทุฑ ุงูุฎุทุฃ ุฏุงุฎู textarea (ููุง ูู) ----- */
function highlightErrorLine(textarea, lineNumber) {
    try {
        textarea.classList.remove('highlight-error');
        if (!lineNumber || lineNumber < 1) return;
        const lines = textarea.value.split('\n');
        const safeLine = Math.min(lineNumber, lines.length);
        let start = 0;
        for(let i = 0; i < safeLine - 1; i++){
            start += lines[i].length + 1; 
        }
        
        const end = start + (lines[safeLine - 1] ? lines[safeLine - 1].length : 0);
        
        textarea.focus();
        if (textarea.setSelectionRange) textarea.setSelectionRange(start, end);
        textarea.classList.add('highlight-error');
    } catch(e){}
}
window.highlightErrorLine = highlightErrorLine;


/* ----- ุงูุฏุงูุฉ ุงูุฃุณุงุณูุฉ: ุชุดุบููุ ุชุญูููุ ุชูููุฐุ ููุงุฑูุฉ (ููุญุณูููุฉ: ุฅุถุงูุฉ ุงุณุชุซูุงุก ุงูุนุดูุงุฆูุฉ) ----- */
function runAndCompare(editorId, outId, refCodeId, solId){
    const textarea = document.getElementById(editorId);
    const outEl = document.getElementById(outId);
    const expectedCode = window.REF_CODES[refCodeId]; 
    const currentCode = textarea.value; 

    if (!textarea || !outEl || !expectedCode) return;
    
    // ูุถู ุญุงูุฉ ุงูุฎุทุฃ ูุงูุฅุฎุฑุงุฌ
    textarea.classList.remove('highlight-error');
    outEl.classList.remove('error');
    outEl.textContent = '... ุฌุงุฑู ุงูุชูููุฐ ูุงูุชุญููู ...';

    const code = currentCode || '';
    if (!code.trim()) {
        outEl.textContent = 'โ๏ธ ุงูุชุจ ุงูููุฏ ูุจู ุงูุถุบุท ุนูู ุชุดุบูู.';
        window.SOLUTION_STATUS[solId] = null; 
        return;
    }

    // 1) ุชุญููู ุจูููู ููุฃุฎุทุงุก
    const analysis = analyzeCodeErrors(code);
    if (!analysis.valid) {
        outEl.classList.add('error');
        outEl.textContent = `${analysis.message}\n๐ ุงูุณุทุฑ ุฑูู: ${analysis.line || '?'}`;
        highlightErrorLine(textarea, analysis.line || 1);
        window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode };
        return;
    }

    // 2) ุชุญูู ุญุณุจ ูุชุทูุจุงุช ุงููุซุงู
    const validation = validateCode(editorId, code);
    if (!validation.valid) {
        outEl.classList.add('error');
        outEl.textContent = validation.message;
        window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode };
        return;
    }

    // 3) ุชูููุฐ ููุฏ ุงูุทุงูุจ
    const studentRes = executeAndCapture(code);
    if (studentRes.error) {
        outEl.classList.add('error');
        const ln = studentRes.error.line ? `ุ ุชูุฑูุจูุง ุนูุฏ ุงูุณุทุฑ ${studentRes.error.line}` : '';
        outEl.textContent = `โ ููู ุฎุทุฃ ููุช ุงูุชูููุฐ: ${studentRes.error.msg}${ln}\n(ุงูุฎุทุฃ ูู ููุฏู)`;
        if (studentRes.error.line) highlightErrorLine(textarea, studentRes.error.line);
        window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode };
        return;
    }

    // 4) ุชูููุฐ ุงูุญู ุงููุฑุฌุนู (ูุง ุญุงุฌุฉ ูุชูููุฐู ูู ุงูุฃูุซูุฉ ุงูุนุดูุงุฆูุฉ)
    const isRandomExample = editorId === 'editor_5c1' || editorId === 'editor_5c2';
    
    let expectedRes = { logs: [], error: null };
    if(!isRandomExample) {
        try {
            expectedRes = executeAndCapture(expectedCode);
            if (expectedRes.error) {
                outEl.classList.add('error');
                outEl.textContent = `โ ูู ูุดููุฉ ูู ููุฏ ุงูุญู ุงููุฑุฌุนู: ${expectedRes.error.msg}`;
                window.SOLUTION_STATUS[solId] = null; 
                return;
            }
        } catch(e){
            outEl.classList.add('error');
            outEl.textContent = `โ ุฎุทุฃ ุฏุงุฎูู ุฃุซูุงุก ุชูููุฐ ุงูุญู ุงููุฑุฌุนู: ${e.message || e}`;
            window.SOLUTION_STATUS[solId] = null; 
            return;
        }
    }


    const studentText = (studentRes.logs || []).join('\n');
    const expectedText = (expectedRes.logs || []).join('\n');

    // *** ุชุนุฒูุฒ ูุฑููุฉ ุงูููุงุฑูุฉ ***
    const sNorm = studentText.split('\n').map(l => l.trim().replace(/[ \t]+/g, ' ')).filter(l => l !== '').join('\n');
    const eNorm = expectedText.split('\n').map(l => l.trim().replace(/[ \t]+/g, ' ')).filter(l => l !== '').join('\n');
    
    // ุฅุฒุงูุฉ ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ ูู ุงููุชูุฌุฉ ุงููุนุฑูุถุฉ ููุทุงูุจ (ููุนุฑุถ ููุท)
    const sRawNorm = studentText.replace(/[ \t]+/g, ' ').trim(); 
    
    if (!studentText) {
        outEl.textContent = 'โ ูููุฐ ุงูููุฏ ููู ูููุด console.log ูุทุจูุน. ูู ุงูููุฑูุถ ูููู ูู ุฅุฎุฑุงุฌ ุงุณุชุฎุฏู console.log().';
    } else {
        outEl.textContent = sRawNorm; // ูุนุฑุถ ุงููุชูุฌุฉ ููุทุงูุจ ุจุดูู ูุธูู
    }
    
    // 5) ููุงุฑูุฉ ุงููุชุงุฆุฌ ูุชุญุฏูุซ ุญุงูุฉ ุงูุญู (SOLUTION_STATUS)
    
    if (isRandomExample) {
        // ุงูุงุณุชุซูุงุก ุงูุฎุงุต ุจุงูุชูุงุฑูู ุงูุนุดูุงุฆูุฉ 
        const logs = studentRes.logs.filter(l => l.trim() !== '');
        const allAreNumbers = logs.every(l => !isNaN(Number(l)));
        
        if (allAreNumbers && logs.length > 0) {
            // ุงูููุฏ ูุนูู ูููุฎุฑุฌ ุฃุฑูุงููุง (ููู ุงูุดุฑุท ุงููุทููุจ)
            outEl.textContent += '\n\nโ ููุชุงุฒ โ ุงูููุฏ ูุนูู ูููุฎุฑุฌ ูููุฉ ุนุดูุงุฆูุฉ ุตุญูุญุฉ. ๐';
            window.SOLUTION_STATUS[solId] = { correct: true, code: currentCode };
            showToast('ุจุฑุงูู! ุงูููุฏ ุตุญูุญ ููุนูู ๐ช', true);
        } else {
            // ุงูููุฏ ูุดู ูู ุฅุฎุฑุงุฌ ุฃุฑูุงู
            outEl.classList.add('error');
            outEl.textContent += '\n\nโ ุงูููุฏ ูุดู ูู ุชูููุฏ ุฑูู ุตุญูุญ. ุฑุงุฌุน ุตูุบุฉ Math.floor(Math.random() * N) (+ O).';
            window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode };
            showToast('ูุฑูุจ ุฌุฏูุง โ ุฑุงุฌุน ุงูููุฏ โ๏ธ', false);
        }
    } else if (sNorm === eNorm) {
        // ุงูููุงุฑูุฉ ุงูุฏูููุฉ ููุฃูุซูุฉ ุบูุฑ ุงูุนุดูุงุฆูุฉ
        outEl.textContent += '\n\nโ ููุชุงุฒ โ ุงููุงุชุฌ ูุธุจูุท ุจุงูุธุจุท! ๐';
        window.SOLUTION_STATUS[solId] = { correct: true, code: currentCode }; 
        showToast('ุจุฑุงูู! ุงููุงุชุฌ ูุธุจูุท ๐ช', true);
    } else {
        // ุญุงูุฉ ูุดู ุงูููุงุฑูุฉ ุงูุฏูููุฉ (ููุฃูุซูุฉ ุบูุฑ ุงูุนุดูุงุฆูุฉ)
        outEl.classList.add('error');
        // ****** ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูููุญุณููุฉ ******
        outEl.textContent += '\n\nโ ุงููุงุชุฌ ูุด ุฒู ุงููุชููุน: ';
        
        const diffLine = firstDiffLine(eNorm, sNorm);
        if (diffLine !== null) {
            outEl.textContent += `ุฃูู ุงุฎุชูุงู ูุงู ูู ุณุทุฑ ุงูุฅุฎุฑุงุฌ ุฑูู ${diffLine}.`;
        } else {
            outEl.textContent += 'ุงููุงุชุฌ ูุฎุชูู ุนู ุงูุญู ุงููุฑุฌุนู.';
        }
        
        outEl.textContent += '\n\n๐ค ููุชุตุญูุญ: ุฑุงุฌุน ุงูุณุทุฑ ุงูููุชููุน ููุงุฑูู ุจุงูุณุทุฑ ุงูุฐู ุธูุฑ ูู.';
        outEl.textContent += `\n\n--- ุงููุงุชุฌ ุงูููุชููุน (ุจุนุฏ ุงูุชูุธูู) ---\n${eNorm || '(ูููุด ูุชุงูุฌ ูุชููุนุฉ)'}`;
        outEl.textContent += `\n--------------------------------------`;
        
        window.SOLUTION_STATUS[solId] = { correct: false, code: expectedCode }; 
        showToast('ูุฑูุจ ุฌุฏูุง โ ุฑุงุฌุน ุงูุงุฎุชูุงู ูุนุฏูู ููุฏู โ๏ธ', false);
    }
}
window.runAndCompare = runAndCompare;

/* ----- ุฏุงูุฉ ุนุฑุถ ุงูุญู ุงูุฌุฏูุฏุฉ (ุชุนุชูุฏ ุนูู ุญุงูุฉ SOLUTION_STATUS) (ููุง ูู) ----- */
function toggleSolution(editorId, solId, refCodeId){
    const solEl = document.getElementById(solId);
    if(!solEl) return;
    
    if (solEl.style.display === 'block') {
        // ูู ุงูุญู ููุชูุญุ ุงูููู
        solEl.style.display = 'none';
        return;
    }
    
    // ุงูุญู ูุด ููุชูุญุ ูุงุฒู ูุนุฑุถู
    const status = window.SOLUTION_STATUS[solId];
    const expectedCode = window.REF_CODES[refCodeId];
    const editorCode = document.getElementById(editorId).value;

    if (status && status.code) {
        // ููู ูุชูุฌุฉ ุณุงุจูุฉ ุจุนุฏ ุงูุชุดุบูู (ุณูุงุก ุตุญ ุฃู ุบูุท)
        solEl.textContent = status.code;
        solEl.style.display = 'block';
        if(status.correct){
            solEl.textContent = `// โ ุงูุญู ุจุชุงุนู ุฏู ุตุญ:\n${status.code}`;
        } else {
            solEl.textContent = `// โ ุงูุญู ุงููุฑุฌุนู (ุดูู ุงููุฑู ุจููู ูุจูู ููุฏู):\n${status.code}`;
        }
    } else {
        // ูู ูุชู ุชุดุบูู ุงูููุฏ ุจุนุฏุ ูุนุฑุถ ุงูููุฏ ุงููุฑุฌุนู ูููุจู ุงููุณุชุฎุฏู
        solEl.textContent = `// โ๏ธ ูุงุฒู ุชุดุบูู ุงูููุฏ ุงูุฃูู ุนุดุงู ูุญุฏุฏ ูู ููุฏู ุตุญ ููุง ุบูุท.\n${expectedCode}`;
        solEl.style.display = 'block';
    }
}
window.toggleSolution = toggleSolution;

/* ----- Toast (ููุง ูู) ----- */
function showToast(text, ok){
    const t = document.createElement('div');
    t.style.position='fixed'; t.style.left='50%'; t.style.transform='translateX(-50%)';
    t.style.bottom='26px'; t.style.padding='10px 14px'; t.style.borderRadius='999px';
    t.style.color='#fff'; t.style.fontWeight='700'; t.style.zIndex=9999;
    t.style.boxShadow='0 8px 20px rgba(0,0,0,0.2)';
    t.style.background = ok? 'rgba(6,125,70,0.95)' : 'rgba(150,20,20,0.95)';
    // ุฅุญุณุงุณ ุจุงูุฏุฎูู
    t.style.opacity = '0';
    t.style.transition = 'all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)'; /* ุฏุงูุฉ ุฒูููุฉ ุฑุงุฆุนุฉ */
    document.body.appendChild(t);
    
    // ุธููุฑ ุงูู Toast
    setTimeout(()=>{ t.style.opacity='1'; t.style.transform='translateX(-50%) translateY(0px)'; }, 10);
    
    // ุงุฎุชูุงุก ุงูู Toast
    setTimeout(()=>{ 
        t.style.opacity='0'; 
        t.style.transform='translateX(-50%) translateY(20px)'; /* ุญุฑูุฉ ูุฒูู ุฎูููุฉ ูุจู ุงูุงุฎุชูุงุก */
        setTimeout(()=>t.remove(), 420);
    }, 2000); /* ูุฏุฉ ุนุฑุถ ุฃุทูู ููููุงู 2 ุซุงููุฉ */
    t.textContent = text;
}
window.showToast = showToast;
</script>
</body>
</html>
