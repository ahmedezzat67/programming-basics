<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุงูุฏุฑุณ ุงูุซุงูู - ุงููุชุบูุฑุงุช ูุงูุดุฑูุท</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        
        /* ุงูุฃููุงุท (Styles) ุงูุฃุณุงุณูุฉ ููุง ูู */
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #f9f9f9, #e0f7fa);
            color: #222;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #00796b;
            font-size: 2em;
        }
        h2 {
            color: #004d40;
            font-size: 1.5em;
            margin-top: 30px;
            border-bottom: 2px solid #e0f7fa;
            padding-bottom: 10px;
        }

        .quiz-container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: right;
        }

        .question {
            margin: 20px 0;
            font-weight: bold;
            color: #004d40;
            white-space: pre-wrap;
            text-align: right;
        }
        
        .code-snippet {
            display: block;
            background-color: #f1f8e9;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            direction: ltr;
            text-align: left;
            overflow-x: auto;
        }

        .option {
            background-color: #f1f8e9;
            border: 2px solid #009688;
            border-radius: 10px;
            padding: 10px;
            margin: 8px 0;
            cursor: pointer;
            transition: 0.3s;
        }

        .option:hover {
            background-color: #e0f2f1;
            transform: scale(1.03);
        }
        /* ุฃููุงุท ููุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุงูุฎุงุทุฆุฉ */
        .option.correct {
            background-color: #a5d6a7 !important; /* ุฃุฎุถุฑ ูุงุชุญ */
        }
        .option.wrong {
            background-color: #ef9a9a !important; /* ุฃุญูุฑ ูุงุชุญ */
        }


        .feedback {
            margin-top: 8px;
            font-size: 15px;
            font-weight: bold;
            color: #004d40;
            min-height: 20px; /* ูุถูุงู ุนุฏู ุงูุชุฒุงุฒ ุงูุตูุญุฉ */
        }

        .btn {
            background: linear-gradient(90deg, #009688, #26a69a);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .btn:hover {
            transform: scale(1.05);
            background: linear-gradient(90deg, #00796b, #004d40);
        }

        .result {
            font-size: 18px;
            margin-top: 20px;
            font-weight: bold;
            text-align: center;
        }

        .footer {
            margin-top: 30px;
            font-size: 14px;
            color: #555;
            text-align: center;
        }

        /* ุฃููุงุท ุงููุดุฑูุน ุงูุชุทุจููู */
        .project-section {
            border: 2px solid #009688;
            padding: 20px;
            border-radius: 15px;
            background-color: #f7fff7;
            margin-top: 20px;
        }
        .project-explanation {
            line-height: 1.7;
            font-weight: 600;
        }
        .project-output {
            margin-top: 10px;
            background:#fff;
            padding:12px;
            border-radius:8px;
            font-family:monospace;
            direction:ltr;
            text-align:left;
            white-space:pre-wrap;
            min-height:50px;
            color:#004d40;
            font-weight:700;
            border: 1px solid #ccc;
        }
        .project-output.error {
            background:#fff0f0;
            color:#a00;
            border-color: #a00;
        }
        .project-output.success {
            background: #e6ffe6;
            color: #0a0;
            border-color: #0a0;
        }
        .editor {
            width:100%;
            min-height:150px;
            font-family:monospace;
            font-size:15px;
            direction:ltr;
            text-align:left;
            border-radius:10px;
            padding:12px;
            border:2px solid #d6eae6;
            background:#fff;
            resize:vertical;
        }
    </style>
</head>
<body>

    <h1>๐ ุงุฎุชุจุงุฑ ุงูุฏุฑุณ ุงูุซุงูู - ุงููุชุบูุฑุงุช ูุงูุฌูู ุงูุดุฑุทูุฉ</h1>

    <div class="quiz-container" id="quiz">
        <div id="questions"></div>
        
        <div style="text-align:center; margin-top: 20px;">
            <button class="btn" onclick="submitQuiz()">ุนุฑุถ ูุฌููุน ุงูููุงุท</button>
            <button class="btn" onclick="showCorrectAnswers()">ุงุนุฑุถ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ</button>
        </div>
        <div id="result" class="result"></div>
        
        <h2>๐ ูุดุฑูุน ุชุทุจููู: ุงุฎุชุจุงุฑ ุงููุฌุงุญ ูุงูุฑุณูุจ</h2>
        <div class="project-section">
            <p class="project-explanation">
                <strong>ุงููููุฉ:</strong> ุงูุชุจ ููุฏ JavaScript ูุญูู ุงูุดุฑูุท ุงูุชุงููุฉ:
                <ol style="text-align: right;">
                    <li>ุนุฑูู ูุชุบููุฑ ุงุณูู <code>studentScore</code> ูุฃุณูุฏ ูู ูููุฉ 75.</li>
                    <li>ุงุณุชุฎุฏู ุฌููุฉ <code>if/else</code>:</li>
                    <li>ุฅุฐุง ูุงูุช ูููุฉ <code>studentScore</code> **ุฃูุจุฑ ูู ุฃู ุชุณุงูู 60**ุ ุงุทุจุน ูู ุงูู Console (ุจุงุณุชุฎุฏุงู <code>console.log</code>): <code>"ูุจุฑููุ ุงูุทุงูุจ ูุงุฌุญ!"</code></li>
                    <li>ูุฅูุง (ูู ุญุงูุฉ ุงูุฑุณูุจ)ุ ุงุทุจุน: <code>"ููุงุณูุ ุงูุทุงูุจ ุฑุงุณุจ. ูุญุงููุฉ ุงุฎุฑู!"</code></li>
                </ol>
            </p>
            <label>ุงูุชุจ ุงูููุฏ ุจุชุงุนู ููุง:</label>
            <textarea id="project_editor" class="editor">let studentScore = 75;
// ุงูุชุจ ุงูููุฏ ุงูุดุฑุทู ููุง</textarea>
            <div style="text-align:center;">
                <button class="btn" onclick="runProjectTest()">โถ ุชุดุบูู ุงูููุฏ ูุงุฎุชุจุงุฑ ุงููุชูุฌุฉ</button>
            </div>
            <div id="project_output" class="project-output">ุงููุงุชุฌ ุณูุธูุฑ ููุง...</div>
        </div>
        
        <br>
        <div style="text-align:center;">
            <button class="btn" onclick="location.href='lesson2.html'">๐ ุฑุฌูุน ููุฏุฑุณ</button> 
            <button class="btn" onclick="location.href='index.html'">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</button>
            <button class="btn" onclick="location.href='lesson3.html'">โก๏ธ ุงูุฏุฑุณ ุงูุซุงูุซ</button>
        </div>
    </div>

    <div class="footer">
        ุชู ุงูุชุตููู ุจูุงุณุทุฉ <strong>Ahmed Ezzat</strong> โค๏ธ
    </div>

    <script>
        const quizData = [
            // ููุณ ุงูู 20 ุณุคุงู
            { 
                question: "ุฅูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูููุชุบูุฑ 'score'ุ\n<span class='code-snippet'>let score = 50;\nscore = 100;\nscore += 20;</span>", 
                options: ["50", "100", "120", "150"], 
                answer: 2, 
                explanation: "ูุจุฏุฃ ุจู 50ุ ุซู ูุชู ุฅุณูุงุฏ 100ุ ุซู ูุถุงู ุฅููู 20ุ ููุตุจุญ 120." 
            },
            { 
                question: "ูุงุฐุง ูุนูู ุงูุชุนุจูุฑ 'apple = apple + 10;'ุ", 
                options: ["ุฃู ุงููููุฉ ุงูุฌุฏูุฏุฉ ูู apple ูู 10", "ุฃู ูููุฉ apple ุชุฒูุฏ ุจููุฏุงุฑ 10", "ุฃู ูููุฉ apple ุชููุต ุจููุฏุงุฑ 10", "ุฃูู ุฎุทุฃ ูู ุงูููุฏ"], 
                answer: 1, 
                explanation: "ูุฐุง ุงูุชุนุจูุฑ ูุฒูุฏ ุงููููุฉ ุงูุญุงููุฉ ูููุชุบูุฑ apple ุจููุฏุงุฑ 10." 
            },
            { 
                question: "ูุง ูู ุงูุงุฎุชุตุงุฑ ุงูุตุญูุญ ูู 'count = count - 1;'ุ", 
                options: ["count -= 1;", "count = -1;", "count --;", "count //= 1;"], 
                answer: 0, 
                explanation: "ุงูุงุฎุชุตุงุฑ ุงูููุงุณู ูู <code>-=</code>ุ ุจุงูุฑุบู ูู ุฃู <code>count--</code> ูุนูู ุฃูุถุงู." 
            },
            { 
                question: "ูู ูุงู <span class='code-snippet'>let money = 200;</span>. ุจุนุฏ ุณุทุฑ <span class='code-snippet'>money = 50;</span>ุ ูู ุชููู ูููุฉ moneyุ", 
                options: ["200", "50", "250", "0"], 
                answer: 1, 
                explanation: "ุนูููุฉ ุงูุฅุณูุงุฏ ( = ) ุชูุบู ุงููููุฉ ุงููุฏููุฉ ูุชุถุน ุงููููุฉ ุงูุฌุฏูุฏุฉ 50." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชูุ\n<span class='code-snippet'>let x = 10;\nx++;\nconsole.log(x);</span>", 
                options: ["10", "11", "9", "ุฎุทุฃ"], 
                answer: 1, 
                explanation: "ุงูุนุงูู <code>++</code> ูุฒูุฏ ุงููุชุบูุฑ ุจููุฏุงุฑ 1 (10 + 1 = 11)." 
            },
            { 
                question: "ูุฃู ุบุฑุถ ุชุณุชุฎุฏู ุฌููุฉ <code>if</code>ุ", 
                options: ["ูุชุฎุฒูู ูููุฉ", "ูุชูุฑุงุฑ ููุฏ", "ูุงุชุฎุงุฐ ูุฑุงุฑ ุจูุงุกู ุนูู ุดุฑุท", "ูุชุดุบูู ุงูุตูุญุฉ"], 
                answer: 2, 
                explanation: "ุชุณุชุฎุฏู <code>if</code> ููุชุญูู ูู ุณูุฑ ุงูุจุฑูุงูุฌ ูู ุฎูุงู ุชูููุฐ ููุฏ ูุนูู ุฅุฐุง ุชุญูู ุดุฑุท." 
            },
            { 
                question: "ูุงุฐุง ูุนูู ุงูุฑูุฒ <code>===</code>ุ", 
                options: ["ููุงุฑูุฉ ุงููููุฉ ููุท", "ุฅุณูุงุฏ ูููุฉ", "ููุงุฑูุฉ ุงููููุฉ ูุงูููุน ูุนุงู", "ููุงุฑูุฉ ุงููุตูุต ููุท"], 
                answer: 2, 
                explanation: "<code>===</code> ููุงุฑู ุงููููุฉ ูููุน ุงูุจูุงูุงุชุ ููู ุงูุฃูุถู ูู ุงูุบุงูุจ." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชูุ\n<span class='code-snippet'>console.log(10 == '10');</span>", 
                options: ["true", "false", "ุฎุทุฃ", "undefined"], 
                answer: 0, 
                explanation: "<code>==</code> ูุง ููุงุฑู ุงูููุนุ ูุฐูู ูุนุชุจุฑ ุงูุฑูู 10 ูุณุงูู ูููุต '10'." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชูุ\n<span class='code-snippet'>console.log(10 === '10');</span>", 
                options: ["true", "false", "ุฎุทุฃ", "undefined"], 
                answer: 1, 
                explanation: "<code>===</code> ููุงุฑู ุงูููุน (ุฑูู ูููุน ูุต)ุ ูููุง ุบูุฑ ูุชุณุงูููู." 
            },
            { 
                question: "ูุงุฐุง ูุนูู ุงูุฑูุฒ <code>!</code> ูุจู ูุชุบูุฑ (ูุซู <code>!isDone</code>)ุ", 
                options: ["ูุนูุณ ุงููููุฉ ุงูููุทููุฉ (Not)", "ูุนูู ุฃู ุงููุชุบูุฑ ูุงุฑุบ", "ูุถุฑุจ ุงููููุฉ ูู -1", "ูููู ุงูุจุฑูุงูุฌ"], 
                answer: 0, 
                explanation: "<code>!</code> ูู ุนุงูู ุงูููู (Not)ุ ููุนูุณ ูููุฉ <code>true</code> ุฅูู <code>false</code> ูุงูุนูุณ." 
            },
            { 
                question: "ุฃู ูู ุงูุชุงูู **ููุณ** ุนุจุงุฑุฉ ุนู ุดุฑุท ุตุญูุญุ", 
                options: ["score > 90", "isLoggedIn === true", "if (x < 5)", "age <= 18"], 
                answer: 2, 
                explanation: "<code>if (x < 5)</code> ูู ุฌููุฉ ุดุฑุทูุฉ ูุงููุฉ ูููุณุช ูุฌุฑุฏ ุนุจุงุฑุฉ ุดุฑุทูุฉ (expression)." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชูุ\n<span class='code-snippet'>let day = 'Sun';\nif (day === 'Mon') {\n  console.log('Work');\n} else {\n  console.log('Rest');\n}</span>", 
                options: ["Work", "Rest", "ุฎุทุฃ", "ูุง ุดูุก"], 
                answer: 1, 
                explanation: "ุงููุชุบูุฑ <code>day</code> ูู 'Sun' ูููุณ 'Mon'ุ ูุฐุง ุณูุชู ุชูููุฐ ููุฏ <code>else</code>." 
            },
            { 
                question: "ูุชุญุฏูุฏ ูุชุบูุฑ ุซุงุจุช (ูุง ุชุชุบูุฑ ูููุชู)ุ ูุณุชุฎุฏู:", 
                options: ["let", "var", "const", "final"], 
                answer: 2, 
                explanation: "<code>const</code> ุชุณุชุฎุฏู ูุชุนุฑูู ุงูุซูุงุจุช ุงูุชู ูุฌุจ ุฃู ุชุธู ูููุชูุง ุซุงุจุชุฉ." 
            },
            { 
                question: "ูู ูุงูุช <span class='code-snippet'>let result = 1;\nresult *= 5;</span>. ูู ุชููู ูููุฉ resultุ", 
                options: ["1", "5", "10", "ุฎุทุฃ"], 
                answer: 1, 
                explanation: "<code>*=</code> ูู ุงุฎุชุตุงุฑ ููุถุฑุจ ูุงูุฅุณูุงุฏ. (1 * 5 = 5)." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชูุ\n<span class='code-snippet'>let temp = 25;\nif (temp > 30) {\n  console.log('Hot');\n}\nconsole.log('Done');</span>", 
                options: ["Hot", "Done", "Hot\nDone", "ุฎุทุฃ"], 
                answer: 1, 
                explanation: "ุงูุดุฑุท (25 > 30) ุบูุฑ ุตุญูุญุ ููู ูุชู ุทุจุงุนุฉ 'Hot'. ุณูุชู ุทุจุงุนุฉ 'Done' ููุท ูุฃูู ุฎุงุฑุฌ ุงูู <code>if</code>." 
            },
            { 
                question: "ุฃู ุฑูุฒ ูุณุชุฎุฏู ูู 'ุฃุตุบุฑ ูู ุฃู ูุณุงูู'ุ", 
                options: ["<", ">", "<=", ">="], 
                answer: 2, 
                explanation: "<code><=</code> ูุนูู ุฃุตุบุฑ ูู ุฃู ูุณุงูู." 
            },
            { 
                question: "ูู ูุงูุช ูููุฉ 'isLogged' ูู <code>false</code>ุ ูุง ูููุฉ <code>!isLogged</code>ุ", 
                options: ["true", "false", "undefined", "0"], 
                answer: 0, 
                explanation: "<code>!</code> ูุนูุณ ุงููููุฉ ุงูููุทููุฉุ ูู <code>!false</code> ุชููู <code>true</code>." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชูุ\n<span class='code-snippet'>let item = 10;\nitem /= 2;\nconsole.log(item);</span>", 
                options: ["20", "5", "10", "ุฎุทุฃ"], 
                answer: 1, 
                explanation: "<code>/=</code> ูู ุงุฎุชุตุงุฑ ูููุณูุฉ ูุงูุฅุณูุงุฏ. (10 / 2 = 5)." 
            },
            { 
                question: "ูู ูุชุจูุง <span class='code-snippet'>let val = 10;</span>ุ ูุจุนุฏูุง <span class='code-snippet'>val = 'Hello';</span>ุ ูุงุฐุง ุญุฏุซุ", 
                options: ["ุญุฏุซ ุฎุทุฃ", "ุชู ุชุญุฏูุซ ุงููููุฉ ูุงูููุน", "ุชู ุชุญุฏูุซ ุงูููุน ููุท", "ุชู ุชุญุฏูุซ ุงููููุฉ ููุท"], 
                answer: 1, 
                explanation: "ุชู ุชุบููุฑ ุงููููุฉ ูู 10 ุฅูู 'Hello' ูุชุบูุฑ ุงูููุน ูู ุฑูู (number) ุฅูู ูุต (string)." 
            },
            { 
                question: "ูุงุฐุง ุณูุชู ุทุจุงุนุชูุ\n<span class='code-snippet'>let num = 5;\nif (num > 5) {\n  console.log(1);\n} else if (num === 5) {\n  console.log(2);\n} else {\n  console.log(3);\n}</span>", 
                options: ["1", "2", "3", "ูุง ุดูุก"], 
                answer: 1, 
                explanation: "ุงูุดุฑุท ุงูุฃูู (5 > 5) ุฎุงุทุฆ. ุงูุดุฑุท ุงูุซุงูู (5 === 5) ุตุญูุญุ ููุชู ุทุจุงุนุฉ 2." 
            }
        ];

        const questionsDiv = document.getElementById("questions");
        let selectedAnswers = new Array(quizData.length).fill(null);

        quizData.forEach((q, i) => {
            const div = document.createElement("div");
            div.classList.add("question-block");
            div.id = `q-${i}`; // ุฅุถุงูุฉ ID ููู ุณุคุงู
            
            div.innerHTML = `
                <p class="question">${i + 1}. ${q.question}</p>
                ${q.options.map((opt, index) => `
                    <div class="option" data-q-index="${i}" data-opt-index="${index}" onclick="selectOption(${i}, ${index}, this)">${opt}</div>
                `).join('')}
                <div id="feedback-${i}" class="feedback"></div>
            `;
            questionsDiv.appendChild(div);
        });

        /* ===========================
          ุชุญุฏูุซ ูุธููุฉ selectOption
          (ูุชูููุฑ ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ ุงูููุฑูุฉ)
          =========================== */
        function selectOption(qIndex, optIndex, el) {
            const questionBlock = el.parentNode;
            const options = questionBlock.querySelectorAll(".option");
            const feedback = questionBlock.querySelector(`#feedback-${qIndex}`);
            const q = quizData[qIndex];

            // 1. ุฅุนุงุฏุฉ ุชุนููู ุงูุชูููู
            options.forEach(opt => {
                opt.classList.remove('correct', 'wrong');
                opt.style.backgroundColor = "#f1f8e9";
            });

            selectedAnswers[qIndex] = optIndex;
            
            // 2. ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ ุงูููุฑูุฉ ูุชูููููุง
            if (optIndex === q.answer) {
                el.classList.add('correct');
                feedback.innerHTML = `โ **ุตุญูุญ!** ${q.explanation}`;
                feedback.style.color = "#2e7d32";
            } else {
                el.classList.add('wrong');
                feedback.innerHTML = `โ **ุฎุทุฃ!** ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: <b>${q.options[q.answer]}</b> - ${q.explanation}`;
                feedback.style.color = "#c62828";
            }
        }

        /* ===========================
          ูุธููุฉ ุนุฑุถ ุงููุชูุฌุฉ ุงููููุฉ
          (ุจุฏูู ุฅุธูุงุฑ ุงูุชูุณูุฑ ูุฑุฉ ุฃุฎุฑู)
          =========================== */
        function submitQuiz() {
            let score = 0;
            let total = quizData.length;
            let unanswered = 0;
            
            quizData.forEach((q, i) => {
                if (selectedAnswers[i] === null) {
                    unanswered++;
                } else if (selectedAnswers[i] === q.answer) {
                    score++;
                }
            });

            const resultDiv = document.getElementById("result");
            
            if (unanswered > 0) {
                resultDiv.innerHTML = `๐ซ ูู ุชุฌุจ ุนูู ${unanswered} ุณุคุงู. `;
            } else {
                resultDiv.innerHTML = "";
            }

            if (score === total) {
                resultDiv.innerHTML += `๐ ููุชุงุฒ ูุง ูุจุฑูุฌ ุงููุณุชูุจู! ุฌุจุช <b>${score}</b> ูู <b>${total}</b> โ`;
            } else if (score >= total * 0.7) {
                resultDiv.innerHTML += `๐ ูุชูุฌุชู ุฑุงุฆุนุฉ! ุฌุจุช <b>${score}</b> ูู <b>${total}</b>ุ ุดููุฉ ูุฑุงุฌุนุฉ ุจุณูุทุฉ. ๐ช`;
            } else if (score >= total / 2) {
                resultDiv.innerHTML += `๐ ูุชูุฌุชู ุฌูุฏุฉ! ุฌุจุช <b>${score}</b> ูู <b>${total}</b>ุ ุฑุงุฌุน ุงูุฃุฌุฒุงุก ุงููู ุฃุฎุทุฃุช ูููุง.`;
            } else {
                resultDiv.innerHTML += `๐ค ูุญุชุงุฌ ูุฑุงุฌุนุฉ ุจุณูุทุฉุ ุฌุจุช <b>${score}</b> ูู <b>${total}</b>. ูุง ุชูุฃุณุ ูุฑุฑ ุงููุญุงููุฉ!`;
            }
        }

        function showCorrectAnswers() {
            quizData.forEach((q, i) => {
                const questionBlock = document.getElementById(`q-${i}`);
                const options = questionBlock.querySelectorAll(".option"); 
                const feedback = questionBlock.querySelector(`#feedback-${i}`);

                // ูุณุญ ุงูุชูููู ุงูุณุงุจู ูุชูููู ุงูุตุญูุญ ููุท
                options.forEach(opt => {
                    opt.classList.remove('correct', 'wrong');
                    opt.style.backgroundColor = "#f1f8e9";
                });

                options[q.answer].classList.add('correct');
                feedback.innerHTML = `โ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: <b>${q.options[q.answer]}</b> - ${q.explanation}`;
                feedback.style.color = "#2e7d32";
            });
            document.getElementById("result").innerHTML = "ุชู ุชุธููู ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ. ุฑุงุฌุน ุงูุดุฑุญ ูู ูู ุณุคุงู.";
        }


        /* ===========================
          ูุธููุฉ ุงุฎุชุจุงุฑ ุงููุดุฑูุน ุงูุชุทุจููู
          =========================== */
        function executeAndCapture(codeStr){
            const logs = [];
            const origConsole = window.console.log; 

            // ุฅุนุงุฏุฉ ุชูุฌูู console.log ูููุก ุงููุตูููุฉ logs
            window.console.log = function(...args){
                const line = args.map(a=>{
                    if (typeof a === 'object' && a !== null) {
                        try { return JSON.stringify(a); } catch(e){ return String(a); } 
                    }
                    return String(a);
                }).join(' ');
                logs.push(line);
                try { origConsole.apply(window.console, args); } catch(e){}
            };

            let error = null;
            try {
                // ุชูููุฐ ุงูููุฏ ูู ุจูุฆุฉ ูุนุฒููุฉ
                const codeToExecute = `'use strict';\n${codeStr}`;
                const fn = new Function(codeToExecute);
                fn();
            } catch (err) {
                let msg = err && err.message ? err.message : String(err);
                msg = msg.replace(/\n/g,' ').replace(/\s+/g,' ').trim();
                error = { msg };
            } finally {
                // ุฅุนุงุฏุฉ console.log ููุธููุชู ุงูุฃุตููุฉ
                window.console.log = origConsole;
            }
            return { logs, error };
        }

        function runProjectTest(){
            const editor = document.getElementById('project_editor');
            const outputEl = document.getElementById('project_output');
            const code = editor.value || '';
            const cleanedCode = code.replace(/\/\*[\s\S]*?\*\//g, '').replace(/\/\/.*$/gm, '').trim();

            outputEl.classList.remove('success', 'error');
            outputEl.textContent = '... ุฌุงุฑู ุงูุชูููุฐ ูุงูุชุญูู ...';

            if (!cleanedCode) {
                outputEl.classList.add('error');
                outputEl.textContent = 'โ๏ธ ุงูุชุจ ุงูููุฏ ุฃููุงู.';
                return;
            }

            // 1. ุงูุชุญูู ูู ูุฌูุฏ ุงููุชุบูุฑุงุช ูุงูุฌูู ุงูุดุฑุทูุฉ ุงููุทููุจุฉ
            if (!/let\s+studentScore\s*=\s*75/i.test(cleanedCode)) {
                outputEl.classList.add('error');
                outputEl.textContent = 'โ ุฎุทุฃ: ุชุฃูุฏ ูู ุชุนุฑูู ุงููุชุบูุฑ let studentScore = 75; ุจุดูู ุตุญูุญ.';
                return;
            }
            if (!/if\s*\([^)]*>= 60[^)]*\)/i.test(cleanedCode)) {
                outputEl.classList.add('error');
                outputEl.textContent = 'โ ุฎุทุฃ: ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุงูุดุฑุท (>= 60) ูู ุฌููุฉ if.';
                return;
            }

            // 2. ุชูููุฐ ุงูููุฏ ูุงุฎุชุจุงุฑ ุงููุงุชุฌ
            const studentRes = executeAndCapture(code);

            if (studentRes.error) {
                outputEl.classList.add('error');
                outputEl.textContent = `โ ุฎุทุฃ ูู ุงูููุฏ: ${studentRes.error.msg}`;
                return;
            }

            const studentOutput = (studentRes.logs || []).join('\n').trim();
            const expectedSuccess = "ูุจุฑููุ ุงูุทุงูุจ ูุงุฌุญ!";
            const expectedFail = "ููุงุณูุ ุงูุทุงูุจ ุฑุงุณุจ. ูุญุงููุฉ ุงุฎุฑู!";

            if (studentOutput === expectedSuccess) {
                // ุงูุชุญูู ูู ุตุญุฉ ุงูููุฏ ุจุงุณุชุฎุฏุงู ูููุฉ ุฑุงุณุจุฉ ุฃูุถุงู
                let failCode = code.replace(/let\s+studentScore\s*=\s*75/i, 'let studentScore = 50;');
                const failRes = executeAndCapture(failCode);
                const failOutput = (failRes.logs || []).join('\n').trim();
                
                if (failOutput === expectedFail) {
                    outputEl.classList.add('success');
                    outputEl.textContent = `โ ููุชุงุฒ! ุงูููุฏ ูุนูู ุจุดูู ุตุญูุญ ูุฌููุน ุงูุญุงูุงุช (ุงููุงุฌุญ ูุงูุฑุงุณุจ). \nุงููุงุชุฌ: ${studentOutput}`;
                } else {
                    outputEl.classList.add('error');
                    outputEl.textContent = `โ๏ธ ุงูููุฏ ููุฌุญ ูู 75ุ ููู ูู ูุนูู ุจุงูุดูู ุงูุตุญูุญ ูุน ูููุฉ 50. ุชุฃูุฏ ูู ูุฌูุฏ else ูุทุจุงุนุฉ ุฑุณุงูุฉ ุงูุฑุณูุจ. \nุงููุงุชุฌ ุงูุญุงูู: ${studentOutput}`;
                }

            } else {
                outputEl.classList.add('error');
                if (studentOutput.includes(expectedFail)) {
                    outputEl.textContent = `โ ุงููุงุชุฌ ุฎุทุฃ! ุงูููุฏ ุทุจุน ุฑุณุงูุฉ ุงูุฑุณูุจ ุจุฏูุงู ูู ุงููุฌุงุญ. ุชุฃูุฏ ูู ุงูุดุฑุท (>= 60) ูุงูุฑุณุงุฆู ุงููุทุจูุนุฉ. \nุงููุงุชุฌ: ${studentOutput}`;
                } else {
                    outputEl.textContent = `โ ุงููุงุชุฌ ุฎุทุฃ! ุชุฃูุฏ ูู ุฃู ุงูููุฏ ูุทุจุน: "ูุจุฑููุ ุงูุทุงูุจ ูุงุฌุญ!" ุนูุฏ 75.\nุงููุงุชุฌ ุงููู ุทูุน: ${studentOutput || '(ูู ูุชู ุทุจุงุนุฉ ุดูุก)'}`;
                }
            }
        }
    </script>

</body>
</html>